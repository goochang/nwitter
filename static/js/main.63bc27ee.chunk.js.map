{"version":3,"sources":["fbase.js","components/AuthForm.js","routes/Auth.js","img/default_profile_normal.png","components/Detail/Comment.js","components/Detail/Comments.js","routes/Detail.js","components/NweetFactory.js","components/Nweet.js","helpers/help.js","routes/Home.js","Modal/profile/CoverImgEditModal.js","Modal/profile/CoverImgModal.js","Modal/profile/ProfileImgEditModal.js","Modal/profile/ProfileImgModal.js","components/ProfileEdit.js","routes/Profile.js","routes/Search.js","routes/Verify.js","components/LeftMenu.js","helpers/auth.js","components/Navigation.js","Modal/register/EmailAuthModal.js","Modal/register/PImgEditModal.js","Modal/register/IntroduceModal.js","Modal/register/PImgModal.js","Modal/register/PasswordModal.js","Modal/register/RegisterModal.js","components/Side.js","routes/Follow.js","components/Router.js","components/App.js","index.js"],"names":["firebaseInstance","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","databaseURL","measurementId","authService","auth","storageService","firestore","storage","firebaseDB","database","AuthForm","refreshUser","useState","email","setEmail","password","setPssword","newAccount","error","setError","history","useHistory","onChange","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","data","additionalUserInfo","isNewUser","user","ref","orderByChild","startAt","endAt","once","snapshot","exists","console","log","push","uid","timestamp","metadata","creationTime","displayName","photoURL","coverURL","signInWithEmailAndPassword","message","className","type","placeholder","required","Auth","userObj","useEffect","goBack","onSocialClick","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","catch","code","then","result","undefined","introduce","followCnt","followingCnt","icon","faTwitter","color","size","style","marginBottom","onClick","faGoogle","faGithub","Comment","commentId","commentObj","isOwner","creatorId","creator","setCreator","getCreator","useCallback","equalTo","val","Object","keys","onDeleteClick","window","confirm","remove","to","src","PImg","alt","fromNow","createdAt","text","faTrash","Comments","postId","setText","comments","setComments","Date","now","creatorName","creatorEmail","commentCnt","length","update","getComments","on","map","comment","Detail","withRouter","match","nweet","setNweet","isHeart","setIsHeart","params","key1","getNweet","hearts","forEach","heart","faEllipsisH","attachmentUrl","moment","format","heartCnt","_heartCnt","id","faHeart2","faHeart","htmlFor","faComment","faRetweet","retweetCnt","faUpload","NweetFactory","isUpdate","updateCancel","nweetObj","toggleEditing","attachment","setAttachment","_nweet","_attachment","attachmentRef","child","uuidv4","putString","response","getDownloadURL","refFromURL","delete","key","maxLength","backgroundImage","faTimesCircle","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","currentTarget","readAsDataURL","opacity","faPlus","Nweet","nweet_key","viewRef","editing","setEditing","parentNode","document","getElementsByClassName","classList","click","prev","faPencilAlt","reverseObject","object","newObject","i","toArrayObject","isFollow","Home","nweets","setNweets","useInView","inView","page","setPage","loading","setLoading","getNweets","limitToLast","parseInt","CoverImgEditModal","setModalContent","setModalNum","profileImg","coverImg","setProfileImg","setCoverImg","openModal","prevCover","unit","width","height","aspect","crop","setCrop","completedCrop","setCompletedCrop","imageRef","useRef","previewCanvasRef","setCroppedImageUrl","fileUrl","setFileUrl","makeClineCrop","getCroppedImg","croppedImageUrl","current","image","canvas","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","pixelRatio","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","Promise","resolve","reject","toBlob","blob","URL","revokeObjectURL","createObjectURL","faArrowLeft","ruleOfThirds","onImageLoaded","c","pc","_crop","y_val","bottom","onCropChange","onComplete","onCropComplete","locked","Math","round","CoverImgModal","uploadToStorage","isProfile","imageURL","getFileBlob","put","downURL","updateProfile","userId","go","url","cb","xhr","XMLHttpRequest","open","responseType","addEventListener","send","profileUpdate","startNum","lastIndexOf","substr","uploadRef","faCamera","ProfileImgEditModal","prevProfile","imgForm","setImgForm","h","clientHeight","w","clientWidth","_x","left","percent_crop","x_val","ProfileImgModal","ProfileEdit","isModal","setIsModal","modalContent","setProfileModal","img","e","onRequestClose","shouldCloseOnOverlayClick","shouldCloseOnEsc","isOpen","ariaHideApp","appElement","getElementById","getMyNweets","Search","setUser","setUserId","setIsFollow","setfollowCnt","setfollowingCnt","loginfollowCnt","setLoginfollowCnt","getFollow","follows","follow","from","_followCnt","_followingCnt","Verify","currentUser","is_verfied","emailVerified","LeftMenu","logout","marginRight","faHome","marginTop","faHashtag","faCog","faUser","signOut","sendEmail","actionCodeSettings","handleCodeInApp","sendEmailVerification","localStorage","setItem","errorCode","errorMessage","getUser","_user","callback","numChildren","users","Navigation","location","href","split","path","pathName","setPathName","charAt","toUpperCase","slice","indexOf","EmailAuthModal","nickname","pImg","addUser","EmailRegister","_introduce","PImgEditModal","_pImg","isValidation","IntroduceModal","setIntroduce","textCnt","setTextCnt","isFocus","setIsFocus","spellCheck","onKeyDown","keyCode","autoComplete","onFocus","onBlur","PImgModal","setPImg","_password","PasswordModal","setPassword","passwordError","setPasswordError","isPassShow","setIsPassShow","handleEvent","_email","_name","_nickname","onMouseDown","onMouseUp","RegisterModal","setName","nameCnt","setNameCnt","nameError","setNameError","setNickName","nicknameCnt","setNickNameCnt","nicknameError","setNickNameError","emailError","setEmailError","test","isEmail","handleKeyDown","faTimes","Side","searchValue","setSearchValue","setUsers","isLogin","setIsLogin","handleMouseDown","onAuthStateChanged","faSearch","Follow","setFollows","getFollwers","nweets_result","Array","isArray","find","AppRouter","setUserObj","exact","render","component","App","init","setInit","setUserData","user_id","args","isLoggedIn","Boolean","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.63bc27ee.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\n// import { getAnalytics } from \"firebase/analytics\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\nimport \"firebase/database\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_APP_ID,\r\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n    measurementId: process.env.REACT_APP_MEASUREMENTID\r\n};\r\n\r\n\r\nconst app = firebase.initializeApp(firebaseConfig);\r\n// const analytics = getAnalytics(app);\r\nexport const firebaseInstance = firebase;\r\nexport const authService = firebase.auth();\r\nexport const dbService = firebase.firestore();\r\nexport const storageService = firebase.storage(); \r\nexport const firebaseDB =  firebase.database();","import { authService, firebaseDB } from \"fbase\";\r\nimport { useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst AuthForm = ({refreshUser}) => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPssword] = useState(\"\");\r\n    const [newAccount, setNewAccount] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const history = useHistory();\r\n\r\n    const onChange = (event) => {\r\n        const { name, value } = event.target;\r\n\r\n        if(name === \"email\"){\r\n            setEmail(value);\r\n        }\r\n        if(name === \"password\"){\r\n            setPssword(value);\r\n        }\r\n    }\r\n\r\n    const onSubmit = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n            let data;\r\n            if(newAccount){\r\n                data = await authService.createUserWithEmailAndPassword(email, password)\r\n\r\n                if(data.additionalUserInfo.isNewUser){\r\n                    const user = data.user;\r\n                    firebaseDB.ref('users')\r\n                    .orderByChild('email')\r\n                    .startAt(user.email)\r\n                    .endAt(user.email+\"\\uf8ff\")\r\n                    .once('value', snapshot => {\r\n                        if(!snapshot.exists()){\r\n                            console.log(\"회원가입\")\r\n                            refreshUser();\r\n                            firebaseDB.ref('users').push({\r\n                                uid:user.uid,\r\n                                timestamp : user.metadata.creationTime ? user.metadata.creationTime : \"\",\r\n                                displayName: user.displayName ? user.displayName : user.email,\r\n                                email: user.email ? user.email : \"\",\r\n                                photoURL: user.photoURL ? user.photoURL : \"\",\r\n                                coverURL: \"\",\r\n                                \r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                await authService.signInWithEmailAndPassword(email, password);\r\n            }   \r\n            history.push(\"/\");\r\n        } catch(error){\r\n            setError(error.message);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={onSubmit} className=\"container mgBottom20\">\r\n                <input name=\"email\" type=\"email\" placeholder=\"Email\" value={email} onChange={onChange} required className=\"authInput\"/>\r\n                <input name=\"password\" type=\"password\" placeholder=\"Password\" value={password} onChange={onChange} required className=\"authInput\"/>\r\n                <input type=\"submit\" className=\"authSubmit\" value={newAccount ? \"Create Account\" : \"Log In\"} />\r\n                {error && <span className=\"authError\">{error}</span>}\r\n            </form>\r\n            {/* <span onClick={toggleAccount} className=\"authSwitch\">\r\n                {newAccount ? \"Sign In\" : \"Create Account\"}\r\n            </span> */}\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default AuthForm; ","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTwitter, faGoogle, faGithub} from \"@fortawesome/free-brands-svg-icons\";\r\nimport { authService, firebaseDB, firebaseInstance } from \"fbase\";\r\nimport AuthForm from \"components/AuthForm\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction Auth({userObj, refreshUser}) {\r\n    const history = useHistory();\r\n    const [error, setError] = useState(\"\");\r\n\r\n    useEffect(()=> {\r\n        if(userObj){\r\n            history.goBack()\r\n        }\r\n    }, );\r\n\r\n    const onSocialClick = async (event) => {\r\n        const { target : {name}, } = event;\r\n        let provider;\r\n        if(name===\"google\"){\r\n            provider = new firebaseInstance.auth.GoogleAuthProvider();\r\n        } else if( name === \"github\"){\r\n            provider = new firebaseInstance.auth.GithubAuthProvider();\r\n        }\r\n        await authService.signInWithPopup(provider).catch(function(error){\r\n            console.log(error)\r\n            if(error.code === \"auth/account-exists-with-different-credential\"){\r\n                setError(\"동일한 이메일의 계정이 있습니다 해당 계정으로 로그인해주세요\")\r\n            }\r\n        }).then(function(result){\r\n            console.log(result)\r\n            if(result !== undefined){\r\n                const user = result.user;\r\n                firebaseDB.ref('users')\r\n                .orderByChild('email')\r\n                .startAt(user.email)\r\n                .endAt(user.email+\"\\uf8ff\")\r\n                .once('value', snapshot => {\r\n                    if(!snapshot.exists()){\r\n                        console.log(\"회원가입\")\r\n                        refreshUser();\r\n                        firebaseDB.ref('users').push({\r\n                            uid:user.uid,\r\n                            timestamp : user.metadata.creationTime ? user.metadata.creationTime : \"\",\r\n                            name: user.displayName ? user.displayName : user.email,\r\n                            displayName: user.displayName ? user.displayName : user.email,\r\n                            email: user.email ? user.email : \"\",\r\n                            introduce: \"\",\r\n                            photoURL: user.photoURL ? user.photoURL : \"\",\r\n                            coverURL: \"\",\r\n                            followCnt: 0,\r\n                            followingCnt: 0\r\n                        });\r\n                    }\r\n                });\r\n                history.push(\"/\");\r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"authContainer\">\r\n            <FontAwesomeIcon \r\n            icon={faTwitter}\r\n            color={\"#04AAFF\"}\r\n            size=\"3x\"\r\n            style={{marginBottom: 30}} />\r\n\r\n            <AuthForm refreshUser={refreshUser}/>\r\n            { error && \r\n                <span>{error}</span>}\r\n\r\n            <div className=\"authBtns\">\r\n                <button onClick={onSocialClick} name=\"google\" className=\"authBtn\">\r\n                    Continue with Google <FontAwesomeIcon icon={faGoogle} />\r\n                </button>\r\n                <button onClick={onSocialClick} name=\"github\" className=\"authBtn\">\r\n                    Continue with Github <FontAwesomeIcon icon={faGithub} />\r\n                </button>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Auth;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAwFBMVEXM1t3K1dy5xc2xvca7xs+KmaVrfYtld4agrrhneYhoeoiksbufrbegrbe7xs66xs6Dk5+/ytKdqrWElKCDk6Byg5HG0NjEz9bH0dlqfIprfIuAkJ2ir7nJ09p1hpN0hZO9yNDH0tmbqbTBzNOzv8iqtsCotL6ntL7L1dy3w8yjsLqVpK+Onam8x9CRn6ttf43CzdWMm6dmeIeLmqauusSwvMVxgpCToa29ydFneIeRoKzK1Nttfo2yvseZp7KHl6OOgUPZAAAA80lEQVR4Ae3SA5oDQRgE0Aortm1zNub9T7Xm4O/+uMo7w8O/duNyezxuF3R5fX4+8vu80BII8lUoDA0RfhKFUizIT4JxqCT4RQIKSZokIUvRJAVZmiYZyLI0yUIWpEkQohwtcpDkaZGHpECLAkRFmpQgK9OkDFmFJhXIqjV+Ua9CoZHlJ9kGlJqtLF9lW01oaXe6vX6308aPMRiOxpPJeDQcQMd0Nuer+WwKlcXS4CfG3QKi1Zwm8xUEAYMWRkAZSbvT2qAtYw1bzQ0dbJqws6WjLWzs9nS038HqQMEBFscTBacjzDoUnWF2oegCsytFV7x6ADhgICRy9ELGAAAAAElFTkSuQmCC\"","import { faPencilAlt, faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { firebaseDB } from 'fbase';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport Moment from 'react-moment';\r\nimport { Link } from 'react-router-dom';\r\nimport PImg from '../../img/default_profile_normal.png';\r\n\r\nconst Comment = ({commentId, commentObj, isOwner}) => {\r\n    const creatorId = commentObj === undefined ? \"\" : commentObj.creatorId;\r\n    const [creator, setCreator] = useState(null);\r\n\r\n    const getCreator = useCallback(()=>{\r\n        if(creatorId !== \"\"){\r\n            firebaseDB.ref('users')\r\n            .orderByChild('uid')\r\n            .equalTo(creatorId)\r\n            .once('value', snapshot => {\r\n                const user = snapshot.val();\r\n                setCreator(user[Object.keys(user)[0]] );\r\n            });\r\n        }\r\n    },[creatorId]);\r\n\r\n    const onDeleteClick = async (event) =>{\r\n        event.preventDefault();\r\n        const ok = window.confirm(\"댓글을 삭제하시겠습니까\");\r\n\r\n        if(ok) {\r\n            firebaseDB.ref(`/comments/${commentId}`).remove();\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getCreator()\r\n    }, [getCreator])\r\n    return (\r\n        <div>\r\n            { commentObj && (\r\n                <div className=\"base listView_container flexRow\">\r\n                    <div className=\"base leftProfile\">\r\n                    { creator && \r\n                    <Link to={`/search/${creator.uid}`}>\r\n                        <img src={creator !== null ? (creator.photoURL !== \"\" ? creator.photoURL : PImg)  : \"\"} \r\n                        alt=\"profile_image\" /> \r\n                    </Link>\r\n                    }  \r\n                    </div>\r\n                    <div className=\"base rightContent\">\r\n                        { creator && \r\n                        <div className=\"mgBottom10 flexRow base\">\r\n                            <Link to={`/search/${creator.uid}`} className=\"fontSize16 textBold\">{creator.displayName}</Link>\r\n                            <Moment fromNow className=\"fromNow\">{commentObj.createdAt}</Moment>\r\n                        </div>}\r\n                        <div className=\"base contentText\">\r\n                            <span className='fontSize15'>{commentObj.text}</span>\r\n                        </div>\r\n                        { isOwner && (\r\n                                <div className=\"nweet__actions\">\r\n                                    <span onClick={onDeleteClick}>\r\n                                        <FontAwesomeIcon icon={faTrash} />\r\n                                    </span>\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </div>\r\n                    \r\n                </div>\r\n                )} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comment;","import { firebaseDB } from 'fbase';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport PImg from '../../img/default_profile_normal.png';\r\nimport Comment from './Comment';\r\n\r\nconst Comments = ({creator, userObj, postId}) => {\r\n    const [text, setText] = useState(\"\");\r\n    const [comments, setComments] = useState(null);\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        firebaseDB.ref(\"/comments\").push({\r\n            text:text,\r\n            createdAt: Date.now(),\r\n            postId: postId,\r\n            creatorId: userObj.uid,\r\n            creatorName: userObj.displayName,\r\n            creatorEmail: userObj.email,\r\n        });\r\n        const commentCnt = comments === null ? 1 : Object.keys(comments).length+1;\r\n        firebaseDB.ref(\"posts/\"+ postId).update({\r\n            commentCnt: commentCnt\r\n        });\r\n\r\n        setText(\"\");\r\n    }\r\n    const onChange = (event) => {\r\n        const {target: {value}} = event;\r\n        setText(value);\r\n    }\r\n\r\n    const getComments = useCallback(()=>{\r\n        firebaseDB\r\n        .ref('comments')\r\n        .orderByChild('postId')\r\n        .equalTo(postId)\r\n        .on('value', (snapshot) => {     \r\n            console.log(snapshot.val())   \r\n            setComments(snapshot.val());\r\n        })\r\n    }, [postId]);\r\n    useEffect(()=> {\r\n        getComments();\r\n    }, [getComments])\r\n    return (\r\n        <div className=\"base nweet_comment\">\r\n            <form onSubmit={onSubmit}>\r\n                <div className=\"new_comment base\">\r\n                    {creator && \r\n                    <div className=\"new_comment_profileImg\">\r\n                        <img src={creator.photoURL !== \"\" ? creator.photoURL : PImg} alt=\"profile_image\" /> \r\n                    </div>}\r\n                \r\n                    <div className=\"new_comment_inputText\">\r\n                        <input type=\"text\" onChange={onChange} value={text} placeholder=\"내 답글을 트윗합니다.\" />\r\n                    </div>\r\n                    <div className=\"new_comment_btn base\">\r\n                        <button onClick={onSubmit} aria-disabled={text === \"\"}>답글</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n            <div className='base listView'>\r\n                {\r\n                comments ?\r\n                Object.keys(comments).map((comment) => {\r\n                    return (\r\n                    <Comment commentId={comment} commentObj={comments[comment]} \r\n                    isOwner={comments[comment].creatorId === userObj.uid } />\r\n                    )\r\n                })\r\n                : <span className='noComment'>댓글이 없습니다</span>\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comments;","import { faComment, faHeart } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { faEllipsisH, faHeart as faHeart2, faUpload, faRetweet} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Comments from \"components/Detail/Comments\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport moment from \"moment\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst Detail = withRouter(({match, userObj}) => {\r\n  const [nweet, setNweet] = useState(null);\r\n  const [creator, setCreator] = useState(null);\r\n  const [isHeart, setIsHeart] = useState(false);\r\n\r\n  const postId = match.params.key1;\r\n\r\n  const getNweet = useCallback(async () => {\r\n    firebaseDB.ref('posts/' + postId)\r\n    .on('value', (snapshot) => {     \r\n      console.log(snapshot.val())   \r\n      setNweet(snapshot.val());\r\n    })\r\n  }, [postId] );\r\n\r\n  const getCreator = useCallback(async () => {\r\n    if(nweet !== null){\r\n      firebaseDB.ref('users')\r\n      .orderByChild('uid')\r\n      .equalTo(nweet.creatorId)\r\n      .once('value', snapshot => {\r\n          const user = snapshot.val();\r\n          setCreator(user[Object.keys(user)[0]] );\r\n      });\r\n    }\r\n  }, [nweet]);\r\n\r\n  const heartClick = (event) => {\r\n    event.preventDefault();\r\n    firebaseDB.ref('hearts')\r\n    .orderByChild('value')\r\n    .equalTo(userObj.uid+postId)\r\n    .once('value', snapshot => {\r\n        if(snapshot.exists()){ // 이미 누른적 있는경우\r\n            const hearts = snapshot.val();\r\n            Object.keys(hearts).forEach((heart) => {\r\n                firebaseDB.ref('hearts/' + heart).update({\r\n                    isHeart: !hearts[heart].isHeart\r\n                })\r\n            })                \r\n        } else {\r\n            firebaseDB.ref('hearts').push({\r\n                value:userObj.uid + postId,\r\n                isHeart: true\r\n            });\r\n        }\r\n        const _heartCnt = isHeart ? nweet.heartCnt - 1 : nweet.heartCnt + 1;\r\n        firebaseDB.ref('posts/' + postId).update({\r\n            heartCnt: _heartCnt\r\n        })\r\n        setIsHeart(!isHeart)\r\n    });        \r\n}\r\n\r\n  useEffect( () => {\r\n    if(userObj){\r\n      firebaseDB.ref('hearts')\r\n      .orderByChild('value')\r\n      .equalTo(userObj.uid+postId)\r\n      .once('value', snapshot => {    \r\n          if(snapshot.exists()){\r\n              const hearts = snapshot.val();\r\n              Object.keys(hearts).forEach((heart) => {\r\n                  setIsHeart(hearts[heart].isHeart)\r\n              })\r\n          }\r\n      });\r\n    }\r\n  }, [userObj, postId])\r\n\r\n  useEffect(()=> {\r\n    getNweet();\r\n  }, [getNweet]);\r\n\r\n  useEffect(()=> {\r\n    getCreator();\r\n  }, [getCreator]);\r\n  return (\r\n    <div className=\"base nweet_detail\">\r\n      {/* 작성자 르포필 */}\r\n      <div className=\"nweet_profile base\">\r\n        <div className=\"profile_image\">\r\n          { creator && \r\n          <Link to={`/search/${creator.uid}`}>\r\n              <img src={creator.photoURL !== \"\" ? creator.photoURL : PImg} alt=\"profile_image\" /> \r\n          </Link>}  \r\n        </div>\r\n        { creator && \r\n        <div className=\"profile_detail base\">\r\n          <Link to={`/search/${creator.uid}`} className=\"profile_displayName\">\r\n            {creator.displayName}\r\n          </Link>\r\n          <span className=\"email\">{creator.email}</span>\r\n        </div>}\r\n        <div>\r\n          <FontAwesomeIcon icon={faEllipsisH} />\r\n        </div>\r\n      </div>\r\n      {/* 내용 및 사진 */}\r\n      <div className=\"base nweet_content bbg\">\r\n        { nweet && \r\n          <span className=\"content_text\">{nweet.text}</span>}{\r\n            nweet && nweet.attachmentUrl && (\r\n                <img src={nweet.attachmentUrl} alt=\"nweet_attachment\" /> ) }\r\n        {nweet && \r\n        <span className=\"content_timestamp\">{moment(nweet.timestamp).format('llll')}</span>}\r\n      </div>\r\n      {/* 리트윗 좋아요 */}\r\n      <div className=\"base nweet_cnt bbg\">\r\n        {<div>\r\n          <span className=\"cnt_title\">49</span>\r\n          <span className=\"cnt_value\">리트윗</span>\r\n        </div>}\r\n        {<div>\r\n          <span className=\"cnt_title\">1</span>\r\n          <span className=\"cnt_value\">인용한 트윗</span>\r\n        </div>}\r\n        { nweet&& nweet.heartCnt !== 0 && \r\n        <div>\r\n          <span className=\"cnt_title\">{nweet.heartCnt}</span>\r\n          <span className=\"cnt_value\">마음에 들어요</span>\r\n        </div>}\r\n      </div>\r\n      {/* 상호작용 버튼 */}\r\n      {nweet &&\r\n      <div className=\"nweet_btn_wrap base bbg\">\r\n        <div className={`base heart${isHeart ? \" active\" : \"\"}`} onClick={heartClick}>\r\n            <button className=\"iconBtn\" id=\"nweet_heart\">\r\n                { isHeart ? <FontAwesomeIcon icon={faHeart2} /> : <FontAwesomeIcon icon={faHeart} /> }\r\n            </button>\r\n            <label htmlFor=\"nweet_heart\">{nweet.heartCnt}</label>\r\n        </div>\r\n        <div className=\"base\">\r\n            <button className=\"iconBtn\" id=\"nweet_comment\">\r\n                <FontAwesomeIcon icon={faComment} />\r\n            </button>\r\n            <label htmlFor=\"nweet_comment\">{nweet.commentCnt}</label>\r\n        </div>\r\n        <div className=\"base\">\r\n            <button className=\"iconBtn\" id=\"nweet_retweet\">\r\n                <FontAwesomeIcon icon={faRetweet} />\r\n            </button>\r\n            <label htmlFor=\"nweet_retweet\">{nweet.retweetCnt}</label>\r\n        </div>\r\n        <div className=\"base\">\r\n            <button className=\"iconBtn\" id=\"nweet_upload\">\r\n                <FontAwesomeIcon icon={faUpload} />\r\n            </button>\r\n        </div>\r\n      </div>  }\r\n      {/* 댓글 */}\r\n      <Comments creator={creator} userObj={userObj} postId={postId} />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Detail;\r\n","import { dbService, firebaseDB, storageService } from \"fbase\";\r\nimport { useState } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPlus, faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst NweetFactory = ({userObj, isUpdate, updateCancel, nweetObj, toggleEditing}) => {\r\n    const [nweet, setNweet] = useState(nweetObj === undefined ? \"\" : nweetObj.text);\r\n    const [attachment, setAttachment] = useState(\"\");\r\n\r\n    const onSubmit = async (event) => {\r\n        event.preventDefault();\r\n        if(nweet === \"\" || !userObj) {\r\n            return;\r\n        }\r\n        const _nweet = nweet;\r\n        const _attachment = attachment;\r\n        setNweet(\"\");\r\n        setAttachment(\"\");  \r\n\r\n        let attachmentUrl = \"\";\r\n        \r\n        if(_attachment !== \"\"){\r\n            const attachmentRef =  storageService\r\n            .ref()\r\n            .child(`${userObj.uid}/${uuidv4()}`);\r\n            const response = await attachmentRef.putString(_attachment, \"data_url\");\r\n            attachmentUrl = await response.ref.getDownloadURL();\r\n        }\r\n        console.log(nweetObj)\r\n        if(nweetObj && attachmentUrl !== \"\" && nweetObj.attachmentUrl !== \"\") {\r\n            await storageService.refFromURL(nweetObj.attachmentUrl).delete();\r\n        }\r\n\r\n        if(!isUpdate){\r\n            firebaseDB.ref(\"/posts\").push({\r\n                text:_nweet,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                creatorName: userObj.displayName,\r\n                creatorEmail: userObj.email,\r\n                attachmentUrl,\r\n                heartCnt: 0,\r\n                commentCnt: 0,\r\n                retweetCnt:0\r\n            });\r\n        } else {\r\n            firebaseDB.ref(\"/posts/\"+ nweetObj.key).update({\r\n                text:_nweet,\r\n                attachmentUrl: (nweetObj && nweetObj.attachmentUrl && attachmentUrl === \"\" ? nweetObj.attachmentUrl : attachmentUrl)\r\n            });\r\n\r\n            toggleEditing();\r\n        }\r\n    }\r\n\r\n    const onChange = (event) => {\r\n        event.preventDefault();\r\n        const { target : {value },} = event;\r\n            setNweet(value);\r\n    }\r\n\r\n    const onClearAttachment = () => {setAttachment(\"\")}\r\n\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            setAttachment(result);\r\n        }\r\n\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={onSubmit} className=\"factoryForm base\">\r\n            <div className=\"factoryInput_profile base\">\r\n                <img src={userObj && userObj.photoURL !== \"\" ? userObj.photoURL : PImg} alt=\"profile_image\" /> \r\n            </div>\r\n            <div className=\"factoryInput__container base\">\r\n                <div className=\"factoryInput_text\">\r\n                    <input \r\n                        className=\"factoryInput__input\"\r\n                        value={nweet}\r\n                        onChange={onChange}\r\n                        type=\"text\"\r\n                        placeholder=\"What's happening\"\r\n                        maxLength={120}\r\n                    />\r\n                </div>\r\n                { attachment && \r\n                    (<div className=\"factoryForm__attachment base\">\r\n                        <img src={attachment} style={{backgroundImage: attachment,}} alt=\"attachment\" />\r\n                        <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\r\n                            {/* <span>Remove</span> */}\r\n                            <FontAwesomeIcon icon={faTimesCircle} />\r\n                        </div>\r\n                    </div>\r\n                    )}\r\n                <div className={`factoryInput_button base ${isUpdate ? 'update' : ''}`}>\r\n                    <input type=\"submit\" value={isUpdate ? 'Update' : 'Tweet'} className=\"factoryInput__arrow\" aria-disabled={nweet === \"\" || !userObj} />\r\n                    { isUpdate && \r\n                    <input type=\"button\" value=\"Cancel\" className=\"cancelBtn factoryInput__arrow mgr120\" onClick={updateCancel} />\r\n                    }\r\n                    \r\n                    <input id=\"attach-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n                    <label htmlFor=\"attach-file\" className=\"factoryInput__label\">\r\n                        <span>Add photos</span>\r\n                        <FontAwesomeIcon icon={faPlus} />\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            \r\n        </form>\r\n    )\r\n};\r\n\r\nexport default NweetFactory; ","import { dbService, firebaseDB, storageService} from \"fbase\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faComment, faHeart } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { faTrash, faPencilAlt, faHeart as faHeart2, faUpload, faRetweet} from \"@fortawesome/free-solid-svg-icons\";\r\nimport PImg from '../img/default_profile_normal.png';\r\nimport Moment from 'react-moment';\r\nimport { Link, NavLink, useHistory } from \"react-router-dom\";\r\nimport NweetFactory from \"./NweetFactory\";\r\n\r\nconst Nweet = ({nweet_key, nweetObj, isOwner, userObj, viewRef }) => {\r\n    const [editing, setEditing] = useState(false);\r\n    const [creator, setCreator] = useState(null)\r\n    const [isHeart, setIsHeart] = useState(false);\r\n\r\n    const onDeleteClick = async (event) =>{\r\n        event.preventDefault();\r\n        const ok = window.confirm(\"삭제 ㄱ?\");\r\n\r\n        if(ok) {\r\n            firebaseDB.ref(`/posts/${nweetObj.key}`).remove();\r\n\r\n            if(nweetObj.attachmentUrl !== \"\") {\r\n                await storageService.refFromURL(nweetObj.attachmentUrl).delete();\r\n            }\r\n        }\r\n    }\r\n\r\n    const toggleEditing = (event) => {\r\n        if(event !== undefined){\r\n            event.preventDefault();\r\n            const {target:{parentNode}} = event;\r\n            const updateElement = document.getElementsByClassName('update');\r\n\r\n            if(updateElement.length !== 0 && parentNode.classList[2] !== \"update\"){\r\n                document.getElementsByClassName('cancelBtn')[0].click();\r\n            }\r\n        }\r\n        setEditing( (prev) => !prev)\r\n    };\r\n    const heartClick = (event) => {\r\n        event.preventDefault();\r\n        firebaseDB.ref('hearts')\r\n        .orderByChild('value')\r\n        .equalTo(userObj.uid+nweetObj.key)\r\n        .once('value', snapshot => {\r\n            if(snapshot.exists()){ // 이미 누른적 있는경우\r\n                const hearts = snapshot.val();\r\n                Object.keys(hearts).forEach((heart) => {\r\n                    firebaseDB.ref('hearts/' + heart).update({\r\n                        isHeart: !hearts[heart].isHeart\r\n                    })\r\n                })                \r\n            } else {\r\n                firebaseDB.ref('hearts').push({\r\n                    value:userObj.uid + nweetObj.key,\r\n                    isHeart: true\r\n                });\r\n            }\r\n            const _heartCnt = isHeart ? nweetObj.heartCnt - 1 : nweetObj.heartCnt + 1;\r\n            firebaseDB.ref('posts/' + nweetObj.key).update({\r\n                heartCnt: _heartCnt\r\n            })\r\n            setIsHeart(!isHeart)\r\n        });        \r\n    }\r\n\r\n    useEffect( () => {\r\n        if(nweetObj){\r\n            firebaseDB.ref('users')\r\n            .orderByChild('uid')\r\n            .startAt(nweetObj.creatorId)\r\n            .endAt(nweetObj.creatorId+\"\\uf8ff\")\r\n            .once('value', snapshot => {\r\n                const user = snapshot.val();\r\n                setCreator(user[Object.keys(user)[0]] );\r\n            });\r\n        }\r\n    }, [nweetObj])\r\n\r\n    useEffect( () => {\r\n        if(userObj && nweetObj){\r\n            firebaseDB.ref('hearts')\r\n            .orderByChild('value')\r\n            .equalTo(userObj.uid+nweetObj.key)\r\n            .once('value', snapshot => {    \r\n                if(snapshot.exists()){\r\n                    const hearts = snapshot.val();\r\n                    Object.keys(hearts).forEach((heart) => {\r\n                        setIsHeart(hearts[heart].isHeart)\r\n                    })\r\n                }\r\n            });\r\n        }\r\n    }, [nweetObj, userObj])\r\n\r\n    return (\r\n        \r\n        <div className={`nweet ${editing ? 'update' : ''}`} ref={viewRef} >\r\n            {editing ? (\r\n                <>\r\n                <NweetFactory userObj={userObj} isUpdate={true} updateCancel={toggleEditing}\r\n                nweetObj={nweetObj} toggleEditing={toggleEditing} />\r\n                </>\r\n            ) :\r\n            <NavLink to={`/nweet/${nweetObj.key}`}>\r\n                <div className=\"nweet_container base\" >\r\n                    <div className=\"nweet_profile base\">\r\n                        { creator && \r\n                        <Link to={`/search/${creator.uid}`}>\r\n                            <img src={creator !== null ? (creator.photoURL !== \"\" ? creator.photoURL : PImg)  : \"\"} \r\n                            alt=\"profile_image\" /> \r\n                        </Link>\r\n                        }  \r\n                    </div>\r\n                    <div className=\"nweet_content base\">\r\n                        { creator && \r\n                        <div className=\"nweet_profile_name_container base\">\r\n                            <Link to={`/search/${creator.uid}`} className=\"profile_displayName\">{creator.displayName}</Link>\r\n                            <Moment fromNow className=\"fromNow\">{nweetObj.createdAt}</Moment>\r\n                            {\r\n                                isOwner && (\r\n                                    <div className=\"nweet__actions\">\r\n                                        <span onClick={onDeleteClick}>\r\n                                            <FontAwesomeIcon icon={faTrash} />\r\n                                        </span>\r\n                                        <span onClick={toggleEditing}>\r\n                                            <FontAwesomeIcon icon={faPencilAlt} />\r\n                                        </span>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </div>}\r\n                        <div className=\"nweet_content_box base\">\r\n                            <span>{nweetObj.text}</span>\r\n                            {\r\n                                nweetObj.attachmentUrl && (\r\n                                    <img src={nweetObj.attachmentUrl} alt=\"nweet_attachment\" /> \r\n                                )\r\n                            }\r\n                            <div className=\"nweet_btn_wrap base\">\r\n                                <div className={`base heart${isHeart ? \" active\" : \"\"}`} onClick={heartClick}>\r\n                                    <button className=\"iconBtn\" id=\"nweet_heart\">\r\n                                        { isHeart ? <FontAwesomeIcon icon={faHeart2} /> : <FontAwesomeIcon icon={faHeart} /> }\r\n                                    </button>\r\n                                    <label htmlFor=\"nweet_heart\">{nweetObj.heartCnt}</label>\r\n                                </div>\r\n                                <div className=\"base\">\r\n                                    <button className=\"iconBtn\" id=\"nweet_comment\">\r\n                                        <FontAwesomeIcon icon={faComment} />\r\n                                    </button>\r\n                                    <label htmlFor=\"nweet_comment\">{nweetObj.commentCnt}</label>\r\n                                </div>\r\n                                <div className=\"base\">\r\n                                    <button className=\"iconBtn\" id=\"nweet_retweet\">\r\n                                        <FontAwesomeIcon icon={faRetweet} />\r\n                                    </button>\r\n                                    <label htmlFor=\"nweet_retweet\">{nweetObj.retweetCnt}</label>\r\n                                </div>\r\n                                <div className=\"base\">\r\n                                    <button className=\"iconBtn\" id=\"nweet_upload\">\r\n                                        <FontAwesomeIcon icon={faUpload} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>  \r\n                        </div>\r\n                        \r\n                    </div> \r\n                </div>\r\n            </NavLink>\r\n        }\r\n        </div>\r\n    )\r\n}\r\nexport default Nweet; ","export const reverseObject = (object) => {\r\n    var newObject = {};\r\n    var keys = [];\r\n\r\n    for (var key in object) {\r\n        keys.push(key);\r\n    }\r\n    for (var i = keys.length - 1; i >= 0; i--) {\r\n        var value = object[keys[i]];\r\n        value.key = keys[i];\r\n        const key = keys.length - 1 - i;\r\n        newObject[key] = value;\r\n    }       \r\n\r\n    return newObject;\r\n}\r\n\r\nexport const toArrayObject = (object) => {\r\n    var newObject = [];\r\n    var keys = [];\r\n\r\n    for (var key in object) {\r\n        keys.push(key);\r\n    }\r\n    for (var i = 0; i < keys.length; i++) {\r\n        var value = object[keys[i]];\r\n        value.key = keys[i];\r\n        if(value.isFollow){\r\n            newObject.push(value)\r\n        }        \r\n    }\r\n\r\n    return newObject;\r\n}","import Nweet from \"components/Nweet\";\r\nimport NweetFactory from \"components/NweetFactory\";\r\nimport { dbService, firebaseDB } from \"fbase\";\r\nimport { reverseObject } from \"helpers/help\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Home = ({match, userObj}) => {\r\n  const [nweets, setNweets] = useState({});\r\n  const [ref, inView] = useInView()\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false)\r\n  \r\n  const getNweets = useCallback(async () => {\r\n    setLoading(true)\r\n    const ref = firebaseDB.ref('posts');\r\n    ref\r\n    .orderByChild('createdAt')\r\n    .limitToLast(10 * page)\r\n    .on('value', (snapshot) => {        \r\n      setNweets(reverseObject(snapshot.val()));\r\n    })\r\n\r\n    setLoading(false);\r\n  }, [page] );\r\n\r\n  useEffect(() => {\r\n    getNweets();\r\n  }, [getNweets]);\r\n\r\n  useEffect( () => {\r\n    console.log(inView)\r\n    if (inView && !loading) {\r\n      setPage(page => page + 1)\r\n    }\r\n  }, [inView, loading])\r\n\r\n  return (\r\n    <div>\r\n      <NweetFactory userObj={userObj}  />\r\n      <div className={`base ${nweets ? \"postList\" : \"noPostList\"}`}> \r\n        {\r\n          nweets ?\r\n          Object.keys(nweets).map((nweet) => {\r\n            return (\r\n              <Nweet key={nweet} nweet_key={nweet} nweetObj={nweets[nweet]} \r\n              userObj={userObj} viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null} />\r\n            )\r\n          })\r\n          : <span>글이 없습니다</span>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Home;\r\n","import { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport CoverImgModal from \"./CoverImgModal\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport React, { useRef, useState } from \"react\";\r\n\r\nconst CoverImgEditModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal, prevCover}) => {\r\n\r\n    const [crop, setCrop] = useState({\r\n        unit: \"px\",\r\n        width: 500,\r\n        height: 200,\r\n        aspect: 16 / 9\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const imageRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [croppedImageUrl, setCroppedImageUrl] = useState(\"\");\r\n    const [fileUrl, setFileUrl] = useState(\"\");\r\n\r\n    const onImageLoaded = (image) => {\r\n        imageRef.current = image;\r\n    };\r\n\r\n    const onChange = (_crop) => {\r\n        setCrop(_crop);\r\n        console.log(_crop)\r\n        if(imageRef.current !== null) {\r\n            const y_val = (_crop.y - 25) + \"px\";\r\n            imageRef.current.style.bottom = y_val;\r\n        }  \r\n    }\r\n\r\n    const onCropComplete = (crop) => {\r\n        setCompletedCrop(crop)\r\n        makeClineCrop(crop);        \r\n    }\r\n\r\n    const makeClineCrop = async (crop)  =>{\r\n        if (imageRef && crop.width && crop.height) {\r\n            const croppedImageUrl = await getCroppedImg();\r\n            setCroppedImageUrl(croppedImageUrl);\r\n            setProfileImg(croppedImageUrl);\r\n        }\r\n    }\r\n\r\n    const getCroppedImg = () =>{\r\n        if (!completedCrop || !previewCanvasRef.current || !imageRef.current) {\r\n            return;\r\n        }\r\n        const image = imageRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n    \r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext('2d');\r\n        const pixelRatio = window.devicePixelRatio;\r\n    \r\n        canvas.width = 500;\r\n        canvas.height = 200;\r\n        canvas.style.width = \"500px\";\r\n        canvas.style.height = \"200px\";\r\n    \r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = 'high';\r\n    \r\n        ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            500,\r\n            200\r\n        ); \r\n\r\n        console.log(\"cap\")\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob(\r\n                (blob) => {\r\n                    if (!blob) {\r\n                        console.error('Canvas is empty');\r\n                        return;\r\n                    }\r\n                    blob.name = \"newFile.jpeg\";\r\n                    window.URL.revokeObjectURL(fileUrl);\r\n                    setFileUrl(window.URL.createObjectURL(blob));\r\n                    resolve(fileUrl);\r\n                },\r\n                'image/jpeg',\r\n                1\r\n            );\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile_modal base profile_edit_modal\">\r\n            <div className=\"profile_edit_nav base\">\r\n                <button className=\"cancelBtn\" onClick={() => {\r\n                    setModalNum(1);\r\n                    setModalContent(\r\n                        <CoverImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={profileImg}\r\n                            coverImg={prevCover}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                    />);\r\n                }} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <span>미디어 편집</span>\r\n                <div>\r\n                    <button className=\"okBtn\" aria-disabled={fileUrl === \"\"} onClick={() => {\r\n                        if(fileUrl === \"\") return;\r\n                        setModalNum(3);\r\n                        setModalContent(\r\n                            <CoverImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={profileImg}\r\n                            coverImg={fileUrl}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                        />);\r\n                    }} >적용하기</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"img_preview base center \">\r\n                {coverImg && (\r\n                \r\n                <ReactCrop\r\n                    src={coverImg}\r\n                    crop={crop}\r\n                    ruleOfThirds\r\n                    onImageLoaded={(i) => onImageLoaded(i)}\r\n                    onChange={(c, pc) => onChange(c)}\r\n                    onCropChange\r\n                    onComplete={(c, pc) => onCropComplete(c)}\r\n                    locked={true}\r\n                    className=\"cover_crop\"\r\n                />\r\n                )}\r\n                {coverImg && (\r\n                    <div>\r\n                    <canvas\r\n                      ref={previewCanvasRef}\r\n                      style={{\r\n                        width: Math.round(completedCrop?.width ?? 0),\r\n                        height: Math.round(completedCrop?.height ?? 0)\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default CoverImgEditModal;","import { faArrowLeft, faCamera } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB, storageService } from \"fbase\";\r\nimport { useHistory } from \"react-router\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport CoverImgEditModal from \"./CoverImgEditModal\";\r\nimport ProfileImgModal from \"./ProfileImgModal\";\r\n\r\n\r\nconst CoverImgModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal}) => {\r\n    const history = useHistory();\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        \r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            const prevCover = coverImg;\r\n            setCoverImg(result);\r\n            setModalContent(\r\n                <CoverImgEditModal\r\n                    setModalContent={setModalContent} \r\n                    userObj={userObj}\r\n                    setModalNum={setModalNum}\r\n                    profileImg={profileImg}\r\n                    coverImg={result}\r\n                    prevCover={prevCover}\r\n                    openModal={openModal}\r\n                    setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                />\r\n            );\r\n        }\r\n\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n\r\n    const uploadToStorage = async (isProfile, imageURL, ref) => {\r\n        await getFileBlob(imageURL, ref, blob =>{\r\n            ref.put(blob).then(async function(snapshot) {\r\n\r\n               const downURL = await snapshot.ref.getDownloadURL();\r\n\r\n               if(isProfile){   \r\n                   console.log(\"profile\")\r\n                    await userObj.updateProfile({\r\n                        photoURL: downURL\r\n                    });\r\n                    firebaseDB.ref('users/' + userObj.userId).update({\r\n                        photoURL: downURL  \r\n                    }).then(function(){\r\n                        history.go(0);\r\n                    });\r\n                } else {\r\n                    console.log(\"cover\")\r\n                    firebaseDB.ref('users/' + userObj.userId).update({\r\n                        coverURL: downURL  \r\n                    }).then(function(){\r\n                        if(profileImg === \"\"){\r\n                            history.go(0);\r\n                        }                        \r\n                    });\r\n                }\r\n            });\r\n        })\r\n   }\r\n\r\n    const getFileBlob = function (url,ref, cb) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"GET\", url);\r\n        xhr.responseType = \"blob\";\r\n        xhr.addEventListener('load', function() {\r\n            console.log(\"load\")\r\n            cb(xhr.response, ref);\r\n        });\r\n        xhr.send();\r\n    };\r\n    const profileUpdate = async (event) => {\r\n        event.preventDefault();\r\n\r\n        if(profileImg !== \"\"){\r\n            \r\n            const attachmentRef =  storageService\r\n            .ref();\r\n\r\n            if(userObj.coverURL !== \"\"){\r\n                const startNum = userObj.photoURL.lastIndexOf('%2F')+3;\r\n                attachmentRef.child(`${userObj.uid}/profile/${userObj.photoURL.substr(startNum,36)}`).delete();\r\n            }\r\n            const uploadRef = attachmentRef.child(`${userObj.uid}/profile/${uuidv4()}`);\r\n            await uploadToStorage(true, profileImg, uploadRef);\r\n        }\r\n        if(coverImg !== \"\"){\r\n            const attachmentRef =  storageService\r\n            .ref();\r\n            \r\n            if(userObj.coverURL !== \"\"){\r\n                const startNum = userObj.coverURL.lastIndexOf('%2F')+3;\r\n                attachmentRef.child(`${userObj.uid}/cover/${userObj.coverURL.substr(startNum,36)}`).delete();\r\n            }\r\n            const uploadRef = attachmentRef.child(`${userObj.uid}/cover/${uuidv4()}`);\r\n            await uploadToStorage(false, coverImg, uploadRef);\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <div className=\"cover_modal base\">\r\n            <div className=\"profile_edit_nav base\">\r\n                <button className=\"cancelBtn\" onClick={() => {\r\n                        setModalNum(1);\r\n                        setModalContent(\r\n                            <ProfileImgModal \r\n                                setModalContent={setModalContent} \r\n                                userObj={userObj}\r\n                                setModalNum={setModalNum}\r\n                                profileImg={profileImg}\r\n                                coverImg={coverImg}\r\n                                openModal={openModal}\r\n                                setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                        />);\r\n                    }} >\r\n                        <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                    </button>\r\n                    <span>미디어 편집</span>\r\n                    <div>\r\n                        <button className=\"okBtn\" onClick={(event) => profileUpdate(event)} >Save</button>\r\n                    </div>\r\n            </div>\r\n\r\n            <div className=\"base\">\r\n                <div className=\"img_preview base center \">\r\n                    {coverImg !== \"\" && (<img className=\"main_img\" src={coverImg} alt=\"cover_img\" />) }\r\n                    <div className=\"profile_img_back\"></div>\r\n                    <label htmlFor=\"cover-file\">\r\n                        <FontAwesomeIcon icon={faCamera} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                    </label>\r\n                </div>\r\n                <div className=\"base sub_img_container\">\r\n                    <img className=\"sub_img\" src={profileImg === \"\" ? userObj.photoURL : profileImg} alt=\"profile_image\" /> \r\n                    <span className=\"profile_name\">{userObj.displayName}</span>\r\n                    <span className=\"user_id\">{userObj.userId}</span>\r\n                </div>\r\n                <input id=\"cover-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CoverImgModal; ","import { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport CoverImgModal from \"./CoverImgModal\";\r\nimport ProfileImgModal from \"./ProfileImgModal\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport React, { useRef, useState } from \"react\";\r\n\r\nconst ProfileImgEditModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal, prevProfile}) => {\r\n    const [crop, setCrop] = useState({\r\n        unit: \"px\",\r\n        width: 500,\r\n        height: 450,\r\n        aspect: 16 / 9\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const imageRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [croppedImageUrl, setCroppedImageUrl] = useState(\"\");\r\n    const [fileUrl, setFileUrl] = useState(\"\");\r\n\r\n    const [imgForm, setImgForm] = useState(0);\r\n\r\n    const onImageLoaded = (image) => {\r\n        imageRef.current = image;\r\n        if(imageRef.current !== null) {\r\n            const h = imageRef.current.clientHeight;\r\n            const w = imageRef.current.clientWidth;\r\n            \r\n            if(w < h){\r\n                setCrop({\r\n                    width: 500,\r\n                    height: 450,\r\n                    aspect: 16 / 9\r\n                });\r\n            } else {\r\n                setCrop({\r\n                    width: 450,\r\n                    height: 500,\r\n                    aspect: 9 / 16\r\n                });\r\n                imageRef.current.style.left = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    const onChange = (_crop, percent_crop) => {\r\n        setCrop(_crop);\r\n        if(imageRef.current !== null) {\r\n            const h = imageRef.current.clientHeight;\r\n            const w = imageRef.current.clientWidth;\r\n            \r\n            if(w < h){\r\n                setImgForm(1)\r\n                if(_crop.y > h-450) _crop.y = h-450;\r\n                const y_val = (_crop.y - 25) + \"px\";\r\n                imageRef.current.style.bottom = y_val;\r\n            } else if(w > h){ //옆으로 긴거\r\n                setImgForm(2)\r\n                let x_val = (_crop.x - 365)\r\n                if(x_val > 0) x_val = 0\r\n                if(x_val < h-w-25) x_val = h-w-25\r\n                imageRef.current.style.left = x_val + \"px\";;\r\n            } else {}\r\n        }  \r\n    }\r\n\r\n    const onCropComplete = (crop, percent_crop) => {\r\n        setCompletedCrop(crop)\r\n        makeClineCrop(crop);        \r\n    }\r\n\r\n    const makeClineCrop = async (crop)  =>{\r\n        if (imageRef && crop.width && crop.height) {\r\n            const croppedImageUrl = await getCroppedImg();\r\n            setCroppedImageUrl(croppedImageUrl);\r\n            setProfileImg(croppedImageUrl);\r\n        }\r\n    }\r\n\r\n    const getCroppedImg = () =>{\r\n        if (!completedCrop || !previewCanvasRef.current || !imageRef.current) {\r\n            return;\r\n        }\r\n\r\n        const h = imageRef.current.clientHeight;\r\n        const w = imageRef.current.clientWidth;\r\n\r\n        const image = imageRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n    \r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext('2d');\r\n        const pixelRatio = window.devicePixelRatio;\r\n    \r\n        if(w<h){\r\n            canvas.width = 500;\r\n            canvas.height = 450;\r\n            canvas.style.width = \"500px\";\r\n            canvas.style.height = \"450px\";\r\n        } else {\r\n            canvas.width = 450;\r\n            canvas.height = 500;\r\n            canvas.style.width = \"450px\";\r\n            canvas.style.height = \"500px\";\r\n        }\r\n    \r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = 'high';\r\n    \r\n        if(w<h){\r\n            ctx.drawImage(\r\n                image,\r\n                crop.x * scaleX,\r\n                crop.y * scaleY,\r\n                crop.width * scaleX,\r\n                crop.height * scaleY,\r\n                0,\r\n                0,\r\n                500,\r\n                450\r\n            ); \r\n        } else {\r\n            const _x = 385 - (crop.x > 145 ? crop.x : 145);\r\n            console.log(_x + \" : \" + crop.x)\r\n            ctx.drawImage(\r\n                image,\r\n                _x,\r\n                0,\r\n                crop.width * scaleX,\r\n                crop.height * scaleY,\r\n                0,\r\n                0,\r\n                450,\r\n                500\r\n            ); \r\n        }       \r\n        console.log(\"cap\")\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob(\r\n                (blob) => {\r\n                    if (!blob) {\r\n                    //reject(new Error('Canvas is empty'));\r\n                    console.error('Canvas is empty');\r\n                    return;\r\n                    }\r\n                    blob.name = \"newFile.jpeg\";\r\n                    window.URL.revokeObjectURL(fileUrl);\r\n                    setFileUrl(window.URL.createObjectURL(blob));\r\n                    resolve(fileUrl);\r\n                    console.log(fileUrl)\r\n                },\r\n                'image/jpeg',\r\n                1\r\n            );\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile_modal base profile_edit_modal\">\r\n            <div className=\"profile_edit_nav base\">\r\n                <button className=\"cancelBtn\" onClick={() => {\r\n                    setModalNum(1);\r\n                    setModalContent(\r\n                        <ProfileImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={prevProfile}\r\n                            coverImg={coverImg}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                    />);\r\n                }} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <span>미디어 편집</span>\r\n                <div>\r\n                    <button className=\"okBtn\" aria-disabled={fileUrl === \"\"} onClick={() => {\r\n                        if(fileUrl === \"\")return;\r\n                        setModalNum(3);\r\n                        setModalContent(\r\n                            <CoverImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={fileUrl}\r\n                            coverImg={coverImg}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                        />);\r\n                    }} >적용하기</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"img_preview base center \">\r\n                {profileImg && (\r\n                <ReactCrop\r\n                    src={profileImg}\r\n                    crop={crop}\r\n                    ruleOfThirds\r\n                    onImageLoaded={(i) => onImageLoaded(i)}\r\n                    onChange={(c, pc) => onChange(c, pc)}\r\n                    onCropChange\r\n                    onComplete={(c, pc) => onCropComplete(c, pc)}\r\n                    locked={true}\r\n                    className={imgForm === 1 ? \"rCrop_wBig\" : (imgForm === 2 ? \"rCrop_hBig\" : \"rCrop_square\")}\r\n                />\r\n                )}\r\n                {profileImg && (\r\n                    <div>\r\n                    <canvas\r\n                      ref={previewCanvasRef}\r\n                      style={{\r\n                        width: Math.round(completedCrop?.width ?? 0),\r\n                        height: Math.round(completedCrop?.height ?? 0)\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ProfileImgEditModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport CoverImgModal from \"./CoverImgModal\";\r\nimport ProfileImgEditModal from \"./ProfileImgEditModal\";\r\n\r\nconst ProfileImgModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal}) => {\r\n\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        \r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            const prevProfile = profileImg;\r\n\r\n            setProfileImg(result);\r\n            setModalContent(\r\n                <ProfileImgEditModal\r\n                    setModalContent={setModalContent} \r\n                    userObj={userObj}\r\n                    setModalNum={setModalNum}\r\n                    profileImg={result}\r\n                    coverImg={coverImg}\r\n                    prevProfile={prevProfile}\r\n                    openModal={openModal}\r\n                    setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                />\r\n            );\r\n        }\r\n\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n    \r\n    return (\r\n        <div className=\"profile_modal base\">\r\n            <div className=\"base center\">\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"base\">\r\n                <span className=\"text1\">\r\n                    Prick a profile picture\r\n                </span>\r\n            </div>\r\n            <div className=\"base\">\r\n                <span className=\"text2\">\r\n                    Have a favorite selfie? Upload it now.\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"img_preview base center \">\r\n                <img className=\"main_img\" src={profileImg === \"\" ? userObj.photoURL : profileImg} alt=\"profile_image\" /> \r\n                <div className=\"profile_img_back\"></div>\r\n                <label htmlFor=\"profile-file\">\r\n                    <FontAwesomeIcon icon={faCamera} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                </label>\r\n            </div>\r\n\r\n            <button onClick={() => {\r\n                setModalNum(3);\r\n                setModalContent(\r\n                    <CoverImgModal \r\n                    setModalContent={setModalContent} \r\n                    userObj={userObj}\r\n                    setModalNum={setModalNum}\r\n                    profileImg={profileImg}\r\n                    coverImg={coverImg}\r\n                    openModal={openModal}\r\n                    setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                />);\r\n            }} >skip</button>\r\n            <input id=\"profile-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n        </div>\r\n    )\r\n}\r\nexport default ProfileImgModal;","import ProfileImgModal from 'Modal/profile/ProfileImgModal';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ko';\r\nimport React, { useEffect, useState } from 'react';\r\nimport ReactModal from 'react-modal';\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst ProfileEdit = ({userObj}) => {\r\n    const timestamp = userObj !== null ? userObj.timestamp : \"\";\r\n    const email = userObj !== null ? userObj.email : \"\";\r\n    const displayName = userObj !== null ? userObj.displayName : \"\";\r\n    const photoURL = userObj !== null ? userObj.photoURL : \"\";\r\n    const coverURL = userObj !== null ? userObj.coverURL : \"\";\r\n    const followCnt = userObj !== null ? userObj.followCnt : \"\";\r\n    const followingCnt = userObj !== null ? userObj.followingCnt : \"\";\r\n    const introduce = userObj !== null ? userObj.introduce : \"\";\r\n\r\n    const [profileImg, setProfileImg] = useState(\"\");\r\n    const [coverImg, setCoverImg] = useState(\"\");\r\n\r\n    const [isModal, setIsModal] = useState(false);\r\n    const [modalNum, setModalNum] = useState(0);\r\n    const [modalContent, setModalContent] = useState(null);\r\n\r\n    const setProfileModal = (img) =>{\r\n        setProfileImg(img);\r\n        setModalContent(\r\n            <ProfileImgModal\r\n                setModalContent={setModalContent} \r\n                userObj={userObj}\r\n                setModalNum={setModalNum}\r\n                profileImg={img}\r\n                coverImg={coverURL}\r\n                openModal={openModal}\r\n                setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n            />\r\n        );\r\n    }\r\n\r\n    const openModal = (e) => {\r\n        e.preventDefault();\r\n        console.log(isModal)\r\n        if(!isModal)\r\n            setProfileModal(profileImg)\r\n        setIsModal(!isModal);\r\n        setModalNum(isModal ? 0 : 1);\r\n    }\r\n\r\n    const onRequestClose = async () => {\r\n        openModal(); \r\n        setModalNum(0);\r\n        setProfileModal(\"\");        \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"profileEdit_container base\">\r\n                <div className=\"cover_image base\">\r\n                    {\r\n                        coverURL !== \"\" && <img src={coverURL} \r\n                        alt=\"cover_image\" /> \r\n                    }\r\n                </div>\r\n                <div className=\"profile_container base\">\r\n                    <form>\r\n                        <button className=\"edit_profile\" onClick={openModal}>Set up profile</button>\r\n                    </form>\r\n                    <img src={photoURL !== \"\" ? photoURL : PImg } \r\n                        alt=\"profile_image\" /> \r\n                    <span className=\"profile_name\">{displayName}</span>\r\n                    <span className=\"user_id\">{email}</span>\r\n                    <span className=\"tbm10 introduce\">{introduce}</span>\r\n                    <span className=\"join_date\">가입일 {moment(timestamp).format('ll')}</span>\r\n                    <div className=\"follow_wrap\">\r\n                        <span className=\"f_cnt\">{followCnt}</span>\r\n                        <span className=\"f_text\">팔로우 중</span>\r\n                        <span className=\"f_cnt\">{followingCnt}</span>\r\n                        <span className=\"f_text\">팔로워</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <ReactModal \r\n                    shouldCloseOnOverlayClick={true}\r\n                    shouldCloseOnEsc={false}\r\n                    onRequestClose={()=> onRequestClose() }\r\n                    isOpen={isModal}\r\n                    ariaHideApp={false}\r\n                    appElement={document.getElementById('app')}\r\n                    className=\"setProfileModal base\"\r\n                >\r\n                    {modalContent}\r\n                </ReactModal>\r\n            </div>\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default ProfileEdit; ","import Nweet from \"components/Nweet\";\r\nimport ProfileEdit from \"components/ProfileEdit\";\r\nimport { dbService, firebaseDB } from \"fbase\";\r\nimport { reverseObject } from \"helpers/help\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { useHistory, withRouter } from 'react-router-dom';\r\n\r\nconst Profile = ({userObj, refreshUser}) => {\r\n    const [nweets, setNweets] = useState([]);\r\n    const [ref, inView] = useInView()\r\n    const [page, setPage] = useState(1);\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const history = useHistory();\r\n\r\n    const getMyNweets = useCallback(async () => {\r\n        if(userObj) {\r\n            const ref = firebaseDB.ref('posts');\r\n            ref\r\n            .orderByChild('creatorId')\r\n            .equalTo(userObj.uid)\r\n            .limitToLast(10 * page)\r\n            .on('value', (snapshot) => {\r\n                setNweets(reverseObject(snapshot.val()));\r\n            })\r\n        }\r\n    }, [userObj,page]);\r\n\r\n    useEffect(()=> {\r\n        // console.log(userObj)\r\n        if(!userObj){\r\n            console.log(\"유저정보없음\")\r\n            history.goBack()\r\n        }\r\n    }, [userObj, history])\r\n\r\n    useEffect(()=> {\r\n        getMyNweets();\r\n    }, [getMyNweets]);\r\n    useEffect(()=> {\r\n        if(userObj){\r\n            refreshUser();\r\n        }\r\n    }, [refreshUser, userObj]);\r\n\r\n    useEffect( () => {\r\n        if (inView && !loading) {\r\n            setPage(page => page + 1)\r\n        }\r\n    }, [inView, loading])\r\n    \r\n    return (\r\n        <div>\r\n            <ProfileEdit userObj={userObj} />\r\n            <div className=\"base\">\r\n                {\r\n                    nweets && Object.keys(nweets).map((nweet) => {\r\n                        return (<Nweet key={nweet} nweetObj={nweets[nweet]} userObj={userObj}\r\n                            isOwner={nweets[nweet].creatorId === userObj.uid} \r\n                            viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null}/>\r\n                            )\r\n                        }\r\n                    )\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Profile);","import Nweet from \"components/Nweet\";\r\nimport { firebaseDB,  } from \"fbase\";\r\nimport { reverseObject } from \"helpers/help\";\r\nimport moment from \"moment\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst Search = withRouter(({match, userObj, refreshUser}) => {\r\n  const [nweets, setNweets] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const uid = match.params.key1;\r\n\r\n  const [ref, inView] = useInView()\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false)\r\n  const [isFollow, setIsFollow] = useState(false);\r\n\r\n  const [followCnt, setfollowCnt] = useState(0);\r\n  const [followingCnt, setfollowingCnt] = useState(0);\r\n  const [loginfollowCnt, setLoginfollowCnt] = useState(0);\r\n  \r\n  const getNweets = useCallback(async () => {\r\n    setLoading(true)\r\n    const ref = firebaseDB.ref('posts');\r\n    ref\r\n    .orderByChild('creatorId')\r\n    .startAt(uid)\r\n    .endAt(uid+\"\\uf8ff\")\r\n    .limitToLast(10 * page)\r\n    .on('value', (snapshot) => {        \r\n      setNweets(reverseObject(snapshot.val()));\r\n    })\r\n\r\n    setLoading(false);\r\n  }, [page, uid] );\r\n\r\n  const followClick = (event) => {\r\n    event.preventDefault();\r\n    firebaseDB.ref('follows')\r\n    .orderByChild('value')\r\n    .equalTo(userObj.uid+uid)\r\n    .once('value', snapshot => {\r\n        if(snapshot.exists()){ // 이미 누른적 있는경우\r\n            const follows = snapshot.val();\r\n            Object.keys(follows).forEach((follow) => {\r\n              firebaseDB.ref('follows/' + follow).update({\r\n                  isFollow: !follows[follow].isFollow\r\n              })\r\n            })                \r\n        } else {\r\n            firebaseDB.ref('follows').push({\r\n                value: userObj.uid + uid,\r\n                isFollow: true,\r\n                from:userObj.uid,\r\n                to:uid\r\n            });\r\n        }\r\n        const _followCnt = loginfollowCnt + (snapshot.exists() && isFollow ? -1 : 1)\r\n        const _followingCnt = followingCnt + (snapshot.exists() && isFollow ? -1 : 1)\r\n\r\n        console.log(loginfollowCnt)\r\n        console.log(_followCnt)\r\n        firebaseDB.ref('users/' + userObj.userId).update({\r\n            followCnt: _followCnt\r\n        })\r\n        firebaseDB.ref('users/' + userId).update({\r\n          followingCnt: _followingCnt\r\n        })\r\n        setfollowingCnt(_followingCnt)\r\n        setLoginfollowCnt(_followCnt)\r\n        setIsFollow(!isFollow)\r\n\r\n        refreshUser();\r\n    });  \r\n  }\r\n\r\n  const getFollow = useCallback(() => {\r\n    if(userObj !== null && uid){  \r\n      firebaseDB.ref('follows')\r\n      .orderByChild('value')\r\n      .equalTo(userObj.uid+uid)\r\n      .once('value', snapshot => {\r\n          if(snapshot.exists()){ // 이미 누른적 있는경우\r\n              const follows = snapshot.val();\r\n              Object.keys(follows).forEach((follow) => {\r\n                setIsFollow(follows[follow].isFollow)\r\n              })                \r\n          }        \r\n      });  \r\n    }\r\n  }, [uid, userObj]);\r\n\r\n  useEffect(() => {\r\n    getFollow();\r\n  }, [getFollow]);\r\n\r\n  useEffect(() => {\r\n    getNweets();\r\n  }, [getNweets]);\r\n\r\n  useEffect( () => {\r\n    if (inView && !loading) {\r\n      setPage(page => page + 1)\r\n    }\r\n  }, [inView, loading])\r\n  useEffect(()=>{\r\n    if(userObj !== null){\r\n      setLoginfollowCnt(userObj.followCnt);\r\n    }\r\n  }, [userObj])\r\n\r\n  useEffect( () =>{\r\n    const userRef = firebaseDB.ref('users');\r\n    userRef\r\n    .orderByChild('uid')\r\n    .equalTo(uid)\r\n    .once('value')\r\n    .then(c => {\r\n      const user = c.val()        \r\n      const userId = Object.keys(user)[0];\r\n      console.log(user[userId])\r\n      setUserId(userId);\r\n      setUser(user[userId] );\r\n\r\n      setfollowCnt(user[userId].followCnt)\r\n      setfollowingCnt(user[userId].followingCnt)\r\n    });       \r\n  }, [uid]);\r\n\r\n  return (\r\n    <div className=\"profileEdit_container base\">\r\n      { user && (\r\n        <>\r\n        <div className=\"cover_image base\">\r\n            {\r\n                user.coverURL !== \"\" && <img src={user.coverURL} alt=\"cover_image\" /> \r\n            }\r\n        </div>\r\n        <div className=\"profile_container base\">\r\n        <img src={user.photoURL !== \"\" ? user.photoURL : PImg } \r\n                        alt=\"profile_image\" /> \r\n            <span className=\"profile_name\">{user.displayName}</span>\r\n            <span className=\"user_id\">{user.email}</span>\r\n            <span className=\"join_date\">가입일 {moment(user.timestamp).format('ll')}</span>\r\n            <div className=\"follow_wrap\">\r\n                <span className=\"f_cnt\">{followCnt}</span>\r\n                <span className=\"f_text\">팔로우 중</span>\r\n                <span className=\"f_cnt\">{followingCnt}</span>\r\n                <span className=\"f_text\">팔로워</span>\r\n            </div>\r\n            { userObj && userObj.uid !== uid &&\r\n            <button className={`followBtn${isFollow ? ' active' : ''}`} onClick={followClick} >\r\n              {isFollow ? '팔로잉' : '팔로우'}\r\n            </button>\r\n            }\r\n        </div>\r\n        <div> \r\n        {  \r\n          Object.keys(nweets).map((nweet) => {\r\n              return (<Nweet key={nweet} nweetObj={nweets[nweet]} \r\n                userObj={userObj} viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null} />)\r\n            }\r\n          )\r\n        }\r\n        </div>\r\n      </>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Search;\r\n","import { authService } from \"fbase\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nfunction Verify({match}) {\r\n  const uid = match.params.key1;\r\n  const user = authService.currentUser;\r\n\r\n  const is_verfied = ( user && user.uid === uid && user.emailVerified);\r\n  console.log(user)\r\n  return (\r\n    <div className=\"verify base\">\r\n      { is_verfied ? \r\n      <span>{user.email}님 이메일 인증이 완료되었습니다.</span> : \r\n      <span>이메일 인증에 문제가 있습니다.</span>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Verify;\r\n","import { Link, useHistory } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faCog, faHome, faHashtag, faUser } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { authService } from \"fbase\";\r\n\r\nconst LeftMenu = ({userObj, logout}) => {\r\n    const history = useHistory();\r\n    \r\n    const onLogoutClick = () => {\r\n        logout();\r\n        authService.signOut();\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <div className=\"header_main\">\r\n                <div className=\"header_container\">\r\n                    <nav>\r\n                        <Link to=\"/\" style={{marginRight: 10}}>\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            </div>\r\n                        </Link>\r\n                        { !userObj && (\r\n                        <Link to=\"/login\">\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faHome} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            <span style={{marginTop: 10}}>\r\n                            login\r\n                            </span>\r\n                            </div>\r\n                        </Link>\r\n                        )}\r\n                        <Link to=\"/follow\">\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faHashtag} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            <span style={{marginTop: 10}}>\r\n                            Follow\r\n                            </span>\r\n                            </div>\r\n                        </Link>\r\n                        <Link to=\"/setting\">\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faCog} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            <span style={{marginTop: 10}}>\r\n                            Setting\r\n                            </span>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        { userObj && (\r\n                            <Link to=\"/profile\">\r\n                                <div className=\"header_content\">\r\n                                <FontAwesomeIcon icon={faUser} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                                <span style={{marginTop: 10}}>\r\n                                Profile\r\n                                </span>\r\n                                </div>\r\n                            </Link>\r\n                        )}\r\n                        { userObj && (\r\n                            <span className=\"logOutBtn\" onClick={onLogoutClick}>\r\n                                Log Out\r\n                            </span>\r\n                        )}\r\n                    </nav>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default LeftMenu;","import { authService, firebaseDB } from \"fbase\";\r\n\r\nexport const isEmail = email => {\r\n    const emailRegex = /^(([^<>()\\[\\].,;:\\s@\"]+(\\.[^<>()\\[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\r\n  \r\n    return emailRegex.test(email);\r\n};\r\n\r\nexport const sendEmail = () => {\r\n    console.log(\"send\")\r\n    const user = authService.currentUser;\r\n    const url = \"http://localhost:3000/nwitter#/verify/\" + user.uid;\r\n    const actionCodeSettings = {\r\n        // URL you want to redirect back to. The domain (www.example.com) for this\r\n        // URL must be in the authorized domains list in the Firebase Console.\r\n        url,\r\n        // This must be true.\r\n        handleCodeInApp: true\r\n      };\r\n\r\n\r\n    user.sendEmailVerification(actionCodeSettings)\r\n    .then(() => {\r\n        window.localStorage.setItem('emailForSignIn', user.email);\r\n      })\r\n      .catch((error) => {\r\n        const errorCode = error.code;\r\n        const errorMessage = error.message;\r\n        console.log(errorCode)\r\n        console.log(errorMessage)\r\n      });\r\n    \r\n}\r\nexport const getUser = async (_user, callback) => {\r\n    firebaseDB.ref('users')\r\n    .orderByChild('email')\r\n    .startAt(_user.email)\r\n    .endAt(_user.email+\"\\uf8ff\")\r\n    .once('value', snapshot => {\r\n        if(snapshot.exists() && snapshot.numChildren() === 1){\r\n            const users = snapshot.val();\r\n            Object.keys(users).forEach((user) => {\r\n                callback(users[user], _user, user);\r\n              }\r\n            )        \r\n        }\r\n    });\r\n}\r\n\r\nexport const getUserByUid = async (uid) => {\r\n  firebaseDB.ref('users')\r\n  .orderByChild('uid')\r\n  .equalTo(uid)\r\n  .once('value').then(c => {\r\n    const user = c.val()        \r\n    return(user[Object.keys(user)[0]] );\r\n  });  \r\n}","import { firebaseDB } from \"fbase\";\r\nimport { getUserByUid } from \"helpers/auth\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Navigation = withRouter(({match, location}) => {\r\n    // home verify search\r\n    const url = window.location.href.split(\"/\");\r\n    const path = url[url.length-1];\r\n    const [pathName, setPathName] = useState(\"\");\r\n    const history = useHistory();\r\n    \r\n    useEffect( () => {\r\n        if(url[4] === \"search\"){\r\n            firebaseDB.ref('users')\r\n            .orderByChild('uid')\r\n            .equalTo(path)\r\n            .once('value').then(c => {\r\n                const user = c.val()        \r\n                setPathName(user[Object.keys(user)[0]].displayName );\r\n            });\r\n        } else if(url[4] === \"nweet\"){\r\n            setPathName(\"트윗\")\r\n        } else if(url[4] === \"verify\"){\r\n            setPathName(\"Verify\");\r\n        } else {\r\n            setPathName(path.charAt(0).toUpperCase() + path.slice(1));\r\n        }\r\n    }, [url, path])\r\n\r\n\r\n    return (\r\n        <div className=\"main_nav base\">\r\n            { (url && (url[4] === \"nweet\" || url[4] === \"search\" )) &&\r\n            <button onClick={()=>{history.goBack()}} className=\"iconBtn base center\"><FontAwesomeIcon icon={faArrowLeft} /></button>\r\n            }\r\n            <span className=\"base\">{pathName !== \"\" ? (pathName.indexOf(\"verify\") !== -1 ? \"Verify\" : pathName): \"Home\" }</span>\r\n        </div>\r\n    )\r\n});\r\n\r\nexport default withRouter(Navigation); ","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { authService, firebaseDB, storageService } from \"fbase\";\r\nimport { sendEmail } from \"helpers/auth\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport IntroduceModal from \"./IntroduceModal\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport \"./register.css\";\r\n\r\nconst EmailAuthModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, password, pImg, introduce}) => {\r\n    const goPrev = () => {\r\n        setModalContent(\r\n            <IntroduceModal\r\n                setModalContent={setModalContent}\r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                password={password}\r\n                pImg={pImg}\r\n                _introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const addUser =useCallback((user, downURL) => {\r\n        firebaseDB.ref('users')\r\n        .orderByChild('email')\r\n        .startAt(user.email)\r\n        .endAt(user.email+\"\\uf8ff\")\r\n        .once('value', snapshot => {\r\n            if(!snapshot.exists()){\r\n                console.log(\"회원가입\")\r\n                firebaseDB.ref('users').push({\r\n                    uid: user.uid,\r\n                    timestamp : user.metadata.creationTime ? user.metadata.creationTime : \"\",\r\n                    name: name ? name : \"\",\r\n                    displayName: nickname ? nickname : \"\",\r\n                    email: email ? email : \"\",\r\n                    introduce: introduce ? introduce : \"\",\r\n                    photoURL: downURL ? downURL : \"\",\r\n                    coverURL: \"\",\r\n                    followCnt: 0,\r\n                    followingCnt: 0\r\n                }).then(function(){\r\n                    refreshUser();\r\n                    sendEmail();\r\n                });\r\n            }\r\n        });\r\n    }, [name, nickname, introduce, email, refreshUser]);\r\n\r\n    const uploadToStorage = useCallback(async (user, ref) => {\r\n        if(pImg === undefined){\r\n            addUser(user)\r\n        } else {\r\n            await getFileBlob(pImg, ref, blob =>{\r\n                ref.put(blob).then(async function(snapshot) {\r\n                    const downURL = await snapshot.ref.getDownloadURL();\r\n         \r\n                    await user.updateProfile({\r\n                        photoURL: downURL\r\n                    }).then(function(){\r\n                        addUser(user, downURL)\r\n                    });\r\n        \r\n                });\r\n            })\r\n        }        \r\n    }, [addUser, pImg]);\r\n    \r\n    const getFileBlob = function (url,ref, cb) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"GET\", url);\r\n        xhr.responseType = \"blob\";\r\n        xhr.addEventListener('load', function() {\r\n            console.log(\"load\")\r\n            cb(xhr.response, ref);\r\n        });\r\n        xhr.send();\r\n    };\r\n\r\n    const profileUpdate = useCallback(async () => {\r\n        const user = authService.currentUser;\r\n\r\n        console.log(pImg)\r\n        if(pImg !== \"\"){\r\n            const attachmentRef =  storageService\r\n            .ref();\r\n    \r\n            const uploadRef = attachmentRef.child(`${user.uid}/profile/${uuidv4()}`);\r\n            await uploadToStorage(user, uploadRef);\r\n        }\r\n    },[pImg, uploadToStorage]);\r\n\r\n    const EmailRegister = useCallback(async () =>  {\r\n        await authService.createUserWithEmailAndPassword(email, password).then(async function(){\r\n            await profileUpdate();\r\n        });\r\n    }, [profileUpdate, email, password]);\r\n\r\n    useEffect(()=> {\r\n        // usecallback 다수추가해서 테스트필요\r\n        EmailRegister()\r\n    }, [EmailRegister])\r\n    return (\r\n        <div className=\"register_modal rBase emailAuth\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={goPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase rCenter\">\r\n                <span className=\"text1\">\r\n                    인증 메일이 발송되었습니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase rCenter\">\r\n                <span className=\"text2\">\r\n                    메일함에서({email}) 인증 메일을 확인 바랍니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <button className=\"underInput resendBtn\" onClick={sendEmail}>인증 메일 재발송</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default EmailAuthModal;","import { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useRef, useState } from \"react\";\r\nimport IntroduceModal from \"./IntroduceModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport PImgModal from \"./PImgModal\";\r\n\r\nconst PImgEditModal = ({setModalContent, onRequestClose, email, name, nickname, password, _pImg, refreshUser}) => {\r\n    const [fileUrl, setFileUrl] = useState(\"\");\r\n    const [crop, setCrop] = useState({\r\n        unit: \"px\",\r\n        width: 500,\r\n        height: 450,\r\n        aspect: 16 / 9\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const imageRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [croppedImageUrl, setCroppedImageUrl] = useState(\"\");\r\n\r\n    const isValidation = () => {\r\n        console.log(fileUrl)\r\n        if(fileUrl !== undefined) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const onImageLoaded = (image) => {\r\n        imageRef.current = image;\r\n    };\r\n    const onChange = (_crop) => {\r\n        setCrop(_crop);\r\n        console.log(_crop)\r\n        const h = imageRef.current.clientHeight;\r\n        const w = imageRef.current.clientWidth;\r\n\r\n        if(imageRef.current !== null) {\r\n            let y_val;\r\n            if(w > h){\r\n                y_val =  \"-15px\";\r\n            } else {\r\n                y_val = (_crop.y - 15) + \"px\";\r\n            }\r\n            \r\n            imageRef.current.style.bottom = y_val;\r\n        }  \r\n    }\r\n    const onCropComplete = (crop) => {\r\n        setCompletedCrop(crop)\r\n        makeClineCrop(crop);        \r\n    }\r\n    const makeClineCrop = async (crop)  =>{\r\n        if (imageRef && crop.width && crop.height) {\r\n            const croppedImageUrl = await getCroppedImg();\r\n            setCroppedImageUrl(croppedImageUrl);\r\n        }\r\n    }\r\n    const getCroppedImg = () =>{\r\n        if (!completedCrop || !previewCanvasRef.current || !imageRef.current) {\r\n            return;\r\n        }\r\n\r\n        const image = imageRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n    \r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext('2d');\r\n        const pixelRatio = window.devicePixelRatio;\r\n    \r\n        canvas.width = 500;\r\n        canvas.height = 450;\r\n        canvas.style.width = \"500px\";\r\n        canvas.style.height = \"450px\";\r\n    \r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = 'high';\r\n    \r\n        ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            500,\r\n            450\r\n        ); \r\n\r\n        console.log(\"cap\")\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob(\r\n                (blob) => {\r\n                    if (!blob) {\r\n                        console.error('Canvas is empty');\r\n                        return;\r\n                    }\r\n                    blob.name = \"newFile.jpeg\";\r\n                    window.URL.revokeObjectURL(fileUrl);\r\n                    setFileUrl(window.URL.createObjectURL(blob));\r\n                    resolve(fileUrl);\r\n                },\r\n                'image/jpeg',\r\n                1\r\n            );\r\n        });\r\n    }\r\n    const goPrev = () => {\r\n        setModalContent(\r\n            <PImgModal\r\n            setModalContent={setModalContent}\r\n            name={name}\r\n            nickname={nickname}\r\n            email={email}\r\n            password={password}\r\n            pImg={_pImg}\r\n            refreshUser={refreshUser}\r\n            />\r\n        );\r\n    }\r\n    const goNext = () => {\r\n        if(isValidation()){\r\n            console.log(fileUrl)\r\n            setModalContent(\r\n                <IntroduceModal \r\n                setModalContent={setModalContent}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                password={password}\r\n                pImg={fileUrl}\r\n                refreshUser={refreshUser}\r\n                />\r\n            )\r\n        } else {\r\n            console.log(\"nono\")\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"register_modal pImgEditModal rBase\">\r\n            <div className=\"profile_edit_nav rBase\">\r\n                <button className=\"iconBtn\" id=\"cancel\" onClick={goPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <span>미디어 편집</span>\r\n                <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}>\r\n                    <button className=\"nextBtn\" onClick={() => {goNext()} }>적용하기</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"img_preview rBase rCenter \">\r\n                {_pImg && (\r\n                <ReactCrop\r\n                    src={_pImg}\r\n                    crop={crop}\r\n                    ruleOfThirds\r\n                    onImageLoaded={(i) => onImageLoaded(i)}\r\n                    onChange={(c, pc) => onChange(c, pc)}\r\n                    onCropChange\r\n                    onComplete={(c, pc) => onCropComplete(c, pc)}\r\n                    locked={true}\r\n                />\r\n                )}\r\n                {_pImg && (\r\n                    <div>\r\n                    <canvas\r\n                      ref={previewCanvasRef}\r\n                      style={{\r\n                        width: Math.round(completedCrop?.width ?? 0),\r\n                        height: Math.round(completedCrop?.height ?? 0)\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default PImgEditModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useState } from \"react\";\r\nimport EmailAuthModal from \"./EmailAuthModal\";\r\nimport PImgEditModal from \"./PImgEditModal\";\r\nimport PImgModal from \"./PImgModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\n\r\nconst IntroduceModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, password, pImg, _introduce}) => {\r\n    const [introduce, setIntroduce] = useState(_introduce);\r\n    const [textCnt, setTextCnt] = useState(_introduce===undefined ? 0 :  _introduce.length);\r\n\r\n    const [isFocus, setIsFocus] = useState(0)\r\n\r\n    const onChange = (event) => {\r\n        const { target } = event;\r\n        const { value } = target;\r\n        setIntroduce(value);\r\n        setTextCnt(value.length)\r\n    }\r\n    \r\n    const handleKeyDown = (event) => {\r\n        if(event.keyCode !== 8 && textCnt >= 160){\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    \r\n    const setPrev = () => {\r\n        setModalContent(\r\n            <PImgModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            email={email}\r\n            name={name}\r\n            nickname={nickname}\r\n            password={password}\r\n            _pImg={pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const goNext = () => {\r\n        setModalContent(\r\n            <EmailAuthModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            name={name}\r\n            nickname={nickname}\r\n            email={email}\r\n            password={password}\r\n            pImg={pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"register_modal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={setPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    자신을 소개해 주세요\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text2\">\r\n                    나만의 특별한 점이 있다면 무엇인가요?<br/><br/>너무 깊이 생각하지 말고 가볍게 이야기해 보세요.\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <label className={`rBase ${isFocus === 1 ? \"focus\" : \"\"} ${introduce !== \"\" ? \"yesValue\" : \"\"}`}>\r\n                    <span className=\"value introduce\">자기소개</span>\r\n                    <span className=\"nCnt\">{textCnt}/160</span>\r\n                    <div className=\"input_wrap\">\r\n                        <textarea value={introduce} onChange={onChange} className=\"inputintroduce\" spellCheck=\"false\" onKeyDown={handleKeyDown}\r\n                        autoComplete=\"off\" id=\"inputName\" onFocus={()=> {setIsFocus(1)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>                    \r\n                </label>\r\n            </div>\r\n\r\n            <div className={`rBase next_container$ active`}>\r\n                <button className=\"nextBtn\" onClick={goNext}>다음</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default IntroduceModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft, faCamera } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport { getUser, isEmail } from \"helpers/auth\";\r\nimport { useEffect, useState } from \"react\";\r\nimport IntroduceModal from \"./IntroduceModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\nimport PImg from '../../img/default_profile_normal.png';\r\nimport PImgEditModal from \"./PImgEditModal\";\r\nimport PasswordModal from \"./PasswordModal\";\r\n\r\nconst PImgModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, password, _pImg, introduce}) => {\r\n    const [pImg, setPImg] = useState(_pImg);\r\n\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        \r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            setPImg(result);\r\n            setModalContent(\r\n                <PImgEditModal\r\n                    setModalContent={setModalContent}\r\n                    onRequestClose={onRequestClose}\r\n                    refreshUser={refreshUser}\r\n                    email={email}\r\n                    name={name}\r\n                    nickname={nickname}\r\n                    password={password}\r\n                    _pImg={result}\r\n                    introduce={introduce}\r\n                />\r\n            );\r\n        }\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n    const isValidation = () => {\r\n        if(pImg !== undefined ) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const setPrev = () => {\r\n        setModalContent(\r\n            <PasswordModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            email={email}\r\n            name={name}\r\n            nickname={nickname}\r\n            _password={password}\r\n            pImg={_pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const goNext = () => {\r\n        setModalContent(\r\n            <IntroduceModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            name={name}\r\n            nickname={nickname}\r\n            email={email}\r\n            password={password}\r\n            pImg={_pImg}\r\n            _introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"register_modal pImgModal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={setPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    프로필 사진 선택하기\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text2\">\r\n                    마음에 드는 사진이 있나요? 지금 업로드하세요\r\n                </span>\r\n            </div>\r\n            <div className=\"img_preview base center \">\r\n                <img className=\"main_img\" src={pImg === undefined ? PImg : pImg} alt=\"profile_image\" /> \r\n                <div className=\"profile_img_back\"></div>\r\n                <label htmlFor=\"profile-file\">\r\n                    <FontAwesomeIcon icon={faCamera} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                </label>\r\n            </div>\r\n\r\n            {/* <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}> */}\r\n            <div className={`rBase`}>\r\n                <button className=\"nextBtn\" onClick={() => {goNext()} }>다음</button>\r\n            </div>\r\n            <input id=\"profile-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n        </div>\r\n    )\r\n}\r\nexport default PImgModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport { getUser, isEmail } from \"helpers/auth\";\r\nimport { useEffect, useState } from \"react\";\r\nimport PImgModal from \"./PImgModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\n\r\nconst PasswordModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, _password, pImg, introduce}) => {\r\n    // useEffect( () => {\r\n    //     console.log(email)\r\n    // },)\r\n    const [password, setPassword] = useState(_password !== undefined ? _password : \"\");\r\n    const [passwordError, setPasswordError] = useState(false);\r\n\r\n    const [isFocus, setIsFocus] = useState(0)\r\n    const [isPassShow, setIsPassShow] = useState(false)\r\n\r\n    const onChange = (event) => {\r\n        const { target } = event;\r\n        const { value } = target;\r\n        setPassword(value);\r\n        if(value.length < 6 ){\r\n            setPasswordError(\"비밀번호를 6자 이상 입력하세요\")\r\n        } else if(value === \"\" && password !== \"\"){ // 입력값을 다지운경우\r\n            setPasswordError(\"비밀번호를 입력하세요\")\r\n        } else {\r\n            setPasswordError(false)\r\n        }\r\n    }\r\n\r\n    const isValidation = () => {\r\n        if(password !== \"\" && password.length >= 6 ) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const handleEvent = (event) => {\r\n        if (event.type === \"mousedown\") {\r\n            setIsPassShow(true)\r\n        } else {\r\n            setIsPassShow(false)\r\n        }\r\n    }   \r\n    const setPrev = () => {\r\n        setModalContent(\r\n            <RegisterModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            _email={email}\r\n            _name={name}\r\n            _nickname={nickname}\r\n            password={password}\r\n            pImg={pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const goNext = () => {\r\n        // if(isValidation()){\r\n            setModalContent(\r\n                <PImgModal \r\n                setModalContent={setModalContent}\r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                password={password}\r\n                _pImg={pImg}\r\n                introduce={introduce}\r\n                />\r\n            )\r\n        // }\r\n    }\r\n    return (\r\n        <div className=\"register_modal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={setPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    비밀번호가 필요합니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text2\">\r\n                    비밀번호는 6자 이상이어야 합니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <label className={`rBase ${isFocus === 1 ? \"focus\" : \"\"} ${password !== \"\" ? \"yesValue\" : \"\"}\r\n                ${passwordError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">비밀번호</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type={isPassShow ? \"text\" : \"password\"} value={password} onChange={onChange} className=\"inputPassword\"\r\n                        autoComplete=\"off\" id=\"inputName\" onFocus={()=> {setIsFocus(1)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    { passwordError === false && password !== \"\"\r\n                    ? (<span className=\"underInput show_pass\" onMouseDown={handleEvent} onMouseUp={handleEvent}>{isPassShow ? \"비밀번호보기\": \"숨기기\"}</span>) \r\n                    : (<span className=\"underInput error\">{passwordError}</span>)}\r\n                    \r\n                </label>\r\n            </div>\r\n\r\n            <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}>\r\n                <button className=\"nextBtn\" onClick={() => {goNext()} }>다음</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default PasswordModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport { isEmail } from \"helpers/auth\";\r\nimport { useState } from \"react\";\r\nimport PasswordModal from \"./PasswordModal\";\r\nimport \"./register.css\";\r\n\r\nconst RegisterModal = ({setModalContent, onRequestClose, refreshUser, _email, _nickname, _name, password, pImg, introduce}) => {\r\n    const [name, setName] = useState(_name);\r\n    const [nameCnt, setNameCnt] = useState(0);\r\n    const [nameError, setNameError] = useState(false);\r\n\r\n    const [nickname, setNickName] = useState(_nickname);\r\n    const [nicknameCnt, setNickNameCnt] = useState(0);\r\n    const [nicknameError, setNickNameError] = useState(false);\r\n\r\n    const [email, setEmail] = useState(_email);\r\n    const [emailError, setEmailError] = useState(false);\r\n\r\n    const [isFocus, setIsFocus] = useState(0)\r\n\r\n    const onChange = (event) => {\r\n        const { target } = event;\r\n        const { value } = target;\r\n        if(target.type === 'text'){\r\n            if(isFocus === 1){\r\n                setName(value);\r\n                setNameCnt(value.length)\r\n                if(value === \"\" && name !== \"\"){ // 입력값을 다지운경우\r\n                    setNameError(\"이름을 입력하세요\")\r\n                } else {\r\n                    setNameError(false)\r\n                }\r\n            } else {\r\n                setNickName(value);\r\n                setNickNameCnt(value.length)\r\n                if(value === \"\" && nickname !== \"\"){ // 입력값을 다지운경우\r\n                    setNickNameError(\"닉네임을 입력하세요\")\r\n                } else {\r\n                    setNickNameError(false)\r\n                }\r\n            }\r\n            \r\n        } else {\r\n            setEmail(value);\r\n            if(value === \"\" || isEmail(value)){\r\n                setEmailError(false)\r\n                getUser('email', value)\r\n            } else {\r\n                setEmailError(\"올바른 이메일을 입력해 주세요.\")\r\n            }\r\n        }\r\n    }\r\n    const handleKeyDown = (event) => {\r\n        if(isFocus === 1 && event.keyCode !== 8 && nameCnt >= 50){\r\n            event.preventDefault();\r\n        }\r\n        if(isFocus === 2 && event.keyCode !== 8 && nicknameCnt >= 50){\r\n            event.preventDefault();\r\n        }   \r\n    }\r\n\r\n    const isValidation = () => {\r\n        if(email !== undefined && !emailError && name !== undefined  && nickname !== undefined ) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const goNext = () => {\r\n        if(isValidation()){\r\n            setModalContent(\r\n                <PasswordModal \r\n                setModalContent={setModalContent}\r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                _password={password}\r\n                pImg={pImg}\r\n                introduce={introduce}\r\n                />\r\n            )\r\n        }\r\n    }\r\n\r\n    const getUser = (type, value) => {\r\n        const ref = firebaseDB.ref('users')\r\n        .orderByChild(type)\r\n        .equalTo(value)\r\n        .once('value', snapshot => {\r\n            if(snapshot.exists()){\r\n                setEmailError(\"이미 등록된 이메일 입니다.\")\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"register_modal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"iconBtn leftBtn\" onClick={onRequestClose} >\r\n                    <FontAwesomeIcon icon={faTimes} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    계정을 생성하세요\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <label className={`rBase ${isFocus === 1 ? \"focus\" : \"\"} ${name !== \"\" ? \"yesValue\" : \"\"}\r\n                ${nameError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">이름</span>\r\n                    <span className=\"nCnt\">{nameCnt}/50</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type=\"text\" value={name} onChange={onChange} className=\"inputName\" onKeyDown={handleKeyDown}\r\n                        autoComplete=\"off\" id=\"inputName\" onFocus={()=> {setIsFocus(1)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    <span className=\"error underInput\">{nameError}</span>\r\n                </label>\r\n                <label className={`rBase ${isFocus === 2 ? \"focus\" : \"\"} ${name !== \"\" ? \"yesValue\" : \"\"}\r\n                ${nicknameError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">닉네임</span>\r\n                    <span className=\"nCnt\">{nicknameCnt}/50</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type=\"text\" value={nickname} onChange={onChange} className=\"inputNickName\" onKeyDown={handleKeyDown}\r\n                        autoComplete=\"off\" id=\"inputNickName\" onFocus={()=> {setIsFocus(2)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    <span className=\"error underInput\">{nicknameError}</span>\r\n                </label>\r\n                <label className={`rBase ${isFocus === 3 ? \"focus\" : \"\"} ${email !== \"\" ? \"yesValue\" : \"\"} ${emailError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">이메일</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type=\"email\" value={email} onChange={onChange} className=\"inputEmail\" \r\n                        autoComplete=\"off\" id=\"inputEmail\" onFocus={()=> {setIsFocus(3)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    <span className=\"error underInput\">{emailError}</span>\r\n                </label>\r\n            </div>\r\n\r\n            <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}>\r\n                <button className=\"nextBtn\" onClick={() => {goNext()} }>다음</button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\nexport default RegisterModal;","import { faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { authService, firebaseDB } from \"fbase\";\r\nimport RegisterModal from \"Modal/register/RegisterModal\";\r\nimport { useEffect, useState } from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst Side = ({refreshUser}) => {\r\n    const [searchValue, setSearchValue] = useState(\"\")\r\n    const [isFocus, setIsFocus] = useState(false)\r\n    const [users, setUsers] = useState([]);\r\n    const [isLogin, setIsLogin] = useState(false);\r\n\r\n    const [isModal, setIsModal] = useState(false);\r\n    const [modalContent, setModalContent] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    const onChange = (event) => {\r\n        console.log(\"onchange\")\r\n        const { target: {value} } = event;\r\n        setSearchValue(value)\r\n        \r\n        if(value !== \"\" && searchValue !== value){\r\n            const ref = firebaseDB.ref('users');\r\n            ref\r\n            .orderByChild('displayName')\r\n            .startAt(value)\r\n            .endAt(value+\"\\uf8ff\")\r\n            .once('value')\r\n            .then(c => {\r\n                console.log(c.val()) \r\n                setUsers(c.val());\r\n            });      \r\n        } else {\r\n            setUsers([])\r\n        }\r\n    }\r\n\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        history.push('/search/' + searchValue );\r\n    }\r\n    const openModal = () => {\r\n        if(!isModal)\r\n            setModalContent(\r\n            <RegisterModal \r\n                setModalContent={setModalContent} \r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n            />)\r\n        setIsModal(!isModal);\r\n    }\r\n\r\n    const onRequestClose = () => {\r\n        setIsModal(false);\r\n    }\r\n    const handleMouseDown = (e) => {\r\n        console.log(\"h\")\r\n        if(isFocus)\r\n            e.preventDefault()\r\n    }\r\n    useEffect(()=> {\r\n        authService.onAuthStateChanged((user)=>{\r\n            setIsLogin(user !== null)\r\n          })\r\n    },)\r\n    return (\r\n        <div className=\"side base\">\r\n            <div className={`base ${isFocus ? \"focus search_container\" : \"search_container\"}`}>\r\n                <label htmlFor=\"sInput\" className=\"search_label base\">\r\n                    <div>\r\n                        <FontAwesomeIcon icon={faSearch} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                    </div>\r\n                    <div>\r\n                        <form onSubmit={onSubmit}>\r\n                            <input type=\"text\" value={searchValue} onChange={onChange} className=\"searchInput\" \r\n                            placeholder=\"Search Nwitter\" autoComplete=\"off\" id=\"sInput\"\r\n                            onFocus={()=> {setIsFocus(true)}} onBlur={()=> {setIsFocus(false)}} />\r\n                        </form>\r\n                    </div>\r\n                </label>\r\n            </div>\r\n            <div className={`base ${isFocus ? \"focus searchResult\" : \"searchResult\"}`}>\r\n                <nav>\r\n                    { isFocus && users !== null &&\r\n                        Object.keys(users).map((nweet) => {\r\n                            const user = users[nweet];\r\n                            console.log(user)\r\n                            return(   \r\n                                <Link to={`/search/${user.uid}`}\r\n                                onMouseDown={handleMouseDown}>\r\n                                    <div className=\"base resultWrap\">\r\n                                        <img src={user.photoURL === \"\" ? PImg : user.photoURL } alt=\"\" />\r\n                                        <div className=\"base\">\r\n                                            <span className=\"displayName\">\r\n                                                {user.displayName}\r\n                                            </span>\r\n                                            <span className=\"userID\">\r\n                                                {user.email}\r\n                                            </span>\r\n                                            <span className=\"user_addi\">\r\n                                                {user.introduce}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            );  \r\n                        })\r\n                    }\r\n                </nav>\r\n            </div>\r\n\r\n            { !isLogin && (\r\n                <>\r\n                <div className=\"goRegister base\">\r\n                    <div className=\"t1\">\r\n                        <span>트위터에 처음이세요?</span>\r\n                    </div>\r\n                    <div className=\"t2\">\r\n                        <span>지금 가입해서 나에게 맞춤 설정된 타임라인을 만들어 보세요!</span>\r\n                    </div>\r\n                    <div className=\"t3\">\r\n                        <button onClick={openModal}>가입하기</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"goRegister base\">\r\n                    <div className=\"t2\">\r\n                        <p>github.io에 구글로그인 연결관련해서 회원가입에 문제가 있습니다..</p>\r\n                        <p>test@test.com / test123으로 로그인해서 테스트부탁드립니다</p>\r\n                    </div>\r\n                </div>\r\n                </>\r\n            )}\r\n\r\n            <ReactModal \r\n                shouldCloseOnOverlayClick={true}\r\n                shouldCloseOnEsc={false}\r\n                onRequestClose={()=> onRequestClose() }\r\n                isOpen={isModal}\r\n                ariaHideApp={false}\r\n                appElement={document.getElementById('app')}\r\n                className=\"base\"\r\n            >\r\n                {modalContent}\r\n            </ReactModal>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Side;","import Nweet from \"components/Nweet\";\r\nimport NweetFactory from \"components/NweetFactory\";\r\nimport { dbService, firebaseDB } from \"fbase\";\r\nimport { reverseObject, toArrayObject } from \"helpers/help\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Follow = ({match, userObj}) => {\r\n  const [nweets, setNweets] = useState([]);\r\n  const [follows, setFollows] = useState({});\r\n  const [ref, inView] = useInView()\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false)\r\n \r\n  const getFollwers = useCallback(async () => {\r\n    if(userObj !== null && userObj){\r\n      const ref = firebaseDB.ref('follows');\r\n      ref\r\n      .orderByChild('from')\r\n      .equalTo(userObj.uid)\r\n      .on('value', (snapshot) => {    \r\n        setFollows(toArrayObject(snapshot.val()))\r\n      });\r\n    }\r\n  }, [userObj] );\r\n\r\n  const getNweets = useCallback(async () => {\r\n    setLoading(true)\r\n    const ref = firebaseDB.ref('posts');\r\n    ref\r\n    .orderByChild('createdAt')\r\n    .limitToLast(10 * page)\r\n    .on('value', (snapshot) => {      \r\n      const result = reverseObject(snapshot.val());\r\n      let nweets_result = [];\r\n      Object.keys(result).forEach((nweet) => {\r\n        const value = result[nweet];\r\n        if(Array.isArray(follows) && follows.find(val => val.to === value.creatorId) ){\r\n          // console.log(value)\r\n          nweets_result = [...nweets_result, value];\r\n        }\r\n      });\r\n      setNweets(nweets_result)\r\n      \r\n    })\r\n    setLoading(false);\r\n  }, [page, follows] );\r\n\r\n  useEffect(() => {\r\n    getFollwers();\r\n  }, [getFollwers]);\r\n\r\n  useEffect(() => {\r\n    getNweets();\r\n  }, [getNweets]);\r\n\r\n  useEffect( () => {\r\n    if (inView && !loading) {\r\n      setPage(page => page + 1)\r\n    }\r\n  }, [inView, loading])\r\n\r\n  return (\r\n    <div>\r\n      {/* <NweetFactory userObj={userObj}  /> */}\r\n      <div className={`base ${nweets ? \"postList\" : \"noPostList\"}`}> \r\n        {\r\n          nweets.length !== 0 ?\r\n          Object.keys(nweets).map((nweet) => {\r\n            return (\r\n              <Nweet key={nweet} nweet_key={nweet} nweetObj={nweets[nweet]} \r\n              userObj={userObj} viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null} />\r\n            )\r\n          })\r\n          : <span>팔로워중인 사람이 없습니다</span>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Follow;\r\n","import { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Auth from 'routes/Auth';\r\nimport Detail from 'routes/Detail';\r\nimport Home from 'routes/Home';\r\nimport Profile from 'routes/Profile';\r\nimport Search from 'routes/Search';\r\nimport Verify from 'routes/Verify';\r\nimport LeftMenu from './LeftMenu';\r\nimport Navigation from './Navigation';\r\nimport Side from './Side';\r\nimport Follow from 'routes/Follow';\r\n\r\nconst AppRouter = ({match, userObj, refreshUser, setUserObj, logout}) => {\r\n    return (\r\n        <Router>\r\n            <main>\r\n            <LeftMenu userObj={userObj} logout={logout} />\r\n            <Switch>\r\n                <>\r\n                    <div className=\"main\">\r\n                        <div className=\"container\">\r\n                            <Navigation />\r\n                            <Route exact path=\"/\" \r\n                            render={()=> <Home userObj={userObj} /> }/>\r\n                            <Route exact path=\"/follow\" \r\n                            render={()=> <Follow userObj={userObj} /> }/>\r\n                            <Route path=\"/search/:key1\" \r\n                            render={() => <Search userObj={userObj} refreshUser={refreshUser} />  } />\r\n                            <Route path=\"/nweet/:key1\" \r\n                            render={() => <Detail userObj={userObj} />  } />\r\n                            <Route path=\"/profile\" \r\n                            render={()=> <Profile userObj={userObj} refreshUser={refreshUser} setUserObj={setUserObj} />}/>\r\n                            <Route path=\"/login\" \r\n                            render={()=> <Auth userObj={userObj} refreshUser={refreshUser} /> } />\r\n                            <Route path=\"/verify/:key1\" \r\n                            component={Verify} />\r\n                            \r\n                        </div>\r\n                        <Side refreshUser={refreshUser} />\r\n                    </div>\r\n                </>\r\n            </Switch>\r\n            </main>\r\n        </Router>\r\n    )\r\n}\r\n\r\nexport default AppRouter;","import { useEffect, useState } from \"react\";\r\nimport AppRouter from \"components/Router\";\r\nimport { authService } from \"fbase\";\r\nimport { dbService } from \"../fbase\";\r\nimport PImg from '../img/default_profile_normal.png';\r\nimport { getUser, sendEmail } from \"helpers/auth\";\r\n\r\nfunction App() {\r\n  const [init, setInit] = useState(false);\r\n  const [userObj, setUserObj] = useState(null);\r\n\r\n  const setUserData = (user, _user, user_id) => {\r\n    setUserObj({\r\n      uid: user.uid,\r\n      userId: user_id,\r\n      name: user.name ? user.name : \"\",\r\n      displayName: user.displayName ? user.displayName : \"\",\r\n      email: user.email ? user.email : \"\",\r\n      introduce: user.introduce ? user.introduce : \"\",\r\n      photoURL: user.photoURL !== null ? user.photoURL  : PImg,\r\n      coverURL: (user.coverURL !== \"\" || user.coverURL !== undefined) ? user.coverURL  : \"\",\r\n      timestamp: user.timestamp,\r\n      followCnt: user.followCnt,\r\n      followingCnt: user.followingCnt,\r\n      updateProfile: (args) => _user.updateProfile(args)\r\n    });\r\n  }\r\n  const refreshUser = () => {\r\n    const user=  authService.currentUser;\r\n    getUser(user, setUserData)\r\n  }\r\n  const logout = () => {\r\n    setUserObj(false);\r\n  }\r\n  useEffect(()=>{\r\n    authService.onAuthStateChanged((user)=>{\r\n      console.log(user)\r\n      if(user){\r\n        // sendEmail();\r\n        getUser(user, setUserData)\r\n      } else{\r\n        setUserObj(false);\r\n      }\r\n      setInit(true);\r\n    })\r\n  },[]);\r\n\r\n  return (\r\n    <>\r\n      { init ? \r\n      <AppRouter \r\n      isLoggedIn={Boolean(userObj)} \r\n      userObj={userObj} logout={logout}\r\n      refreshUser={refreshUser} /> \r\n      : \"initializing...\" }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App; ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'components/App';\r\nimport \"./styles.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n); "],"sourceRoot":""}