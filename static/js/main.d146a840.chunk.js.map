{"version":3,"sources":["fbase.js","components/AuthForm.js","routes/Auth.js","img/default_profile_normal.png","components/Detail/Comment.js","components/Detail/Comments.js","routes/Detail.js","components/NweetFactory.js","components/Nweet.js","helpers/help.js","routes/Home.js","Modal/profile/CoverImgEditModal.js","Modal/profile/CoverImgModal.js","Modal/profile/ProfileImgEditModal.js","Modal/profile/ProfileImgModal.js","components/ProfileEdit.js","routes/Profile.js","routes/Search.js","routes/Verify.js","components/LeftMenu.js","helpers/auth.js","components/Navigation.js","Modal/register/EmailAuthModal.js","Modal/register/PImgEditModal.js","Modal/register/IntroduceModal.js","Modal/register/PImgModal.js","Modal/register/PasswordModal.js","Modal/register/RegisterModal.js","components/Side.js","routes/Follow.js","components/Router.js","components/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","databaseURL","firebaseInstance","authService","auth","storageService","firestore","storage","firebaseDB","database","AuthForm","refreshUser","useState","email","setEmail","password","setPssword","newAccount","setNewAccount","error","setError","history","useHistory","onChange","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","data","additionalUserInfo","isNewUser","user","ref","orderByChild","startAt","endAt","once","snapshot","exists","console","log","push","uid","timestamp","metadata","creationTime","displayName","photoURL","coverURL","signInWithEmailAndPassword","message","className","type","placeholder","required","onClick","prev","Auth","userObj","useEffect","goBack","onSocialClick","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","catch","code","then","result","undefined","introduce","followCnt","followingCnt","icon","faTwitter","color","size","style","marginBottom","faGoogle","faGithub","Comment","commentId","commentObj","isOwner","creatorId","creator","setCreator","getCreator","useCallback","equalTo","val","Object","keys","onDeleteClick","window","confirm","remove","to","src","PImg","alt","fromNow","createdAt","text","faTrash","Comments","postId","setText","comments","setComments","Date","now","creatorName","creatorEmail","commentCnt","length","update","getComments","on","map","comment","Detail","withRouter","match","nweet","setNweet","isHeart","setIsHeart","params","key1","getNweet","hearts","forEach","heart","faEllipsisH","attachmentUrl","moment","format","heartCnt","_heartCnt","id","faHeart2","faHeart","htmlFor","faComment","faRetweet","retweetCnt","faUpload","NweetFactory","isUpdate","updateCancel","nweetObj","toggleEditing","attachment","setAttachment","_nweet","_attachment","attachmentRef","child","uuidv4","putString","response","getDownloadURL","refFromURL","delete","key","maxLength","backgroundImage","faTimesCircle","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","currentTarget","readAsDataURL","opacity","faPlus","Nweet","nweet_key","viewRef","editing","setEditing","parentNode","document","getElementsByClassName","classList","click","faPencilAlt","reverseObject","object","newObject","i","toArrayObject","isFollow","Home","nweets","setNweets","useInView","inView","page","setPage","loading","setLoading","getNweets","limitToLast","parseInt","CoverImgEditModal","setModalContent","setModalNum","profileImg","coverImg","setProfileImg","setCoverImg","openModal","prevCover","unit","width","height","aspect","crop","setCrop","completedCrop","setCompletedCrop","imageRef","useRef","previewCanvasRef","setCroppedImageUrl","fileUrl","setFileUrl","makeClineCrop","getCroppedImg","croppedImageUrl","current","image","canvas","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","pixelRatio","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","Promise","resolve","reject","toBlob","blob","URL","revokeObjectURL","createObjectURL","faArrowLeft","ruleOfThirds","onImageLoaded","c","pc","_crop","y_val","bottom","onCropChange","onComplete","onCropComplete","locked","Math","round","CoverImgModal","uploadToStorage","isProfile","imageURL","getFileBlob","put","downURL","updateProfile","userId","go","url","cb","xhr","XMLHttpRequest","open","responseType","addEventListener","send","profileUpdate","startNum","lastIndexOf","substr","uploadRef","faCamera","ProfileImgEditModal","prevProfile","imgForm","setImgForm","h","clientHeight","w","clientWidth","_x","left","percent_crop","x_val","ProfileImgModal","ProfileEdit","isModal","setIsModal","modalContent","setProfileModal","img","onRequestClose","shouldCloseOnOverlayClick","shouldCloseOnEsc","isOpen","ariaHideApp","appElement","getElementById","getMyNweets","Search","setUser","setUserId","setIsFollow","setfollowCnt","setfollowingCnt","loginfollowCnt","setLoginfollowCnt","getFollow","follows","follow","from","_followCnt","_followingCnt","Verify","currentUser","is_verfied","emailVerified","LeftMenu","logout","marginRight","faHome","marginTop","faHashtag","faCog","faUser","signOut","sendEmail","actionCodeSettings","handleCodeInApp","sendEmailVerification","localStorage","setItem","errorCode","errorMessage","getUser","_user","callback","numChildren","users","Navigation","location","href","split","path","pathName","setPathName","charAt","toUpperCase","slice","indexOf","EmailAuthModal","nickname","pImg","addUser","EmailRegister","_introduce","PImgEditModal","_pImg","isValidation","IntroduceModal","setIntroduce","textCnt","setTextCnt","isFocus","setIsFocus","spellCheck","onKeyDown","keyCode","autoComplete","onFocus","onBlur","PImgModal","setPImg","_password","PasswordModal","setPassword","passwordError","setPasswordError","isPassShow","setIsPassShow","handleEvent","_email","_name","_nickname","onMouseDown","onMouseUp","RegisterModal","setName","nameCnt","setNameCnt","nameError","setNameError","setNickName","nicknameCnt","setNickNameCnt","nicknameError","setNickNameError","emailError","setEmailError","test","isEmail","handleKeyDown","faTimes","Side","searchValue","setSearchValue","setUsers","isLogin","setIsLogin","handleMouseDown","e","onAuthStateChanged","faSearch","Follow","setFollows","getFollwers","nweets_result","Array","isArray","find","AppRouter","setUserObj","exact","render","component","App","init","setInit","setUserData","user_id","args","isLoggedIn","Boolean","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.d146a840.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\nimport \"firebase/database\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_APP_ID,\r\n    databaseURL: process.env.REACT_APP_DATABASE_URL\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const firebaseInstance = firebase;\r\nexport const authService = firebase.auth();\r\nexport const dbService = firebase.firestore();\r\nexport const storageService = firebase.storage(); \r\nexport const firebaseDB =  firebase.database();","import { authService, firebaseDB } from \"fbase\";\r\nimport { useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst AuthForm = ({refreshUser}) => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPssword] = useState(\"\");\r\n    const [newAccount, setNewAccount] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const history = useHistory();\r\n\r\n    const onChange = (event) => {\r\n        const { name, value } = event.target;\r\n\r\n        if(name === \"email\"){\r\n            setEmail(value);\r\n        }\r\n        if(name === \"password\"){\r\n            setPssword(value);\r\n        }\r\n    }\r\n\r\n    const onSubmit = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n            let data;\r\n            if(newAccount){\r\n                data = await authService.createUserWithEmailAndPassword(email, password)\r\n\r\n                if(data.additionalUserInfo.isNewUser){\r\n                    const user = data.user;\r\n                    firebaseDB.ref('users')\r\n                    .orderByChild('email')\r\n                    .startAt(user.email)\r\n                    .endAt(user.email+\"\\uf8ff\")\r\n                    .once('value', snapshot => {\r\n                        if(!snapshot.exists()){\r\n                            console.log(\"회원가입\")\r\n                            refreshUser();\r\n                            firebaseDB.ref('users').push({\r\n                                uid:user.uid,\r\n                                timestamp : user.metadata.creationTime ? user.metadata.creationTime : \"\",\r\n                                displayName: user.displayName ? user.displayName : user.email,\r\n                                email: user.email ? user.email : \"\",\r\n                                photoURL: user.photoURL ? user.photoURL : \"\",\r\n                                coverURL: \"\",\r\n                                \r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                await authService.signInWithEmailAndPassword(email, password);\r\n            }   \r\n            history.push(\"/\");\r\n        } catch(error){\r\n            setError(error.message);\r\n        }\r\n    }\r\n\r\n    const toggleAccount = () => setNewAccount((prev) => !prev);\r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={onSubmit} className=\"container\">\r\n                <input name=\"email\" type=\"email\" placeholder=\"Email\" value={email} onChange={onChange} required className=\"authInput\"/>\r\n                <input name=\"password\" type=\"password\" placeholder=\"Password\" value={password} onChange={onChange} required className=\"authInput\"/>\r\n                <input type=\"submit\" className=\"authSubmit\" value={newAccount ? \"Create Account\" : \"Log In\"} />\r\n                {error && <span className=\"authError\">{error}</span>}\r\n            </form>\r\n            <span onClick={toggleAccount} className=\"authSwitch\">\r\n                {newAccount ? \"Sign In\" : \"Create Account\"}\r\n            </span>\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default AuthForm; ","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTwitter, faGoogle, faGithub} from \"@fortawesome/free-brands-svg-icons\";\r\nimport { authService, firebaseDB, firebaseInstance } from \"fbase\";\r\nimport AuthForm from \"components/AuthForm\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction Auth({userObj, refreshUser}) {\r\n    const history = useHistory();\r\n    const [error, setError] = useState(\"\");\r\n\r\n    useEffect(()=> {\r\n        if(userObj){\r\n            history.goBack()\r\n        }\r\n    }, );\r\n\r\n    const onSocialClick = async (event) => {\r\n        const { target : {name}, } = event;\r\n        let provider;\r\n        if(name===\"google\"){\r\n            provider = new firebaseInstance.auth.GoogleAuthProvider();\r\n        } else if( name === \"github\"){\r\n            provider = new firebaseInstance.auth.GithubAuthProvider();\r\n        }\r\n        await authService.signInWithPopup(provider).catch(function(error){\r\n            console.log(error)\r\n            if(error.code === \"auth/account-exists-with-different-credential\"){\r\n                setError(\"동일한 이메일의 계정이 있습니다 해당 계정으로 로그인해주세요\")\r\n            }\r\n        }).then(function(result){\r\n            console.log(result)\r\n            if(result !== undefined){\r\n                const user = result.user;\r\n                firebaseDB.ref('users')\r\n                .orderByChild('email')\r\n                .startAt(user.email)\r\n                .endAt(user.email+\"\\uf8ff\")\r\n                .once('value', snapshot => {\r\n                    if(!snapshot.exists()){\r\n                        console.log(\"회원가입\")\r\n                        refreshUser();\r\n                        firebaseDB.ref('users').push({\r\n                            uid:user.uid,\r\n                            timestamp : user.metadata.creationTime ? user.metadata.creationTime : \"\",\r\n                            name: user.displayName ? user.displayName : user.email,\r\n                            displayName: user.displayName ? user.displayName : user.email,\r\n                            email: user.email ? user.email : \"\",\r\n                            introduce: \"\",\r\n                            photoURL: user.photoURL ? user.photoURL : \"\",\r\n                            coverURL: \"\",\r\n                            followCnt: 0,\r\n                            followingCnt: 0\r\n                        });\r\n                    }\r\n                });\r\n                history.push(\"/\");\r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"authContainer\">\r\n            <FontAwesomeIcon \r\n            icon={faTwitter}\r\n            color={\"#04AAFF\"}\r\n            size=\"3x\"\r\n            style={{marginBottom: 30}} />\r\n\r\n            <AuthForm refreshUser={refreshUser}/>\r\n            { error && \r\n                <span>{error}</span>}\r\n\r\n            <div className=\"authBtns\">\r\n                <button onClick={onSocialClick} name=\"google\" className=\"authBtn\">\r\n                    Continue with Google <FontAwesomeIcon icon={faGoogle} />\r\n                </button>\r\n                <button onClick={onSocialClick} name=\"github\" className=\"authBtn\">\r\n                    Continue with Github <FontAwesomeIcon icon={faGithub} />\r\n                </button>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Auth;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAwFBMVEXM1t3K1dy5xc2xvca7xs+KmaVrfYtld4agrrhneYhoeoiksbufrbegrbe7xs66xs6Dk5+/ytKdqrWElKCDk6Byg5HG0NjEz9bH0dlqfIprfIuAkJ2ir7nJ09p1hpN0hZO9yNDH0tmbqbTBzNOzv8iqtsCotL6ntL7L1dy3w8yjsLqVpK+Onam8x9CRn6ttf43CzdWMm6dmeIeLmqauusSwvMVxgpCToa29ydFneIeRoKzK1Nttfo2yvseZp7KHl6OOgUPZAAAA80lEQVR4Ae3SA5oDQRgE0Aortm1zNub9T7Xm4O/+uMo7w8O/duNyezxuF3R5fX4+8vu80BII8lUoDA0RfhKFUizIT4JxqCT4RQIKSZokIUvRJAVZmiYZyLI0yUIWpEkQohwtcpDkaZGHpECLAkRFmpQgK9OkDFmFJhXIqjV+Ua9CoZHlJ9kGlJqtLF9lW01oaXe6vX6308aPMRiOxpPJeDQcQMd0Nuer+WwKlcXS4CfG3QKi1Zwm8xUEAYMWRkAZSbvT2qAtYw1bzQ0dbJqws6WjLWzs9nS038HqQMEBFscTBacjzDoUnWF2oegCsytFV7x6ADhgICRy9ELGAAAAAElFTkSuQmCC\"","import { faPencilAlt, faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { firebaseDB } from 'fbase';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport Moment from 'react-moment';\r\nimport { Link } from 'react-router-dom';\r\nimport PImg from '../../img/default_profile_normal.png';\r\n\r\nconst Comment = ({commentId, commentObj, isOwner}) => {\r\n    const creatorId = commentObj === undefined ? \"\" : commentObj.creatorId;\r\n    const [creator, setCreator] = useState(null);\r\n\r\n    const getCreator = useCallback(()=>{\r\n        if(creatorId !== \"\"){\r\n            firebaseDB.ref('users')\r\n            .orderByChild('uid')\r\n            .equalTo(creatorId)\r\n            .once('value', snapshot => {\r\n                const user = snapshot.val();\r\n                setCreator(user[Object.keys(user)[0]] );\r\n            });\r\n        }\r\n    },[creatorId]);\r\n\r\n    const onDeleteClick = async (event) =>{\r\n        event.preventDefault();\r\n        const ok = window.confirm(\"댓글을 삭제하시겠습니까\");\r\n\r\n        if(ok) {\r\n            firebaseDB.ref(`/comments/${commentId}`).remove();\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getCreator()\r\n    }, [getCreator])\r\n    return (\r\n        <div>\r\n            { commentObj && (\r\n                <div className=\"base listView_container flexRow\">\r\n                    <div className=\"base leftProfile\">\r\n                    { creator && \r\n                    <Link to={`/search/${creator.uid}`}>\r\n                        <img src={creator !== null ? (creator.photoURL !== \"\" ? creator.photoURL : PImg)  : \"\"} \r\n                        alt=\"profile_image\" /> \r\n                    </Link>\r\n                    }  \r\n                    </div>\r\n                    <div className=\"base rightContent\">\r\n                        { creator && \r\n                        <div className=\"mgBottom10 flexRow base\">\r\n                            <Link to={`/search/${creator.uid}`} className=\"fontSize16 textBold\">{creator.displayName}</Link>\r\n                            <Moment fromNow className=\"fromNow\">{commentObj.createdAt}</Moment>\r\n                        </div>}\r\n                        <div className=\"base contentText\">\r\n                            <span className='fontSize15'>{commentObj.text}</span>\r\n                        </div>\r\n                        { isOwner && (\r\n                                <div className=\"nweet__actions\">\r\n                                    <span onClick={onDeleteClick}>\r\n                                        <FontAwesomeIcon icon={faTrash} />\r\n                                    </span>\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </div>\r\n                    \r\n                </div>\r\n                )} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comment;","import { firebaseDB } from 'fbase';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport PImg from '../../img/default_profile_normal.png';\r\nimport Comment from './Comment';\r\n\r\nconst Comments = ({creator, userObj, postId}) => {\r\n    const [text, setText] = useState(\"\");\r\n    const [comments, setComments] = useState(null);\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        firebaseDB.ref(\"/comments\").push({\r\n            text:text,\r\n            createdAt: Date.now(),\r\n            postId: postId,\r\n            creatorId: userObj.uid,\r\n            creatorName: userObj.displayName,\r\n            creatorEmail: userObj.email,\r\n        });\r\n        const commentCnt = comments === null ? 1 : Object.keys(comments).length+1;\r\n        firebaseDB.ref(\"posts/\"+ postId).update({\r\n            commentCnt: commentCnt\r\n        });\r\n\r\n        setText(\"\");\r\n    }\r\n    const onChange = (event) => {\r\n        const {target: {value}} = event;\r\n        setText(value);\r\n    }\r\n\r\n    const getComments = useCallback(()=>{\r\n        firebaseDB\r\n        .ref('comments')\r\n        .orderByChild('postId')\r\n        .equalTo(postId)\r\n        .on('value', (snapshot) => {     \r\n            console.log(snapshot.val())   \r\n            setComments(snapshot.val());\r\n        })\r\n    }, [postId]);\r\n    useEffect(()=> {\r\n        getComments();\r\n    }, [getComments])\r\n    return (\r\n        <div className=\"base nweet_comment\">\r\n            <form onSubmit={onSubmit}>\r\n                <div className=\"new_comment base\">\r\n                    {creator && \r\n                    <div className=\"new_comment_profileImg\">\r\n                        <img src={creator.photoURL !== \"\" ? creator.photoURL : PImg} alt=\"profile_image\" /> \r\n                    </div>}\r\n                \r\n                    <div className=\"new_comment_inputText\">\r\n                        <input type=\"text\" onChange={onChange} value={text} placeholder=\"내 답글을 트윗합니다.\" />\r\n                    </div>\r\n                    <div className=\"new_comment_btn base\">\r\n                        <button onClick={onSubmit} aria-disabled={text === \"\"}>답글</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n            <div className='base listView'>\r\n                {\r\n                comments ?\r\n                Object.keys(comments).map((comment) => {\r\n                    return (\r\n                    <Comment commentId={comment} commentObj={comments[comment]} \r\n                    isOwner={comments[comment].creatorId === userObj.uid } />\r\n                    )\r\n                })\r\n                : <span className='noComment'>댓글이 없습니다</span>\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comments;","import { faComment, faHeart } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { faEllipsisH, faHeart as faHeart2, faUpload, faRetweet} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Comments from \"components/Detail/Comments\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport moment from \"moment\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst Detail = withRouter(({match, userObj}) => {\r\n  const [nweet, setNweet] = useState(null);\r\n  const [creator, setCreator] = useState(null);\r\n  const [isHeart, setIsHeart] = useState(false);\r\n\r\n  const postId = match.params.key1;\r\n\r\n  const getNweet = useCallback(async () => {\r\n    firebaseDB.ref('posts/' + postId)\r\n    .on('value', (snapshot) => {     \r\n      console.log(snapshot.val())   \r\n      setNweet(snapshot.val());\r\n    })\r\n  }, [postId] );\r\n\r\n  const getCreator = useCallback(async () => {\r\n    if(nweet !== null){\r\n      firebaseDB.ref('users')\r\n      .orderByChild('uid')\r\n      .equalTo(nweet.creatorId)\r\n      .once('value', snapshot => {\r\n          const user = snapshot.val();\r\n          setCreator(user[Object.keys(user)[0]] );\r\n      });\r\n    }\r\n  }, [nweet]);\r\n\r\n  const heartClick = (event) => {\r\n    event.preventDefault();\r\n    firebaseDB.ref('hearts')\r\n    .orderByChild('value')\r\n    .equalTo(userObj.uid+postId)\r\n    .once('value', snapshot => {\r\n        if(snapshot.exists()){ // 이미 누른적 있는경우\r\n            const hearts = snapshot.val();\r\n            Object.keys(hearts).forEach((heart) => {\r\n                firebaseDB.ref('hearts/' + heart).update({\r\n                    isHeart: !hearts[heart].isHeart\r\n                })\r\n            })                \r\n        } else {\r\n            firebaseDB.ref('hearts').push({\r\n                value:userObj.uid + postId,\r\n                isHeart: true\r\n            });\r\n        }\r\n        const _heartCnt = isHeart ? nweet.heartCnt - 1 : nweet.heartCnt + 1;\r\n        firebaseDB.ref('posts/' + postId).update({\r\n            heartCnt: _heartCnt\r\n        })\r\n        setIsHeart(!isHeart)\r\n    });        \r\n}\r\n\r\n  useEffect( () => {\r\n    if(userObj){\r\n      firebaseDB.ref('hearts')\r\n      .orderByChild('value')\r\n      .equalTo(userObj.uid+postId)\r\n      .once('value', snapshot => {    \r\n          if(snapshot.exists()){\r\n              const hearts = snapshot.val();\r\n              Object.keys(hearts).forEach((heart) => {\r\n                  setIsHeart(hearts[heart].isHeart)\r\n              })\r\n          }\r\n      });\r\n    }\r\n  }, [userObj, postId])\r\n\r\n  useEffect(()=> {\r\n    getNweet();\r\n  }, [getNweet]);\r\n\r\n  useEffect(()=> {\r\n    getCreator();\r\n  }, [getCreator]);\r\n\r\n  return (\r\n    <div className=\"base nweet_detail\">\r\n      {/* 작성자 르포필 */}\r\n      <div className=\"nweet_profile base\">\r\n        <div className=\"profile_image\">\r\n          { creator && \r\n          <Link to={`/search/${creator.uid}`}>\r\n              <img src={creator.photoURL !== \"\" ? creator.photoURL : PImg} alt=\"profile_image\" /> \r\n          </Link>}  \r\n        </div>\r\n        { creator && \r\n        <div className=\"profile_detail base\">\r\n          <Link to={`/search/${creator.uid}`} className=\"profile_displayName\">\r\n            {creator.displayName}\r\n          </Link>\r\n          <span className=\"email\">{creator.email}</span>\r\n        </div>}\r\n        <div>\r\n          <FontAwesomeIcon icon={faEllipsisH} />\r\n        </div>\r\n      </div>\r\n      {/* 내용 및 사진 */}\r\n      <div className=\"base nweet_content bbg\">\r\n        { nweet && \r\n          <span className=\"content_text\">{nweet.text}</span>}{\r\n            nweet && nweet.attachmentUrl && (\r\n                <img src={nweet.attachmentUrl} alt=\"nweet_attachment\" /> ) }\r\n        {nweet && \r\n        <span className=\"content_timestamp\">{moment(nweet.timestamp).format('llll')}</span>}\r\n      </div>\r\n      {/* 리트윗 좋아요 */}\r\n      <div className=\"base nweet_cnt bbg\">\r\n        {<div>\r\n          <span className=\"cnt_title\">49</span>\r\n          <span className=\"cnt_value\">리트윗</span>\r\n        </div>}\r\n        {<div>\r\n          <span className=\"cnt_title\">1</span>\r\n          <span className=\"cnt_value\">인용한 트윗</span>\r\n        </div>}\r\n        { nweet&& nweet.heartCnt !== 0 && \r\n        <div>\r\n          <span className=\"cnt_title\">{nweet.heartCnt}</span>\r\n          <span className=\"cnt_value\">마음에 들어요</span>\r\n        </div>}\r\n      </div>\r\n      {/* 상호작용 버튼 */}\r\n      {nweet &&\r\n      <div className=\"nweet_btn_wrap base bbg\">\r\n        <div className={`base heart${isHeart ? \" active\" : \"\"}`} onClick={heartClick}>\r\n            <button className=\"iconBtn\" id=\"nweet_heart\">\r\n                { isHeart ? <FontAwesomeIcon icon={faHeart2} /> : <FontAwesomeIcon icon={faHeart} /> }\r\n            </button>\r\n            <label htmlFor=\"nweet_heart\">{nweet.heartCnt}</label>\r\n        </div>\r\n        <div className=\"base\">\r\n            <button className=\"iconBtn\" id=\"nweet_comment\">\r\n                <FontAwesomeIcon icon={faComment} />\r\n            </button>\r\n            <label htmlFor=\"nweet_comment\">{nweet.commentCnt}</label>\r\n        </div>\r\n        <div className=\"base\">\r\n            <button className=\"iconBtn\" id=\"nweet_retweet\">\r\n                <FontAwesomeIcon icon={faRetweet} />\r\n            </button>\r\n            <label htmlFor=\"nweet_retweet\">{nweet.retweetCnt}</label>\r\n        </div>\r\n        <div className=\"base\">\r\n            <button className=\"iconBtn\" id=\"nweet_upload\">\r\n                <FontAwesomeIcon icon={faUpload} />\r\n            </button>\r\n        </div>\r\n      </div>  }\r\n      {/* 댓글 */}\r\n      <Comments creator={creator} userObj={userObj} postId={postId} />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Detail;\r\n","import { dbService, firebaseDB, storageService } from \"fbase\";\r\nimport { useState } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPlus, faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst NweetFactory = ({userObj, isUpdate, updateCancel, nweetObj, toggleEditing}) => {\r\n    const [nweet, setNweet] = useState(nweetObj === undefined ? \"\" : nweetObj.text);\r\n    const [attachment, setAttachment] = useState(\"\");\r\n\r\n    const onSubmit = async (event) => {\r\n        event.preventDefault();\r\n        if(nweet === \"\" || !userObj) {\r\n            return;\r\n        }\r\n        const _nweet = nweet;\r\n        const _attachment = attachment;\r\n        setNweet(\"\");\r\n        setAttachment(\"\");  \r\n\r\n        let attachmentUrl = \"\";\r\n        \r\n        if(_attachment !== \"\"){\r\n            const attachmentRef =  storageService\r\n            .ref()\r\n            .child(`${userObj.uid}/${uuidv4()}`);\r\n            const response = await attachmentRef.putString(_attachment, \"data_url\");\r\n            attachmentUrl = await response.ref.getDownloadURL();\r\n        }\r\n        if(attachmentUrl !== \"\" && nweetObj.attachmentUrl !== \"\") {\r\n            await storageService.refFromURL(nweetObj.attachmentUrl).delete();\r\n        }\r\n\r\n        if(!isUpdate){\r\n            firebaseDB.ref(\"/posts\").push({\r\n                text:_nweet,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                creatorName: userObj.displayName,\r\n                creatorEmail: userObj.email,\r\n                attachmentUrl,\r\n                heartCnt: 0,\r\n                commentCnt: 0,\r\n                retweetCnt:0\r\n            });\r\n        } else {\r\n            firebaseDB.ref(\"/posts/\"+ nweetObj.key).update({\r\n                text:_nweet,\r\n                attachmentUrl: (nweetObj && nweetObj.attachmentUrl && attachmentUrl === \"\" ? nweetObj.attachmentUrl : attachmentUrl)\r\n            });\r\n\r\n            toggleEditing();\r\n        }\r\n    }\r\n\r\n    const onChange = (event) => {\r\n        event.preventDefault();\r\n        const { target : {value },} = event;\r\n            setNweet(value);\r\n    }\r\n\r\n    const onClearAttachment = () => {setAttachment(\"\")}\r\n\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            setAttachment(result);\r\n        }\r\n\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={onSubmit} className=\"factoryForm base\">\r\n            <div className=\"factoryInput_profile base\">\r\n                <img src={userObj ? userObj.photoURL : PImg} alt=\"profile_image\" /> \r\n            </div>\r\n            <div className=\"factoryInput__container base\">\r\n                <div className=\"factoryInput_text\">\r\n                    <input \r\n                        className=\"factoryInput__input\"\r\n                        value={nweet}\r\n                        onChange={onChange}\r\n                        type=\"text\"\r\n                        placeholder=\"What's happening\"\r\n                        maxLength={120}\r\n                    />\r\n                </div>\r\n                { attachment && \r\n                    (<div className=\"factoryForm__attachment base\">\r\n                        <img src={attachment} style={{backgroundImage: attachment,}} alt=\"attachment\" />\r\n                        <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\r\n                            {/* <span>Remove</span> */}\r\n                            <FontAwesomeIcon icon={faTimesCircle} />\r\n                        </div>\r\n                    </div>\r\n                    )}\r\n                <div className={`factoryInput_button base ${isUpdate ? 'update' : ''}`}>\r\n                    <input type=\"submit\" value={isUpdate ? 'Update' : 'Tweet'} className=\"factoryInput__arrow\" aria-disabled={nweet === \"\" || !userObj} />\r\n                    { isUpdate && \r\n                    <input type=\"button\" value=\"Cancel\" className=\"cancelBtn factoryInput__arrow mgr120\" onClick={updateCancel} />\r\n                    }\r\n                    \r\n                    <input id=\"attach-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n                    <label htmlFor=\"attach-file\" className=\"factoryInput__label\">\r\n                        <span>Add photos</span>\r\n                        <FontAwesomeIcon icon={faPlus} />\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            \r\n        </form>\r\n    )\r\n};\r\n\r\nexport default NweetFactory; ","import { dbService, firebaseDB, storageService} from \"fbase\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faComment, faHeart } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { faTrash, faPencilAlt, faHeart as faHeart2, faUpload, faRetweet} from \"@fortawesome/free-solid-svg-icons\";\r\nimport PImg from '../img/default_profile_normal.png';\r\nimport Moment from 'react-moment';\r\nimport { Link, NavLink, useHistory } from \"react-router-dom\";\r\nimport NweetFactory from \"./NweetFactory\";\r\n\r\nconst Nweet = ({nweet_key, nweetObj, isOwner, userObj, viewRef }) => {\r\n    const [editing, setEditing] = useState(false);\r\n    const [creator, setCreator] = useState(null)\r\n    const [isHeart, setIsHeart] = useState(false);\r\n\r\n    const onDeleteClick = async (event) =>{\r\n        event.preventDefault();\r\n        const ok = window.confirm(\"삭제 ㄱ?\");\r\n\r\n        if(ok) {\r\n            firebaseDB.ref(`/posts/${nweetObj.key}`).remove();\r\n\r\n            if(nweetObj.attachmentUrl !== \"\") {\r\n                await storageService.refFromURL(nweetObj.attachmentUrl).delete();\r\n            }\r\n        }\r\n    }\r\n\r\n    const toggleEditing = (event) => {\r\n        if(event !== undefined){\r\n            event.preventDefault();\r\n            const {target:{parentNode}} = event;\r\n            const updateElement = document.getElementsByClassName('update');\r\n\r\n            if(updateElement.length !== 0 && parentNode.classList[2] !== \"update\"){\r\n                document.getElementsByClassName('cancelBtn')[0].click();\r\n            }\r\n        }\r\n        setEditing( (prev) => !prev)\r\n    };\r\n    const heartClick = (event) => {\r\n        event.preventDefault();\r\n        firebaseDB.ref('hearts')\r\n        .orderByChild('value')\r\n        .equalTo(userObj.uid+nweetObj.key)\r\n        .once('value', snapshot => {\r\n            if(snapshot.exists()){ // 이미 누른적 있는경우\r\n                const hearts = snapshot.val();\r\n                Object.keys(hearts).forEach((heart) => {\r\n                    firebaseDB.ref('hearts/' + heart).update({\r\n                        isHeart: !hearts[heart].isHeart\r\n                    })\r\n                })                \r\n            } else {\r\n                firebaseDB.ref('hearts').push({\r\n                    value:userObj.uid + nweetObj.key,\r\n                    isHeart: true\r\n                });\r\n            }\r\n            const _heartCnt = isHeart ? nweetObj.heartCnt - 1 : nweetObj.heartCnt + 1;\r\n            firebaseDB.ref('posts/' + nweetObj.key).update({\r\n                heartCnt: _heartCnt\r\n            })\r\n            setIsHeart(!isHeart)\r\n        });        \r\n    }\r\n\r\n    useEffect( () => {\r\n        if(nweetObj){\r\n            firebaseDB.ref('users')\r\n            .orderByChild('uid')\r\n            .startAt(nweetObj.creatorId)\r\n            .endAt(nweetObj.creatorId+\"\\uf8ff\")\r\n            .once('value', snapshot => {\r\n                const user = snapshot.val();\r\n                setCreator(user[Object.keys(user)[0]] );\r\n            });\r\n        }\r\n    }, [nweetObj])\r\n\r\n    useEffect( () => {\r\n        if(userObj && nweetObj){\r\n            firebaseDB.ref('hearts')\r\n            .orderByChild('value')\r\n            .equalTo(userObj.uid+nweetObj.key)\r\n            .once('value', snapshot => {    \r\n                if(snapshot.exists()){\r\n                    const hearts = snapshot.val();\r\n                    Object.keys(hearts).forEach((heart) => {\r\n                        setIsHeart(hearts[heart].isHeart)\r\n                    })\r\n                }\r\n            });\r\n        }\r\n    }, [nweetObj, userObj])\r\n\r\n    return (\r\n        \r\n        <div className={`nweet ${editing ? 'update' : ''}`} ref={viewRef} >\r\n            {editing ? (\r\n                <>\r\n                <NweetFactory userObj={userObj} isUpdate={true} updateCancel={toggleEditing}\r\n                nweetObj={nweetObj} toggleEditing={toggleEditing} />\r\n                </>\r\n            ) :\r\n            <NavLink to={`/nweet/${nweetObj.key}`}>\r\n                <div className=\"nweet_container base\" >\r\n                    <div className=\"nweet_profile base\">\r\n                        { creator && \r\n                        <Link to={`/search/${creator.uid}`}>\r\n                            <img src={creator !== null ? (creator.photoURL !== \"\" ? creator.photoURL : PImg)  : \"\"} \r\n                            alt=\"profile_image\" /> \r\n                        </Link>\r\n                        }  \r\n                    </div>\r\n                    <div className=\"nweet_content base\">\r\n                        { creator && \r\n                        <div className=\"nweet_profile_name_container base\">\r\n                            <Link to={`/search/${creator.uid}`} className=\"profile_displayName\">{creator.displayName}</Link>\r\n                            <Moment fromNow className=\"fromNow\">{nweetObj.createdAt}</Moment>\r\n                            {\r\n                                isOwner && (\r\n                                    <div className=\"nweet__actions\">\r\n                                        <span onClick={onDeleteClick}>\r\n                                            <FontAwesomeIcon icon={faTrash} />\r\n                                        </span>\r\n                                        <span onClick={toggleEditing}>\r\n                                            <FontAwesomeIcon icon={faPencilAlt} />\r\n                                        </span>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </div>}\r\n                        <div className=\"nweet_content_box base\">\r\n                            <span>{nweetObj.text}</span>\r\n                            {\r\n                                nweetObj.attachmentUrl && (\r\n                                    <img src={nweetObj.attachmentUrl} alt=\"nweet_attachment\" /> \r\n                                )\r\n                            }\r\n                            <div className=\"nweet_btn_wrap base\">\r\n                                <div className={`base heart${isHeart ? \" active\" : \"\"}`} onClick={heartClick}>\r\n                                    <button className=\"iconBtn\" id=\"nweet_heart\">\r\n                                        { isHeart ? <FontAwesomeIcon icon={faHeart2} /> : <FontAwesomeIcon icon={faHeart} /> }\r\n                                    </button>\r\n                                    <label htmlFor=\"nweet_heart\">{nweetObj.heartCnt}</label>\r\n                                </div>\r\n                                <div className=\"base\">\r\n                                    <button className=\"iconBtn\" id=\"nweet_comment\">\r\n                                        <FontAwesomeIcon icon={faComment} />\r\n                                    </button>\r\n                                    <label htmlFor=\"nweet_comment\">{nweetObj.commentCnt}</label>\r\n                                </div>\r\n                                <div className=\"base\">\r\n                                    <button className=\"iconBtn\" id=\"nweet_retweet\">\r\n                                        <FontAwesomeIcon icon={faRetweet} />\r\n                                    </button>\r\n                                    <label htmlFor=\"nweet_retweet\">{nweetObj.retweetCnt}</label>\r\n                                </div>\r\n                                <div className=\"base\">\r\n                                    <button className=\"iconBtn\" id=\"nweet_upload\">\r\n                                        <FontAwesomeIcon icon={faUpload} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>  \r\n                        </div>\r\n                        \r\n                    </div> \r\n                </div>\r\n            </NavLink>\r\n        }\r\n        </div>\r\n    )\r\n}\r\nexport default Nweet; ","export const reverseObject = (object) => {\r\n    var newObject = {};\r\n    var keys = [];\r\n\r\n    for (var key in object) {\r\n        keys.push(key);\r\n    }\r\n    for (var i = keys.length - 1; i >= 0; i--) {\r\n        var value = object[keys[i]];\r\n        value.key = keys[i];\r\n        const key = keys.length - 1 - i;\r\n        newObject[key] = value;\r\n    }       \r\n\r\n    return newObject;\r\n}\r\n\r\nexport const toArrayObject = (object) => {\r\n    var newObject = [];\r\n    var keys = [];\r\n\r\n    for (var key in object) {\r\n        keys.push(key);\r\n    }\r\n    for (var i = 0; i < keys.length; i++) {\r\n        var value = object[keys[i]];\r\n        value.key = keys[i];\r\n        if(value.isFollow){\r\n            newObject.push(value)\r\n        }        \r\n    }\r\n\r\n    return newObject;\r\n}","import Nweet from \"components/Nweet\";\r\nimport NweetFactory from \"components/NweetFactory\";\r\nimport { dbService, firebaseDB } from \"fbase\";\r\nimport { reverseObject } from \"helpers/help\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Home = ({match, userObj}) => {\r\n  const [nweets, setNweets] = useState({});\r\n  const [ref, inView] = useInView()\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false)\r\n  \r\n  const getNweets = useCallback(async () => {\r\n    setLoading(true)\r\n    const ref = firebaseDB.ref('posts');\r\n    ref\r\n    .orderByChild('createdAt')\r\n    .limitToLast(10 * page)\r\n    .on('value', (snapshot) => {        \r\n      setNweets(reverseObject(snapshot.val()));\r\n    })\r\n\r\n    setLoading(false);\r\n  }, [page] );\r\n\r\n  useEffect(() => {\r\n    getNweets();\r\n  }, [getNweets]);\r\n\r\n  useEffect( () => {\r\n    console.log(inView)\r\n    if (inView && !loading) {\r\n      setPage(page => page + 1)\r\n    }\r\n  }, [inView, loading])\r\n\r\n  return (\r\n    <div>\r\n      <NweetFactory userObj={userObj}  />\r\n      <div className={`base ${nweets ? \"postList\" : \"noPostList\"}`}> \r\n        {\r\n          nweets ?\r\n          Object.keys(nweets).map((nweet) => {\r\n            return (\r\n              <Nweet key={nweet} nweet_key={nweet} nweetObj={nweets[nweet]} \r\n              userObj={userObj} viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null} />\r\n            )\r\n          })\r\n          : <span>글이 없습니다</span>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Home;\r\n","import { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport CoverImgModal from \"./CoverImgModal\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport React, { useRef, useState } from \"react\";\r\n\r\nconst CoverImgEditModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal, prevCover}) => {\r\n\r\n    const [crop, setCrop] = useState({\r\n        unit: \"px\",\r\n        width: 500,\r\n        height: 200,\r\n        aspect: 16 / 9\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const imageRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [croppedImageUrl, setCroppedImageUrl] = useState(\"\");\r\n    const [fileUrl, setFileUrl] = useState(\"\");\r\n\r\n    const onImageLoaded = (image) => {\r\n        imageRef.current = image;\r\n    };\r\n\r\n    const onChange = (_crop) => {\r\n        setCrop(_crop);\r\n        console.log(_crop)\r\n        if(imageRef.current !== null) {\r\n            const y_val = (_crop.y - 25) + \"px\";\r\n            imageRef.current.style.bottom = y_val;\r\n        }  \r\n    }\r\n\r\n    const onCropComplete = (crop) => {\r\n        setCompletedCrop(crop)\r\n        makeClineCrop(crop);        \r\n    }\r\n\r\n    const makeClineCrop = async (crop)  =>{\r\n        if (imageRef && crop.width && crop.height) {\r\n            const croppedImageUrl = await getCroppedImg();\r\n            setCroppedImageUrl(croppedImageUrl);\r\n            setProfileImg(croppedImageUrl);\r\n        }\r\n    }\r\n\r\n    const getCroppedImg = () =>{\r\n        if (!completedCrop || !previewCanvasRef.current || !imageRef.current) {\r\n            return;\r\n        }\r\n        const image = imageRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n    \r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext('2d');\r\n        const pixelRatio = window.devicePixelRatio;\r\n    \r\n        canvas.width = 500;\r\n        canvas.height = 200;\r\n        canvas.style.width = \"500px\";\r\n        canvas.style.height = \"200px\";\r\n    \r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = 'high';\r\n    \r\n        ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            500,\r\n            200\r\n        ); \r\n\r\n        console.log(\"cap\")\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob(\r\n                (blob) => {\r\n                    if (!blob) {\r\n                        console.error('Canvas is empty');\r\n                        return;\r\n                    }\r\n                    blob.name = \"newFile.jpeg\";\r\n                    window.URL.revokeObjectURL(fileUrl);\r\n                    setFileUrl(window.URL.createObjectURL(blob));\r\n                    resolve(fileUrl);\r\n                },\r\n                'image/jpeg',\r\n                1\r\n            );\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile_modal base profile_edit_modal\">\r\n            <div className=\"profile_edit_nav base\">\r\n                <button className=\"cancelBtn\" onClick={() => {\r\n                    setModalNum(1);\r\n                    setModalContent(\r\n                        <CoverImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={profileImg}\r\n                            coverImg={prevCover}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                    />);\r\n                }} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <span>미디어 편집</span>\r\n                <div>\r\n                    <button className=\"okBtn\" aria-disabled={fileUrl === \"\"} onClick={() => {\r\n                        if(fileUrl === \"\") return;\r\n                        setModalNum(3);\r\n                        setModalContent(\r\n                            <CoverImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={profileImg}\r\n                            coverImg={fileUrl}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                        />);\r\n                    }} >적용하기</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"img_preview base center \">\r\n                {coverImg && (\r\n                \r\n                <ReactCrop\r\n                    src={coverImg}\r\n                    crop={crop}\r\n                    ruleOfThirds\r\n                    onImageLoaded={(i) => onImageLoaded(i)}\r\n                    onChange={(c, pc) => onChange(c)}\r\n                    onCropChange\r\n                    onComplete={(c, pc) => onCropComplete(c)}\r\n                    locked={true}\r\n                    className=\"cover_crop\"\r\n                />\r\n                )}\r\n                {coverImg && (\r\n                    <div>\r\n                    <canvas\r\n                      ref={previewCanvasRef}\r\n                      style={{\r\n                        width: Math.round(completedCrop?.width ?? 0),\r\n                        height: Math.round(completedCrop?.height ?? 0)\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default CoverImgEditModal;","import { faArrowLeft, faCamera } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB, storageService } from \"fbase\";\r\nimport { useHistory } from \"react-router\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport CoverImgEditModal from \"./CoverImgEditModal\";\r\nimport ProfileImgModal from \"./ProfileImgModal\";\r\n\r\n\r\nconst CoverImgModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal}) => {\r\n    const history = useHistory();\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        \r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            const prevCover = coverImg;\r\n            setCoverImg(result);\r\n            setModalContent(\r\n                <CoverImgEditModal\r\n                    setModalContent={setModalContent} \r\n                    userObj={userObj}\r\n                    setModalNum={setModalNum}\r\n                    profileImg={profileImg}\r\n                    coverImg={result}\r\n                    prevCover={prevCover}\r\n                    openModal={openModal}\r\n                    setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                />\r\n            );\r\n        }\r\n\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n\r\n    const uploadToStorage = async (isProfile, imageURL, ref) => {\r\n        await getFileBlob(imageURL, ref, blob =>{\r\n            ref.put(blob).then(async function(snapshot) {\r\n\r\n               const downURL = await snapshot.ref.getDownloadURL();\r\n\r\n               if(isProfile){   \r\n                   console.log(\"profile\")\r\n                    await userObj.updateProfile({\r\n                        photoURL: downURL\r\n                    });\r\n                    firebaseDB.ref('users/' + userObj.userId).update({\r\n                        photoURL: downURL  \r\n                    }).then(function(){\r\n                        history.go(0);\r\n                    });\r\n                } else {\r\n                    console.log(\"cover\")\r\n                    firebaseDB.ref('users/' + userObj.userId).update({\r\n                        coverURL: downURL  \r\n                    }).then(function(){\r\n                        if(profileImg === \"\"){\r\n                            history.go(0);\r\n                        }                        \r\n                    });\r\n                }\r\n            });\r\n        })\r\n   }\r\n\r\n    const getFileBlob = function (url,ref, cb) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"GET\", url);\r\n        xhr.responseType = \"blob\";\r\n        xhr.addEventListener('load', function() {\r\n            console.log(\"load\")\r\n            cb(xhr.response, ref);\r\n        });\r\n        xhr.send();\r\n    };\r\n    const profileUpdate = async (event) => {\r\n        event.preventDefault();\r\n\r\n        if(profileImg !== \"\"){\r\n            \r\n            const attachmentRef =  storageService\r\n            .ref();\r\n\r\n            if(userObj.coverURL !== \"\"){\r\n                const startNum = userObj.photoURL.lastIndexOf('%2F')+3;\r\n                attachmentRef.child(`${userObj.uid}/profile/${userObj.photoURL.substr(startNum,36)}`).delete();\r\n            }\r\n            const uploadRef = attachmentRef.child(`${userObj.uid}/profile/${uuidv4()}`);\r\n            await uploadToStorage(true, profileImg, uploadRef);\r\n        }\r\n        if(coverImg !== \"\"){\r\n            const attachmentRef =  storageService\r\n            .ref();\r\n            \r\n            if(userObj.coverURL !== \"\"){\r\n                const startNum = userObj.coverURL.lastIndexOf('%2F')+3;\r\n                attachmentRef.child(`${userObj.uid}/cover/${userObj.coverURL.substr(startNum,36)}`).delete();\r\n            }\r\n            const uploadRef = attachmentRef.child(`${userObj.uid}/cover/${uuidv4()}`);\r\n            await uploadToStorage(false, coverImg, uploadRef);\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <div className=\"cover_modal base\">\r\n            <div className=\"profile_edit_nav base\">\r\n                <button className=\"cancelBtn\" onClick={() => {\r\n                        setModalNum(1);\r\n                        setModalContent(\r\n                            <ProfileImgModal \r\n                                setModalContent={setModalContent} \r\n                                userObj={userObj}\r\n                                setModalNum={setModalNum}\r\n                                profileImg={profileImg}\r\n                                coverImg={coverImg}\r\n                                openModal={openModal}\r\n                                setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                        />);\r\n                    }} >\r\n                        <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                    </button>\r\n                    <span>미디어 편집</span>\r\n                    <div>\r\n                        <button className=\"okBtn\" onClick={(event) => profileUpdate(event)} >Save</button>\r\n                    </div>\r\n            </div>\r\n\r\n            <div className=\"base\">\r\n                <div className=\"img_preview base center \">\r\n                    {coverImg !== \"\" && (<img className=\"main_img\" src={coverImg} alt=\"cover_img\" />) }\r\n                    <div className=\"profile_img_back\"></div>\r\n                    <label htmlFor=\"cover-file\">\r\n                        <FontAwesomeIcon icon={faCamera} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                    </label>\r\n                </div>\r\n                <div className=\"base sub_img_container\">\r\n                    <img className=\"sub_img\" src={profileImg === \"\" ? userObj.photoURL : profileImg} alt=\"profile_image\" /> \r\n                    <span className=\"profile_name\">{userObj.displayName}</span>\r\n                    <span className=\"user_id\">{userObj.userId}</span>\r\n                </div>\r\n                <input id=\"cover-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CoverImgModal; ","import { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport CoverImgModal from \"./CoverImgModal\";\r\nimport ProfileImgModal from \"./ProfileImgModal\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport React, { useRef, useState } from \"react\";\r\n\r\nconst ProfileImgEditModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal, prevProfile}) => {\r\n    const [crop, setCrop] = useState({\r\n        unit: \"px\",\r\n        width: 500,\r\n        height: 450,\r\n        aspect: 16 / 9\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const imageRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [croppedImageUrl, setCroppedImageUrl] = useState(\"\");\r\n    const [fileUrl, setFileUrl] = useState(\"\");\r\n\r\n    const [imgForm, setImgForm] = useState(0);\r\n\r\n    const onImageLoaded = (image) => {\r\n        imageRef.current = image;\r\n        if(imageRef.current !== null) {\r\n            const h = imageRef.current.clientHeight;\r\n            const w = imageRef.current.clientWidth;\r\n            \r\n            if(w < h){\r\n                setCrop({\r\n                    width: 500,\r\n                    height: 450,\r\n                    aspect: 16 / 9\r\n                });\r\n            } else {\r\n                setCrop({\r\n                    width: 450,\r\n                    height: 500,\r\n                    aspect: 9 / 16\r\n                });\r\n                imageRef.current.style.left = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    const onChange = (_crop, percent_crop) => {\r\n        setCrop(_crop);\r\n        if(imageRef.current !== null) {\r\n            const h = imageRef.current.clientHeight;\r\n            const w = imageRef.current.clientWidth;\r\n            \r\n            if(w < h){\r\n                setImgForm(1)\r\n                if(_crop.y > h-450) _crop.y = h-450;\r\n                const y_val = (_crop.y - 25) + \"px\";\r\n                imageRef.current.style.bottom = y_val;\r\n            } else if(w > h){ //옆으로 긴거\r\n                setImgForm(2)\r\n                let x_val = (_crop.x - 365)\r\n                if(x_val > 0) x_val = 0\r\n                if(x_val < h-w-25) x_val = h-w-25\r\n                imageRef.current.style.left = x_val + \"px\";;\r\n            } else {}\r\n        }  \r\n    }\r\n\r\n    const onCropComplete = (crop, percent_crop) => {\r\n        setCompletedCrop(crop)\r\n        makeClineCrop(crop);        \r\n    }\r\n\r\n    const makeClineCrop = async (crop)  =>{\r\n        if (imageRef && crop.width && crop.height) {\r\n            const croppedImageUrl = await getCroppedImg();\r\n            setCroppedImageUrl(croppedImageUrl);\r\n            setProfileImg(croppedImageUrl);\r\n        }\r\n    }\r\n\r\n    const getCroppedImg = () =>{\r\n        if (!completedCrop || !previewCanvasRef.current || !imageRef.current) {\r\n            return;\r\n        }\r\n\r\n        const h = imageRef.current.clientHeight;\r\n        const w = imageRef.current.clientWidth;\r\n\r\n        const image = imageRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n    \r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext('2d');\r\n        const pixelRatio = window.devicePixelRatio;\r\n    \r\n        if(w<h){\r\n            canvas.width = 500;\r\n            canvas.height = 450;\r\n            canvas.style.width = \"500px\";\r\n            canvas.style.height = \"450px\";\r\n        } else {\r\n            canvas.width = 450;\r\n            canvas.height = 500;\r\n            canvas.style.width = \"450px\";\r\n            canvas.style.height = \"500px\";\r\n        }\r\n    \r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = 'high';\r\n    \r\n        if(w<h){\r\n            ctx.drawImage(\r\n                image,\r\n                crop.x * scaleX,\r\n                crop.y * scaleY,\r\n                crop.width * scaleX,\r\n                crop.height * scaleY,\r\n                0,\r\n                0,\r\n                500,\r\n                450\r\n            ); \r\n        } else {\r\n            const _x = 385 - (crop.x > 145 ? crop.x : 145);\r\n            console.log(_x + \" : \" + crop.x)\r\n            ctx.drawImage(\r\n                image,\r\n                _x,\r\n                0,\r\n                crop.width * scaleX,\r\n                crop.height * scaleY,\r\n                0,\r\n                0,\r\n                450,\r\n                500\r\n            ); \r\n        }       \r\n        console.log(\"cap\")\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob(\r\n                (blob) => {\r\n                    if (!blob) {\r\n                    //reject(new Error('Canvas is empty'));\r\n                    console.error('Canvas is empty');\r\n                    return;\r\n                    }\r\n                    blob.name = \"newFile.jpeg\";\r\n                    window.URL.revokeObjectURL(fileUrl);\r\n                    setFileUrl(window.URL.createObjectURL(blob));\r\n                    resolve(fileUrl);\r\n                    console.log(fileUrl)\r\n                },\r\n                'image/jpeg',\r\n                1\r\n            );\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile_modal base profile_edit_modal\">\r\n            <div className=\"profile_edit_nav base\">\r\n                <button className=\"cancelBtn\" onClick={() => {\r\n                    setModalNum(1);\r\n                    setModalContent(\r\n                        <ProfileImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={prevProfile}\r\n                            coverImg={coverImg}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                    />);\r\n                }} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <span>미디어 편집</span>\r\n                <div>\r\n                    <button className=\"okBtn\" aria-disabled={fileUrl === \"\"} onClick={() => {\r\n                        if(fileUrl === \"\")return;\r\n                        setModalNum(3);\r\n                        setModalContent(\r\n                            <CoverImgModal \r\n                            setModalContent={setModalContent} \r\n                            userObj={userObj}\r\n                            setModalNum={setModalNum}\r\n                            profileImg={fileUrl}\r\n                            coverImg={coverImg}\r\n                            openModal={openModal}\r\n                            setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                        />);\r\n                    }} >적용하기</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"img_preview base center \">\r\n                {profileImg && (\r\n                <ReactCrop\r\n                    src={profileImg}\r\n                    crop={crop}\r\n                    ruleOfThirds\r\n                    onImageLoaded={(i) => onImageLoaded(i)}\r\n                    onChange={(c, pc) => onChange(c, pc)}\r\n                    onCropChange\r\n                    onComplete={(c, pc) => onCropComplete(c, pc)}\r\n                    locked={true}\r\n                    className={imgForm === 1 ? \"rCrop_wBig\" : (imgForm === 2 ? \"rCrop_hBig\" : \"rCrop_square\")}\r\n                />\r\n                )}\r\n                {profileImg && (\r\n                    <div>\r\n                    <canvas\r\n                      ref={previewCanvasRef}\r\n                      style={{\r\n                        width: Math.round(completedCrop?.width ?? 0),\r\n                        height: Math.round(completedCrop?.height ?? 0)\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ProfileImgEditModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport CoverImgModal from \"./CoverImgModal\";\r\nimport ProfileImgEditModal from \"./ProfileImgEditModal\";\r\n\r\nconst ProfileImgModal = ({setModalContent, userObj, setModalNum, profileImg, coverImg, setProfileImg, setCoverImg, openModal}) => {\r\n\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        \r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            const prevProfile = profileImg;\r\n\r\n            setProfileImg(result);\r\n            setModalContent(\r\n                <ProfileImgEditModal\r\n                    setModalContent={setModalContent} \r\n                    userObj={userObj}\r\n                    setModalNum={setModalNum}\r\n                    profileImg={result}\r\n                    coverImg={coverImg}\r\n                    prevProfile={prevProfile}\r\n                    openModal={openModal}\r\n                    setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                />\r\n            );\r\n        }\r\n\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n    \r\n    return (\r\n        <div className=\"profile_modal base\">\r\n            <div className=\"base center\">\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"base\">\r\n                <span className=\"text1\">\r\n                    Prick a profile picture\r\n                </span>\r\n            </div>\r\n            <div className=\"base\">\r\n                <span className=\"text2\">\r\n                    Have a favorite selfie? Upload it now.\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"img_preview base center \">\r\n                <img className=\"main_img\" src={profileImg === \"\" ? userObj.photoURL : profileImg} alt=\"profile_image\" /> \r\n                <div className=\"profile_img_back\"></div>\r\n                <label htmlFor=\"profile-file\">\r\n                    <FontAwesomeIcon icon={faCamera} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                </label>\r\n            </div>\r\n\r\n            <button onClick={() => {\r\n                setModalNum(3);\r\n                setModalContent(\r\n                    <CoverImgModal \r\n                    setModalContent={setModalContent} \r\n                    userObj={userObj}\r\n                    setModalNum={setModalNum}\r\n                    profileImg={profileImg}\r\n                    coverImg={coverImg}\r\n                    openModal={openModal}\r\n                    setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n                />);\r\n            }} >skip</button>\r\n            <input id=\"profile-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n        </div>\r\n    )\r\n}\r\nexport default ProfileImgModal;","import ProfileImgModal from 'Modal/profile/ProfileImgModal';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ko';\r\nimport React, { useEffect, useState } from 'react';\r\nimport ReactModal from 'react-modal';\r\n\r\nconst ProfileEdit = ({userObj}) => {\r\n    const timestamp = userObj !== null ? userObj.timestamp : \"\";\r\n    const email = userObj !== null ? userObj.email : \"\";\r\n    const displayName = userObj !== null ? userObj.displayName : \"\";\r\n    const photoURL = userObj !== null ? userObj.photoURL : \"\";\r\n    const coverURL = userObj !== null ? userObj.coverURL : \"\";\r\n    const followCnt = userObj !== null ? userObj.followCnt : \"\";\r\n    const followingCnt = userObj !== null ? userObj.followingCnt : \"\";\r\n\r\n    const [profileImg, setProfileImg] = useState(\"\");\r\n    const [coverImg, setCoverImg] = useState(\"\");\r\n\r\n    const [isModal, setIsModal] = useState(false);\r\n    const [modalNum, setModalNum] = useState(0);\r\n    const [modalContent, setModalContent] = useState(null);\r\n\r\n    const setProfileModal = (img) =>{\r\n        setProfileImg(img);\r\n        setModalContent(\r\n            <ProfileImgModal\r\n                setModalContent={setModalContent} \r\n                userObj={userObj}\r\n                setModalNum={setModalNum}\r\n                profileImg={img}\r\n                coverImg={coverURL}\r\n                openModal={openModal}\r\n                setProfileImg={setProfileImg} setCoverImg={setCoverImg}\r\n            />\r\n        );\r\n    }\r\n\r\n    const openModal = () => {\r\n        console.log(isModal)\r\n        if(!isModal)\r\n            setProfileModal(profileImg)\r\n        setIsModal(!isModal);\r\n        setModalNum(isModal ? 0 : 1);\r\n    }\r\n\r\n    const onRequestClose = async () => {\r\n        openModal(); \r\n        setModalNum(0);\r\n        setProfileModal(\"\");        \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"profileEdit_container base\">\r\n                <div className=\"cover_image base\">\r\n                    {\r\n                        coverURL !== \"\" && <img src={coverURL} \r\n                        alt=\"cover_image\" /> \r\n                    }\r\n                </div>\r\n                <div className=\"profile_container base\">\r\n                    <form>\r\n                        <button className=\"edit_profile\" onClick={openModal}>Set up profile</button>\r\n                    </form>\r\n                    <img src={photoURL} \r\n                        alt=\"profile_image\" /> \r\n                    <span className=\"profile_name\">{displayName}</span>\r\n                    <span className=\"user_id\">{email}</span>\r\n                    <span className=\"join_date\">가입일 {moment(timestamp).format('ll')}</span>\r\n                    <div className=\"follow_wrap\">\r\n                        <span className=\"f_cnt\">{followCnt}</span>\r\n                        <span className=\"f_text\">팔로우 중</span>\r\n                        <span className=\"f_cnt\">{followingCnt}</span>\r\n                        <span className=\"f_text\">팔로워</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <ReactModal \r\n                    shouldCloseOnOverlayClick={true}\r\n                    shouldCloseOnEsc={false}\r\n                    onRequestClose={()=> onRequestClose() }\r\n                    isOpen={isModal}\r\n                    ariaHideApp={false}\r\n                    appElement={document.getElementById('app')}\r\n                    className=\"setProfileModal base\"\r\n                >\r\n                    {modalContent}\r\n                </ReactModal>\r\n            </div>\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default ProfileEdit; ","import Nweet from \"components/Nweet\";\r\nimport ProfileEdit from \"components/ProfileEdit\";\r\nimport { dbService, firebaseDB } from \"fbase\";\r\nimport { reverseObject } from \"helpers/help\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst Profile = ({userObj, refreshUser}) => {\r\n    const [nweets, setNweets] = useState([]);\r\n    const [ref, inView] = useInView()\r\n    const [page, setPage] = useState(1);\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const getMyNweets = useCallback(async () => {\r\n        if(userObj) {\r\n            const ref = firebaseDB.ref('posts');\r\n            ref\r\n            .orderByChild('creatorId')\r\n            .equalTo(userObj.uid)\r\n            .limitToLast(10 * page)\r\n            .on('value', (snapshot) => {\r\n                setNweets(reverseObject(snapshot.val()));\r\n            })\r\n        }\r\n    }, [userObj,page]);\r\n\r\n    useEffect(()=> {\r\n        getMyNweets();\r\n    }, [getMyNweets]);\r\n    useEffect(()=> {\r\n        refreshUser();\r\n    }, [refreshUser]);\r\n\r\n    useEffect( () => {\r\n        if (inView && !loading) {\r\n            setPage(page => page + 1)\r\n        }\r\n    }, [inView, loading])\r\n    \r\n    return (\r\n        <div>\r\n            <ProfileEdit userObj={userObj} />\r\n            <div className=\"base\">\r\n                {\r\n                    nweets && Object.keys(nweets).map((nweet) => {\r\n                        return (<Nweet key={nweet} nweetObj={nweets[nweet]} userObj={userObj}\r\n                            isOwner={nweets[nweet].creatorId === userObj.uid} \r\n                            viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null}/>\r\n                            )\r\n                        }\r\n                    )\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Profile);","import Nweet from \"components/Nweet\";\r\nimport { firebaseDB,  } from \"fbase\";\r\nimport { reverseObject } from \"helpers/help\";\r\nimport moment from \"moment\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Search = withRouter(({match, userObj, refreshUser}) => {\r\n  const [nweets, setNweets] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const uid = match.params.key1;\r\n\r\n  const [ref, inView] = useInView()\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false)\r\n  const [isFollow, setIsFollow] = useState(false);\r\n\r\n  const [followCnt, setfollowCnt] = useState(0);\r\n  const [followingCnt, setfollowingCnt] = useState(0);\r\n  const [loginfollowCnt, setLoginfollowCnt] = useState(0);\r\n  \r\n  const getNweets = useCallback(async () => {\r\n    setLoading(true)\r\n    const ref = firebaseDB.ref('posts');\r\n    ref\r\n    .orderByChild('creatorId')\r\n    .startAt(uid)\r\n    .endAt(uid+\"\\uf8ff\")\r\n    .limitToLast(10 * page)\r\n    .on('value', (snapshot) => {        \r\n      setNweets(reverseObject(snapshot.val()));\r\n    })\r\n\r\n    setLoading(false);\r\n  }, [page, uid] );\r\n\r\n  const followClick = (event) => {\r\n    event.preventDefault();\r\n    firebaseDB.ref('follows')\r\n    .orderByChild('value')\r\n    .equalTo(userObj.uid+uid)\r\n    .once('value', snapshot => {\r\n        if(snapshot.exists()){ // 이미 누른적 있는경우\r\n            const follows = snapshot.val();\r\n            Object.keys(follows).forEach((follow) => {\r\n              firebaseDB.ref('follows/' + follow).update({\r\n                  isFollow: !follows[follow].isFollow\r\n              })\r\n            })                \r\n        } else {\r\n            firebaseDB.ref('follows').push({\r\n                value: userObj.uid + uid,\r\n                isFollow: true,\r\n                from:userObj.uid,\r\n                to:uid\r\n            });\r\n        }\r\n        const _followCnt = loginfollowCnt + (snapshot.exists() && isFollow ? -1 : 1)\r\n        const _followingCnt = followingCnt + (snapshot.exists() && isFollow ? -1 : 1)\r\n\r\n        console.log(loginfollowCnt)\r\n        console.log(_followCnt)\r\n        firebaseDB.ref('users/' + userObj.userId).update({\r\n            followCnt: _followCnt\r\n        })\r\n        firebaseDB.ref('users/' + userId).update({\r\n          followingCnt: _followingCnt\r\n        })\r\n        setfollowingCnt(_followingCnt)\r\n        setLoginfollowCnt(_followCnt)\r\n        setIsFollow(!isFollow)\r\n\r\n        refreshUser();\r\n    });  \r\n  }\r\n\r\n  const getFollow = useCallback(() => {\r\n    if(userObj !== null && uid){  \r\n      firebaseDB.ref('follows')\r\n      .orderByChild('value')\r\n      .equalTo(userObj.uid+uid)\r\n      .once('value', snapshot => {\r\n          if(snapshot.exists()){ // 이미 누른적 있는경우\r\n              const follows = snapshot.val();\r\n              Object.keys(follows).forEach((follow) => {\r\n                setIsFollow(follows[follow].isFollow)\r\n              })                \r\n          }        \r\n      });  \r\n    }\r\n  }, [uid, userObj]);\r\n\r\n  useEffect(() => {\r\n    getFollow();\r\n  }, [getFollow]);\r\n\r\n  useEffect(() => {\r\n    getNweets();\r\n  }, [getNweets]);\r\n\r\n  useEffect( () => {\r\n    if (inView && !loading) {\r\n      setPage(page => page + 1)\r\n    }\r\n  }, [inView, loading])\r\n  useEffect(()=>{\r\n    if(userObj !== null){\r\n      setLoginfollowCnt(userObj.followCnt);\r\n    }\r\n  }, [userObj])\r\n\r\n  useEffect( () =>{\r\n    const userRef = firebaseDB.ref('users');\r\n    userRef\r\n    .orderByChild('uid')\r\n    .equalTo(uid)\r\n    .once('value')\r\n    .then(c => {\r\n      const user = c.val()        \r\n      const userId = Object.keys(user)[0];\r\n      console.log(user[userId])\r\n      setUserId(userId);\r\n      setUser(user[userId] );\r\n\r\n      setfollowCnt(user[userId].followCnt)\r\n      setfollowingCnt(user[userId].followingCnt)\r\n    });       \r\n  }, [uid]);\r\n\r\n  return (\r\n    <div className=\"profileEdit_container base\">\r\n      { user && (\r\n        <>\r\n        <div className=\"cover_image base\">\r\n            {\r\n                user.coverURL !== \"\" && <img src={user.coverURL} alt=\"cover_image\" /> \r\n            }\r\n        </div>\r\n        <div className=\"profile_container base\">\r\n            <img src={user.photoURL} \r\n                alt=\"profile_image\" /> \r\n            <span className=\"profile_name\">{user.displayName}</span>\r\n            <span className=\"user_id\">{user.email}</span>\r\n            <span className=\"join_date\">가입일 {moment(user.timestamp).format('ll')}</span>\r\n            <div className=\"follow_wrap\">\r\n                <span className=\"f_cnt\">{followCnt}</span>\r\n                <span className=\"f_text\">팔로우 중</span>\r\n                <span className=\"f_cnt\">{followingCnt}</span>\r\n                <span className=\"f_text\">팔로워</span>\r\n            </div>\r\n            { userObj && userObj.uid !== uid &&\r\n            <button className={`followBtn${isFollow ? ' active' : ''}`} onClick={followClick} >\r\n              {isFollow ? '팔로잉' : '팔로우'}\r\n            </button>\r\n            }\r\n        </div>\r\n        <div> \r\n        {  \r\n          Object.keys(nweets).map((nweet) => {\r\n              return (<Nweet key={nweet} nweetObj={nweets[nweet]} \r\n                userObj={userObj} viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null} />)\r\n            }\r\n          )\r\n        }\r\n        </div>\r\n      </>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Search;\r\n","import { authService } from \"fbase\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nfunction Verify({match}) {\r\n  const uid = match.params.key1;\r\n  const user = authService.currentUser;\r\n\r\n  const is_verfied = ( user && user.uid === uid && user.emailVerified);\r\n  console.log(user)\r\n  return (\r\n    <div className=\"verify base\">\r\n      { is_verfied ? \r\n      <span>{user.email}님 이메일 인증이 완료되었습니다.</span> : \r\n      <span>이메일 인증에 문제가 있습니다.</span>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Verify;\r\n","import { Link, useHistory } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faCog, faHome, faHashtag, faUser } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { authService } from \"fbase\";\r\n\r\nconst LeftMenu = ({userObj, logout}) => {\r\n    const history = useHistory();\r\n    \r\n    const onLogoutClick = () => {\r\n        logout();\r\n        authService.signOut();\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <div className=\"header_main\">\r\n                <div className=\"header_container\">\r\n                    <nav>\r\n                        <Link to=\"/\" style={{marginRight: 10}}>\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            </div>\r\n                        </Link>\r\n                        { !userObj && (\r\n                        <Link to=\"/login\">\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faHome} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            <span style={{marginTop: 10}}>\r\n                            login\r\n                            </span>\r\n                            </div>\r\n                        </Link>\r\n                        )}\r\n                        <Link to=\"/follow\">\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faHashtag} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            <span style={{marginTop: 10}}>\r\n                            Follow\r\n                            </span>\r\n                            </div>\r\n                        </Link>\r\n                        <Link to=\"/setting\">\r\n                            <div className=\"header_content\">\r\n                            <FontAwesomeIcon icon={faCog} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                            <span style={{marginTop: 10}}>\r\n                            Setting\r\n                            </span>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        { userObj && (\r\n                            <Link to=\"/profile\">\r\n                                <div className=\"header_content\">\r\n                                <FontAwesomeIcon icon={faUser} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                                <span style={{marginTop: 10}}>\r\n                                Profile\r\n                                </span>\r\n                                </div>\r\n                            </Link>\r\n                        )}\r\n                        { userObj && (\r\n                            <span className=\"logOutBtn\" onClick={onLogoutClick}>\r\n                                Log Out\r\n                            </span>\r\n                        )}\r\n                    </nav>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default LeftMenu;","import { authService, firebaseDB } from \"fbase\";\r\n\r\nexport const isEmail = email => {\r\n    const emailRegex = /^(([^<>()\\[\\].,;:\\s@\"]+(\\.[^<>()\\[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\r\n  \r\n    return emailRegex.test(email);\r\n};\r\n\r\nexport const sendEmail = () => {\r\n    console.log(\"send\")\r\n    const user = authService.currentUser;\r\n    const url = \"http://localhost:3000/nwitter#/verify/\" + user.uid;\r\n    const actionCodeSettings = {\r\n        // URL you want to redirect back to. The domain (www.example.com) for this\r\n        // URL must be in the authorized domains list in the Firebase Console.\r\n        url,\r\n        // This must be true.\r\n        handleCodeInApp: true\r\n      };\r\n\r\n\r\n    user.sendEmailVerification(actionCodeSettings)\r\n    .then(() => {\r\n        window.localStorage.setItem('emailForSignIn', user.email);\r\n      })\r\n      .catch((error) => {\r\n        const errorCode = error.code;\r\n        const errorMessage = error.message;\r\n        console.log(errorCode)\r\n        console.log(errorMessage)\r\n      });\r\n    \r\n}\r\nexport const getUser = async (_user, callback) => {\r\n    firebaseDB.ref('users')\r\n    .orderByChild('email')\r\n    .startAt(_user.email)\r\n    .endAt(_user.email+\"\\uf8ff\")\r\n    .once('value', snapshot => {\r\n        if(snapshot.exists() && snapshot.numChildren() === 1){\r\n            const users = snapshot.val();\r\n            Object.keys(users).forEach((user) => {\r\n                callback(users[user], _user, user);\r\n              }\r\n            )        \r\n        }\r\n    });\r\n}\r\n\r\nexport const getUserByUid = async (uid) => {\r\n  firebaseDB.ref('users')\r\n  .orderByChild('uid')\r\n  .equalTo(uid)\r\n  .once('value').then(c => {\r\n    const user = c.val()        \r\n    return(user[Object.keys(user)[0]] );\r\n  });  \r\n}","import { firebaseDB } from \"fbase\";\r\nimport { getUserByUid } from \"helpers/auth\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Navigation = withRouter(({match, location}) => {\r\n    // home verify search\r\n    const url = window.location.href.split(\"/\");\r\n    const path = url[url.length-1];\r\n    const [pathName, setPathName] = useState(\"\");\r\n    const history = useHistory();\r\n    \r\n    useEffect( () => {\r\n        if(url[4] === \"search\"){\r\n            firebaseDB.ref('users')\r\n            .orderByChild('uid')\r\n            .equalTo(path)\r\n            .once('value').then(c => {\r\n                const user = c.val()        \r\n                setPathName(user[Object.keys(user)[0]].displayName );\r\n            });\r\n        } else if(url[4] === \"nweet\"){\r\n            setPathName(\"트윗\")\r\n        } else if(url[4] === \"verify\"){\r\n            setPathName(\"Verify\");\r\n        } else {\r\n            setPathName(path.charAt(0).toUpperCase() + path.slice(1));\r\n        }\r\n    }, [url, path])\r\n\r\n\r\n    return (\r\n        <div className=\"main_nav base\">\r\n            { (url && (url[4] === \"nweet\" || url[4] === \"search\" )) &&\r\n            <button onClick={()=>{history.goBack()}} className=\"iconBtn base center\"><FontAwesomeIcon icon={faArrowLeft} /></button>\r\n            }\r\n            <span className=\"base\">{pathName !== \"\" ? (pathName.indexOf(\"verify\") !== -1 ? \"Verify\" : pathName): \"Home\" }</span>\r\n        </div>\r\n    )\r\n});\r\n\r\nexport default withRouter(Navigation); ","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { authService, firebaseDB, storageService } from \"fbase\";\r\nimport { sendEmail } from \"helpers/auth\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport IntroduceModal from \"./IntroduceModal\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport \"./register.css\";\r\n\r\nconst EmailAuthModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, password, pImg, introduce}) => {\r\n    const goPrev = () => {\r\n        setModalContent(\r\n            <IntroduceModal\r\n                setModalContent={setModalContent}\r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                password={password}\r\n                pImg={pImg}\r\n                _introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const addUser =useCallback((user, downURL) => {\r\n        firebaseDB.ref('users')\r\n        .orderByChild('email')\r\n        .startAt(user.email)\r\n        .endAt(user.email+\"\\uf8ff\")\r\n        .once('value', snapshot => {\r\n            if(!snapshot.exists()){\r\n                console.log(\"회원가입\")\r\n                firebaseDB.ref('users').push({\r\n                    uid: user.uid,\r\n                    timestamp : user.metadata.creationTime ? user.metadata.creationTime : \"\",\r\n                    name: name ? name : \"\",\r\n                    displayName: nickname ? nickname : \"\",\r\n                    email: email ? email : \"\",\r\n                    introduce: introduce ? introduce : \"\",\r\n                    photoURL: downURL ? downURL : \"\",\r\n                    coverURL: \"\",\r\n                    followCnt: 0,\r\n                    followingCnt: 0\r\n                }).then(function(){\r\n                    refreshUser();\r\n                    sendEmail();\r\n                });\r\n            }\r\n        });\r\n    }, [name, nickname, introduce, email, refreshUser]);\r\n\r\n    const uploadToStorage = useCallback(async (user, ref) => {\r\n        await getFileBlob(pImg, ref, blob =>{\r\n            ref.put(blob).then(async function(snapshot) {\r\n               const downURL = await snapshot.ref.getDownloadURL();\r\n     \r\n                console.log(\"profile\")\r\n                await user.updateProfile({\r\n                    photoURL: downURL\r\n                }).then(function(){\r\n                    addUser(user, downURL)\r\n                });\r\n    \r\n            });\r\n        })\r\n    }, [addUser, pImg]);\r\n    \r\n    const getFileBlob = function (url,ref, cb) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"GET\", url);\r\n        xhr.responseType = \"blob\";\r\n        xhr.addEventListener('load', function() {\r\n            console.log(\"load\")\r\n            cb(xhr.response, ref);\r\n        });\r\n        xhr.send();\r\n    };\r\n\r\n    const profileUpdate = useCallback(async () => {\r\n        const user = authService.currentUser;\r\n    \r\n        if(pImg !== \"\"){\r\n            const attachmentRef =  storageService\r\n            .ref();\r\n    \r\n            const uploadRef = attachmentRef.child(`${user.uid}/profile/${uuidv4()}`);\r\n            await uploadToStorage(user, uploadRef);\r\n        }\r\n    },[pImg, uploadToStorage]);\r\n\r\n    const EmailRegister = useCallback(async () =>  {\r\n        await authService.createUserWithEmailAndPassword(email, password).then(async function(){\r\n            await profileUpdate();\r\n        });\r\n    }, [profileUpdate, email, password]);\r\n\r\n    useEffect(()=> {\r\n        // usecallback 다수추가해서 테스트필요\r\n        EmailRegister()\r\n    }, [EmailRegister])\r\n    return (\r\n        <div className=\"register_modal rBase emailAuth\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={goPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase rCenter\">\r\n                <span className=\"text1\">\r\n                    인증 메일이 발송되었습니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase rCenter\">\r\n                <span className=\"text2\">\r\n                    메일함에서({email}) 인증 메일을 확인 바랍니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <button className=\"underInput resendBtn\" onClick={sendEmail}>인증 메일 재발송</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default EmailAuthModal;","import { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useRef, useState } from \"react\";\r\nimport IntroduceModal from \"./IntroduceModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport PImgModal from \"./PImgModal\";\r\n\r\nconst PImgEditModal = ({setModalContent, onRequestClose, email, name, nickname, password, _pImg}) => {\r\n    const [fileUrl, setFileUrl] = useState(\"\");\r\n    const [crop, setCrop] = useState({\r\n        unit: \"px\",\r\n        width: 500,\r\n        height: 450,\r\n        aspect: 16 / 9\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const imageRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [croppedImageUrl, setCroppedImageUrl] = useState(\"\");\r\n\r\n    const isValidation = () => {\r\n        console.log(fileUrl)\r\n        if(fileUrl !== undefined) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const onImageLoaded = (image) => {\r\n        imageRef.current = image;\r\n    };\r\n    const onChange = (_crop) => {\r\n        setCrop(_crop);\r\n        console.log(_crop)\r\n        const h = imageRef.current.clientHeight;\r\n        const w = imageRef.current.clientWidth;\r\n\r\n        if(imageRef.current !== null) {\r\n            let y_val;\r\n            if(w > h){\r\n                y_val =  \"-15px\";\r\n            } else {\r\n                y_val = (_crop.y - 15) + \"px\";\r\n            }\r\n            \r\n            imageRef.current.style.bottom = y_val;\r\n        }  \r\n    }\r\n    const onCropComplete = (crop) => {\r\n        setCompletedCrop(crop)\r\n        makeClineCrop(crop);        \r\n    }\r\n    const makeClineCrop = async (crop)  =>{\r\n        if (imageRef && crop.width && crop.height) {\r\n            const croppedImageUrl = await getCroppedImg();\r\n            setCroppedImageUrl(croppedImageUrl);\r\n        }\r\n    }\r\n    const getCroppedImg = () =>{\r\n        if (!completedCrop || !previewCanvasRef.current || !imageRef.current) {\r\n            return;\r\n        }\r\n\r\n        const image = imageRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n    \r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext('2d');\r\n        const pixelRatio = window.devicePixelRatio;\r\n    \r\n        canvas.width = 500;\r\n        canvas.height = 450;\r\n        canvas.style.width = \"500px\";\r\n        canvas.style.height = \"450px\";\r\n    \r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = 'high';\r\n    \r\n        ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            500,\r\n            450\r\n        ); \r\n\r\n        console.log(\"cap\")\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob(\r\n                (blob) => {\r\n                    if (!blob) {\r\n                        console.error('Canvas is empty');\r\n                        return;\r\n                    }\r\n                    blob.name = \"newFile.jpeg\";\r\n                    window.URL.revokeObjectURL(fileUrl);\r\n                    setFileUrl(window.URL.createObjectURL(blob));\r\n                    resolve(fileUrl);\r\n                },\r\n                'image/jpeg',\r\n                1\r\n            );\r\n        });\r\n    }\r\n    const goPrev = () => {\r\n        setModalContent(\r\n            <PImgModal\r\n            setModalContent={setModalContent}\r\n            name={name}\r\n            nickname={nickname}\r\n            email={email}\r\n            password={password}\r\n            pImg={_pImg}\r\n            />\r\n        );\r\n    }\r\n    const goNext = () => {\r\n        if(isValidation()){\r\n            console.log(fileUrl)\r\n            setModalContent(\r\n                <IntroduceModal \r\n                setModalContent={setModalContent}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                password={password}\r\n                pImg={fileUrl}\r\n                />\r\n            )\r\n        } else {\r\n            console.log(\"nono\")\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"register_modal pImgEditModal rBase\">\r\n            <div className=\"profile_edit_nav rBase\">\r\n                <button className=\"iconBtn\" id=\"cancel\" onClick={goPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <span>미디어 편집</span>\r\n                <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}>\r\n                    <button className=\"nextBtn\" onClick={() => {goNext()} }>적용하기</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"img_preview rBase rCenter \">\r\n                {_pImg && (\r\n                <ReactCrop\r\n                    src={_pImg}\r\n                    crop={crop}\r\n                    ruleOfThirds\r\n                    onImageLoaded={(i) => onImageLoaded(i)}\r\n                    onChange={(c, pc) => onChange(c, pc)}\r\n                    onCropChange\r\n                    onComplete={(c, pc) => onCropComplete(c, pc)}\r\n                    locked={true}\r\n                />\r\n                )}\r\n                {_pImg && (\r\n                    <div>\r\n                    <canvas\r\n                      ref={previewCanvasRef}\r\n                      style={{\r\n                        width: Math.round(completedCrop?.width ?? 0),\r\n                        height: Math.round(completedCrop?.height ?? 0)\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default PImgEditModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useState } from \"react\";\r\nimport EmailAuthModal from \"./EmailAuthModal\";\r\nimport PImgEditModal from \"./PImgEditModal\";\r\nimport PImgModal from \"./PImgModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\n\r\nconst IntroduceModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, password, pImg, _introduce}) => {\r\n    const [introduce, setIntroduce] = useState(_introduce);\r\n    const [textCnt, setTextCnt] = useState(_introduce===undefined ? 0 :  _introduce.length);\r\n\r\n    const [isFocus, setIsFocus] = useState(0)\r\n\r\n    const onChange = (event) => {\r\n        const { target } = event;\r\n        const { value } = target;\r\n        setIntroduce(value);\r\n        setTextCnt(value.length)\r\n    }\r\n    \r\n    const handleKeyDown = (event) => {\r\n        if(event.keyCode !== 8 && textCnt >= 160){\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    \r\n    const setPrev = () => {\r\n        setModalContent(\r\n            <PImgModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            email={email}\r\n            name={name}\r\n            nickname={nickname}\r\n            password={password}\r\n            _pImg={pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const goNext = () => {\r\n        setModalContent(\r\n            <EmailAuthModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            name={name}\r\n            nickname={nickname}\r\n            email={email}\r\n            password={password}\r\n            pImg={pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"register_modal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={setPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    자신을 소개해 주세요\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text2\">\r\n                    나만의 특별한 점이 있다면 무엇인가요?<br/><br/>너무 깊이 생각하지 말고 가볍게 이야기해 보세요.\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <label className={`rBase ${isFocus === 1 ? \"focus\" : \"\"} ${introduce !== \"\" ? \"yesValue\" : \"\"}`}>\r\n                    <span className=\"value introduce\">자기소개</span>\r\n                    <span className=\"nCnt\">{textCnt}/160</span>\r\n                    <div className=\"input_wrap\">\r\n                        <textarea value={introduce} onChange={onChange} className=\"inputintroduce\" spellCheck=\"false\" onKeyDown={handleKeyDown}\r\n                        autoComplete=\"off\" id=\"inputName\" onFocus={()=> {setIsFocus(1)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>                    \r\n                </label>\r\n            </div>\r\n\r\n            <div className={`rBase next_container$ active`}>\r\n                <button className=\"nextBtn\" onClick={goNext}>다음</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default IntroduceModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft, faCamera } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport { getUser, isEmail } from \"helpers/auth\";\r\nimport { useEffect, useState } from \"react\";\r\nimport IntroduceModal from \"./IntroduceModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\nimport PImg from '../../img/default_profile_normal.png';\r\nimport PImgEditModal from \"./PImgEditModal\";\r\nimport PasswordModal from \"./PasswordModal\";\r\n\r\nconst PImgModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, password, _pImg, introduce}) => {\r\n    const [pImg, setPImg] = useState(_pImg);\r\n\r\n    const onFileChange = (event) => {\r\n        const { target: {files}, } = event;\r\n        const theFile = files[0];\r\n        \r\n        const reader = new FileReader();\r\n        reader.onloadend = (finishedEvent) => {\r\n            const { currentTarget : {result }, } = finishedEvent;\r\n            setPImg(result);\r\n            setModalContent(\r\n                <PImgEditModal\r\n                    setModalContent={setModalContent}\r\n                    onRequestClose={onRequestClose}\r\n                    refreshUser={refreshUser}\r\n                    email={email}\r\n                    name={name}\r\n                    nickname={nickname}\r\n                    password={password}\r\n                    _pImg={result}\r\n                    introduce={introduce}\r\n                />\r\n            );\r\n        }\r\n        if(theFile !== undefined)\r\n            reader.readAsDataURL(theFile);\r\n    }\r\n    const isValidation = () => {\r\n        if(pImg !== undefined ) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const setPrev = () => {\r\n        setModalContent(\r\n            <PasswordModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            email={email}\r\n            name={name}\r\n            nickname={nickname}\r\n            _password={password}\r\n            pImg={_pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const goNext = () => {\r\n        if(isValidation()){\r\n            setModalContent(\r\n                <IntroduceModal \r\n                setModalContent={setModalContent}\r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                password={password}\r\n                pImg={_pImg}\r\n                _introduce={introduce}\r\n                />\r\n            )\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"register_modal pImgModal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={setPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    프로필 사진 선택하기\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text2\">\r\n                    마음에 드는 사진이 있나요? 지금 업로드하세요\r\n                </span>\r\n            </div>\r\n            <div className=\"img_preview base center \">\r\n                <img className=\"main_img\" src={pImg === undefined ? PImg : pImg} alt=\"profile_image\" /> \r\n                <div className=\"profile_img_back\"></div>\r\n                <label htmlFor=\"profile-file\">\r\n                    <FontAwesomeIcon icon={faCamera} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n                </label>\r\n            </div>\r\n\r\n            <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}>\r\n                <button className=\"nextBtn\" onClick={() => {goNext()} }>다음</button>\r\n            </div>\r\n            <input id=\"profile-file\" type=\"file\" accept=\"image/*\"  onChange={onFileChange} style={{opacity:0}} />\r\n        </div>\r\n    )\r\n}\r\nexport default PImgModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport { getUser, isEmail } from \"helpers/auth\";\r\nimport { useEffect, useState } from \"react\";\r\nimport PImgModal from \"./PImgModal\";\r\nimport \"./register.css\";\r\nimport RegisterModal from \"./RegisterModal\";\r\n\r\nconst PasswordModal = ({setModalContent, onRequestClose, refreshUser, email, name, nickname, _password, pImg, introduce}) => {\r\n    // useEffect( () => {\r\n    //     console.log(email)\r\n    // },)\r\n    const [password, setPassword] = useState(_password !== undefined ? _password : \"\");\r\n    const [passwordError, setPasswordError] = useState(false);\r\n\r\n    const [isFocus, setIsFocus] = useState(0)\r\n    const [isPassShow, setIsPassShow] = useState(false)\r\n\r\n    const onChange = (event) => {\r\n        const { target } = event;\r\n        const { value } = target;\r\n        setPassword(value);\r\n        if(value.length < 6 ){\r\n            setPasswordError(\"비밀번호를 6자 이상 입력하세요\")\r\n        } else if(value === \"\" && password !== \"\"){ // 입력값을 다지운경우\r\n            setPasswordError(\"비밀번호를 입력하세요\")\r\n        } else {\r\n            setPasswordError(false)\r\n        }\r\n    }\r\n\r\n    const isValidation = () => {\r\n        if(password !== \"\" && password.length >= 6 ) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const handleEvent = (event) => {\r\n        if (event.type === \"mousedown\") {\r\n            setIsPassShow(true)\r\n        } else {\r\n            setIsPassShow(false)\r\n        }\r\n    }   \r\n    const setPrev = () => {\r\n        setModalContent(\r\n            <RegisterModal \r\n            setModalContent={setModalContent}\r\n            onRequestClose={onRequestClose}\r\n            refreshUser={refreshUser}\r\n            _email={email}\r\n            _name={name}\r\n            _nickname={nickname}\r\n            password={password}\r\n            pImg={pImg}\r\n            introduce={introduce}\r\n            />\r\n        )\r\n    }\r\n    const goNext = () => {\r\n        // if(isValidation()){\r\n            setModalContent(\r\n                <PImgModal \r\n                setModalContent={setModalContent}\r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                password={password}\r\n                _pImg={pImg}\r\n                introduce={introduce}\r\n                />\r\n            )\r\n        // }\r\n    }\r\n    return (\r\n        <div className=\"register_modal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"leftBtn iconBtn\" onClick={setPrev} >\r\n                    <FontAwesomeIcon icon={faArrowLeft} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    비밀번호가 필요합니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text2\">\r\n                    비밀번호는 6자 이상이어야 합니다\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <label className={`rBase ${isFocus === 1 ? \"focus\" : \"\"} ${password !== \"\" ? \"yesValue\" : \"\"}\r\n                ${passwordError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">비밀번호</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type={isPassShow ? \"text\" : \"password\"} value={password} onChange={onChange} className=\"inputPassword\"\r\n                        autoComplete=\"off\" id=\"inputName\" onFocus={()=> {setIsFocus(1)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    { passwordError === false && password !== \"\"\r\n                    ? (<span className=\"underInput show_pass\" onMouseDown={handleEvent} onMouseUp={handleEvent}>{isPassShow ? \"비밀번호보기\": \"숨기기\"}</span>) \r\n                    : (<span className=\"underInput error\">{passwordError}</span>)}\r\n                    \r\n                </label>\r\n            </div>\r\n\r\n            <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}>\r\n                <button className=\"nextBtn\" onClick={() => {goNext()} }>다음</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default PasswordModal;","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { firebaseDB } from \"fbase\";\r\nimport { isEmail } from \"helpers/auth\";\r\nimport { useState } from \"react\";\r\nimport PasswordModal from \"./PasswordModal\";\r\nimport \"./register.css\";\r\n\r\nconst RegisterModal = ({setModalContent, onRequestClose, refreshUser, _email, _nickname, _name, password, pImg, introduce}) => {\r\n    const [name, setName] = useState(_name);\r\n    const [nameCnt, setNameCnt] = useState(0);\r\n    const [nameError, setNameError] = useState(false);\r\n\r\n    const [nickname, setNickName] = useState(_nickname);\r\n    const [nicknameCnt, setNickNameCnt] = useState(0);\r\n    const [nicknameError, setNickNameError] = useState(false);\r\n\r\n    const [email, setEmail] = useState(_email);\r\n    const [emailError, setEmailError] = useState(false);\r\n\r\n    const [isFocus, setIsFocus] = useState(0)\r\n\r\n    const onChange = (event) => {\r\n        const { target } = event;\r\n        const { value } = target;\r\n        if(target.type === 'text'){\r\n            if(isFocus === 1){\r\n                setName(value);\r\n                setNameCnt(value.length)\r\n                if(value === \"\" && name !== \"\"){ // 입력값을 다지운경우\r\n                    setNameError(\"이름을 입력하세요\")\r\n                } else {\r\n                    setNameError(false)\r\n                }\r\n            } else {\r\n                setNickName(value);\r\n                setNickNameCnt(value.length)\r\n                if(value === \"\" && nickname !== \"\"){ // 입력값을 다지운경우\r\n                    setNickNameError(\"닉네임을 입력하세요\")\r\n                } else {\r\n                    setNickNameError(false)\r\n                }\r\n            }\r\n            \r\n        } else {\r\n            setEmail(value);\r\n            if(value === \"\" || isEmail(value)){\r\n                setEmailError(false)\r\n                getUser('email', value)\r\n            } else {\r\n                setEmailError(\"올바른 이메일을 입력해 주세요.\")\r\n            }\r\n        }\r\n    }\r\n    const handleKeyDown = (event) => {\r\n        if(isFocus === 1 && event.keyCode !== 8 && nameCnt >= 50){\r\n            event.preventDefault();\r\n        }\r\n        if(isFocus === 2 && event.keyCode !== 8 && nicknameCnt >= 50){\r\n            event.preventDefault();\r\n        }   \r\n    }\r\n\r\n    const isValidation = () => {\r\n        if(email !== undefined && !emailError && name !== undefined  && nickname !== undefined ) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    const goNext = () => {\r\n        if(isValidation()){\r\n            setModalContent(\r\n                <PasswordModal \r\n                setModalContent={setModalContent}\r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n                name={name}\r\n                nickname={nickname}\r\n                email={email}\r\n                _password={password}\r\n                pImg={pImg}\r\n                introduce={introduce}\r\n                />\r\n            )\r\n        }\r\n    }\r\n\r\n    const getUser = (type, value) => {\r\n        const ref = firebaseDB.ref('users')\r\n        .orderByChild(type)\r\n        .equalTo(value)\r\n        .once('value', snapshot => {\r\n            if(snapshot.exists()){\r\n                setEmailError(\"이미 등록된 이메일 입니다.\")\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"register_modal rBase\">\r\n            <div className=\"rBase rCenter\">\r\n                <button className=\"iconBtn leftBtn\" onClick={onRequestClose} >\r\n                    <FontAwesomeIcon icon={faTimes} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                </button>\r\n                <FontAwesomeIcon icon={faTwitter} color={\"rgb(217, 217, 217)\"} size=\"2x\" />\r\n            </div>\r\n            <div className=\"rBase\">\r\n                <span className=\"text1\">\r\n                    계정을 생성하세요\r\n                </span>\r\n            </div>\r\n            <div className=\"rBase input_container\">\r\n                <label className={`rBase ${isFocus === 1 ? \"focus\" : \"\"} ${name !== \"\" ? \"yesValue\" : \"\"}\r\n                ${nameError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">이름</span>\r\n                    <span className=\"nCnt\">{nameCnt}/50</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type=\"text\" value={name} onChange={onChange} className=\"inputName\" onKeyDown={handleKeyDown}\r\n                        autoComplete=\"off\" id=\"inputName\" onFocus={()=> {setIsFocus(1)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    <span className=\"error underInput\">{nameError}</span>\r\n                </label>\r\n                <label className={`rBase ${isFocus === 2 ? \"focus\" : \"\"} ${name !== \"\" ? \"yesValue\" : \"\"}\r\n                ${nicknameError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">닉네임</span>\r\n                    <span className=\"nCnt\">{nicknameCnt}/50</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type=\"text\" value={nickname} onChange={onChange} className=\"inputNickName\" onKeyDown={handleKeyDown}\r\n                        autoComplete=\"off\" id=\"inputNickName\" onFocus={()=> {setIsFocus(2)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    <span className=\"error underInput\">{nicknameError}</span>\r\n                </label>\r\n                <label className={`rBase ${isFocus === 3 ? \"focus\" : \"\"} ${email !== \"\" ? \"yesValue\" : \"\"} ${emailError !== false ? \"error\": \"\" }`}>\r\n                    <span className=\"value\">이메일</span>\r\n                    <div className=\"input_wrap\">\r\n                        <input type=\"email\" value={email} onChange={onChange} className=\"inputEmail\" \r\n                        autoComplete=\"off\" id=\"inputEmail\" onFocus={()=> {setIsFocus(3)}} onBlur={()=> {setIsFocus(0)}} />\r\n                    </div>\r\n                    <span className=\"error underInput\">{emailError}</span>\r\n                </label>\r\n            </div>\r\n\r\n            <div className={`rBase next_container${isValidation() ? \" active\" : \"\"} `}>\r\n                <button className=\"nextBtn\" onClick={() => {goNext()} }>다음</button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\nexport default RegisterModal;","import { faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { authService, firebaseDB } from \"fbase\";\r\nimport RegisterModal from \"Modal/register/RegisterModal\";\r\nimport { useEffect, useState } from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PImg from '../img/default_profile_normal.png';\r\n\r\nconst Side = ({refreshUser}) => {\r\n    const [searchValue, setSearchValue] = useState(\"\")\r\n    const [isFocus, setIsFocus] = useState(false)\r\n    const [users, setUsers] = useState([]);\r\n    const [isLogin, setIsLogin] = useState(false);\r\n\r\n    const [isModal, setIsModal] = useState(false);\r\n    const [modalContent, setModalContent] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    const onChange = (event) => {\r\n        console.log(\"onchange\")\r\n        const { target: {value} } = event;\r\n        setSearchValue(value)\r\n        \r\n        if(value !== \"\" && searchValue !== value){\r\n            const ref = firebaseDB.ref('users');\r\n            ref\r\n            .orderByChild('displayName')\r\n            .startAt(value)\r\n            .endAt(value+\"\\uf8ff\")\r\n            .once('value')\r\n            .then(c => {\r\n                console.log(c.val()) \r\n                setUsers(c.val());\r\n            });      \r\n        } else {\r\n            setUsers([])\r\n        }\r\n    }\r\n\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        history.push('/search/' + searchValue );\r\n    }\r\n    const openModal = () => {\r\n        if(!isModal)\r\n            setModalContent(\r\n            <RegisterModal \r\n                setModalContent={setModalContent} \r\n                onRequestClose={onRequestClose}\r\n                refreshUser={refreshUser}\r\n            />)\r\n        setIsModal(!isModal);\r\n    }\r\n\r\n    const onRequestClose = () => {\r\n        setIsModal(false);\r\n    }\r\n    const handleMouseDown = (e) => {\r\n        console.log(\"h\")\r\n        if(isFocus)\r\n            e.preventDefault()\r\n    }\r\n    useEffect(()=> {\r\n        authService.onAuthStateChanged((user)=>{\r\n            setIsLogin(user !== null)\r\n          })\r\n    },)\r\n    return (\r\n        <div className=\"side base\">\r\n            <div className={`base ${isFocus ? \"focus search_container\" : \"search_container\"}`}>\r\n                <label htmlFor=\"sInput\" className=\"search_label base\">\r\n                    <div>\r\n                        <FontAwesomeIcon icon={faSearch} color={\"rgb(217, 217, 217)\"} size=\"1x\" />\r\n                    </div>\r\n                    <div>\r\n                        <form onSubmit={onSubmit}>\r\n                            <input type=\"text\" value={searchValue} onChange={onChange} className=\"searchInput\" \r\n                            placeholder=\"Search Nwitter\" autoComplete=\"off\" id=\"sInput\"\r\n                            onFocus={()=> {setIsFocus(true)}} onBlur={()=> {setIsFocus(false)}} />\r\n                        </form>\r\n                    </div>\r\n                </label>\r\n            </div>\r\n            <div className={`base ${isFocus ? \"focus searchResult\" : \"searchResult\"}`}>\r\n                <nav>\r\n                    { isFocus && users !== null &&\r\n                        Object.keys(users).map((nweet) => {\r\n                            const user = users[nweet];\r\n                            console.log(user)\r\n                            return(   \r\n                                <Link to={`/search/${user.uid}`}\r\n                                onMouseDown={handleMouseDown}>\r\n                                    <div className=\"base resultWrap\">\r\n                                        <img src={user.photoURL === \"\" ? PImg : user.photoURL } alt=\"\" />\r\n                                        <div className=\"base\">\r\n                                            <span className=\"displayName\">\r\n                                                {user.displayName}\r\n                                            </span>\r\n                                            <span className=\"userID\">\r\n                                                {user.email}\r\n                                            </span>\r\n                                            <span className=\"user_addi\">\r\n                                                {user.introduce}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            );  \r\n                        })\r\n                    }\r\n                </nav>\r\n            </div>\r\n\r\n            { !isLogin && (\r\n                <div className=\"goRegister base\">\r\n                    <div className=\"t1\">\r\n                        <span>트위터에 처음이세요?</span>\r\n                    </div>\r\n                    <div className=\"t2\">\r\n                        <span>지금 가입해서 나에게 맞춤 설정된 타임라인을 만들어 보세요!</span>\r\n                    </div>\r\n                    <div className=\"t3\">\r\n                        <button onClick={openModal}>가입하기</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <ReactModal \r\n                shouldCloseOnOverlayClick={true}\r\n                shouldCloseOnEsc={false}\r\n                onRequestClose={()=> onRequestClose() }\r\n                isOpen={isModal}\r\n                ariaHideApp={false}\r\n                appElement={document.getElementById('app')}\r\n                className=\"base\"\r\n            >\r\n                {modalContent}\r\n            </ReactModal>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Side;","import Nweet from \"components/Nweet\";\r\nimport NweetFactory from \"components/NweetFactory\";\r\nimport { dbService, firebaseDB } from \"fbase\";\r\nimport { reverseObject, toArrayObject } from \"helpers/help\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Follow = ({match, userObj}) => {\r\n  const [nweets, setNweets] = useState([]);\r\n  const [follows, setFollows] = useState({});\r\n  const [ref, inView] = useInView()\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false)\r\n \r\n  const getFollwers = useCallback(async () => {\r\n    if(userObj !== null && userObj){\r\n      const ref = firebaseDB.ref('follows');\r\n      ref\r\n      .orderByChild('from')\r\n      .equalTo(userObj.uid)\r\n      .on('value', (snapshot) => {    \r\n        setFollows(toArrayObject(snapshot.val()))\r\n      });\r\n    }\r\n  }, [userObj] );\r\n\r\n  const getNweets = useCallback(async () => {\r\n    setLoading(true)\r\n    const ref = firebaseDB.ref('posts');\r\n    ref\r\n    .orderByChild('createdAt')\r\n    .limitToLast(10 * page)\r\n    .on('value', (snapshot) => {      \r\n      const result = reverseObject(snapshot.val());\r\n      let nweets_result = [];\r\n      Object.keys(result).forEach((nweet) => {\r\n        const value = result[nweet];\r\n        if(Array.isArray(follows) && follows.find(val => val.to === value.creatorId) ){\r\n          // console.log(value)\r\n          nweets_result = [...nweets_result, value];\r\n        }\r\n      });\r\n      setNweets(nweets_result)\r\n      \r\n    })\r\n    setLoading(false);\r\n  }, [page, follows] );\r\n\r\n  useEffect(() => {\r\n    getFollwers();\r\n  }, [getFollwers]);\r\n\r\n  useEffect(() => {\r\n    getNweets();\r\n  }, [getNweets]);\r\n\r\n  useEffect( () => {\r\n    if (inView && !loading) {\r\n      setPage(page => page + 1)\r\n    }\r\n  }, [inView, loading])\r\n\r\n  return (\r\n    <div>\r\n      {/* <NweetFactory userObj={userObj}  /> */}\r\n      <div className={`base ${nweets ? \"postList\" : \"noPostList\"}`}> \r\n        {\r\n          nweets.length !== 0 ?\r\n          Object.keys(nweets).map((nweet) => {\r\n            return (\r\n              <Nweet key={nweet} nweet_key={nweet} nweetObj={nweets[nweet]} \r\n              userObj={userObj} viewRef={(Object.keys(nweets).length -1) === parseInt(nweet) ? ref : null} />\r\n            )\r\n          })\r\n          : <span>팔로워중인 사람이 없습니다</span>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Follow;\r\n","import { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Auth from 'routes/Auth';\r\nimport Detail from 'routes/Detail';\r\nimport Home from 'routes/Home';\r\nimport Profile from 'routes/Profile';\r\nimport Search from 'routes/Search';\r\nimport Verify from 'routes/Verify';\r\nimport LeftMenu from './LeftMenu';\r\nimport Navigation from './Navigation';\r\nimport Side from './Side';\r\nimport Follow from 'routes/Follow';\r\n\r\nconst AppRouter = ({match, userObj, refreshUser, setUserObj, logout}) => {\r\n    return (\r\n        <Router>\r\n            <main>\r\n            <LeftMenu userObj={userObj} logout={logout} />\r\n            <Switch>\r\n                <>\r\n                    <div className=\"main\">\r\n                        <div className=\"container\">\r\n                            <Navigation />\r\n                            <Route exact path=\"/\" \r\n                            render={()=> <Home userObj={userObj} /> }/>\r\n                            <Route exact path=\"/follow\" \r\n                            render={()=> <Follow userObj={userObj} /> }/>\r\n                            <Route path=\"/search/:key1\" \r\n                            render={() => <Search userObj={userObj} refreshUser={refreshUser} />  } />\r\n                            <Route path=\"/nweet/:key1\" \r\n                            render={() => <Detail userObj={userObj} />  } />\r\n                            <Route path=\"/profile\" \r\n                            render={()=> <Profile userObj={userObj} refreshUser={refreshUser} setUserObj={setUserObj} />}/>\r\n                            <Route path=\"/login\" \r\n                            render={()=> <Auth userObj={userObj} refreshUser={refreshUser} /> } />\r\n                            <Route path=\"/verify/:key1\" \r\n                            component={Verify} />\r\n                            \r\n                        </div>\r\n                        <Side refreshUser={refreshUser} />\r\n                    </div>\r\n                </>\r\n            </Switch>\r\n            </main>\r\n        </Router>\r\n    )\r\n}\r\n\r\nexport default AppRouter;","import { useEffect, useState } from \"react\";\r\nimport AppRouter from \"components/Router\";\r\nimport { authService } from \"fbase\";\r\nimport { dbService } from \"../fbase\";\r\nimport PImg from '../img/default_profile_normal.png';\r\nimport { getUser, sendEmail } from \"helpers/auth\";\r\n\r\nfunction App() {\r\n  const [init, setInit] = useState(false);\r\n  const [userObj, setUserObj] = useState(null);\r\n\r\n  const setUserData = (user, _user, user_id) => {\r\n    setUserObj({\r\n      uid: user.uid,\r\n      userId: user_id,\r\n      name: user.name ? user.name : \"\",\r\n      displayName: user.displayName ? user.displayName : \"\",\r\n      email: user.email ? user.email : \"\",\r\n      introduce: user.introduce ? user.introduce : \"\",\r\n      photoURL: user.photoURL !== null ? user.photoURL  : PImg,\r\n      coverURL: (user.coverURL !== \"\" || user.coverURL !== undefined) ? user.coverURL  : \"\",\r\n      timestamp: user.timestamp,\r\n      followCnt: user.followCnt,\r\n      followingCnt: user.followingCnt,\r\n      updateProfile: (args) => _user.updateProfile(args)\r\n    });\r\n  }\r\n  const refreshUser = () => {\r\n    const user=  authService.currentUser;\r\n    getUser(user, setUserData)\r\n  }\r\n  const logout = () => {\r\n    setUserObj(false);\r\n  }\r\n  useEffect(()=>{\r\n    authService.onAuthStateChanged((user)=>{\r\n      console.log(user)\r\n      if(user){\r\n        // sendEmail();\r\n        getUser(user, setUserData)\r\n      } else{\r\n        setUserObj(false);\r\n      }\r\n      setInit(true);\r\n    })\r\n  },[]);\r\n\r\n  return (\r\n    <>\r\n      { init ? \r\n      <AppRouter \r\n      isLoggedIn={Boolean(userObj)} \r\n      userObj={userObj} logout={logout}\r\n      refreshUser={refreshUser} /> \r\n      : \"initializing...\" }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App; ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'components/App';\r\nimport \"./styles.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n); "],"sourceRoot":""}