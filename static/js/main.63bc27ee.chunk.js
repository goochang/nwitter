(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{27:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),s=n(39),r=n.n(s),i=n(4),o=n(12),l=n(11),j=n(5),u=n.n(j),d=n(9),b=n(6),m=n(15),O=n(26),h=(n(60),n(92),n(93),n(62),O.a.initializeApp({apiKey:"AIzaSyCraQnKj-RUSNVlhB2vaEEjASxAfKFxvZw",authDomain:"nwitter-58cb4.firebaseapp.com",projectId:"nwitter-58cb4",storageBucket:"nwitter-58cb4.appspot.com",messagingSenderId:"576595510910",appId:"1:576595510910:web:32faf2ad92e18a4635fa2f",databaseURL:"https://nwitter-58cb4-default-rtdb.firebaseio.com",measurementId:"G-N2341YNEGV"}),O.a),f=O.a.auth(),p=(O.a.firestore(),O.a.storage()),x=O.a.database(),v=n(0),g=function(e){var t=e.refreshUser,n=Object(c.useState)(""),a=Object(i.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)(""),j=Object(i.a)(o,2),b=j[0],m=j[1],O=Object(c.useState)(!1),h=Object(i.a)(O,2),p=h[0],g=(h[1],Object(c.useState)("")),N=Object(i.a)(g,2),w=N[0],C=N[1],y=Object(l.f)(),_=function(e){var t=e.target,n=t.name,c=t.value;"email"===n&&r(c),"password"===n&&m(c)},k=function(){var e=Object(d.a)(u.a.mark((function e(n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!p){e.next=9;break}return e.next=5,f.createUserWithEmailAndPassword(s,b);case 5:(c=e.sent).additionalUserInfo.isNewUser&&(a=c.user,x.ref("users").orderByChild("email").startAt(a.email).endAt(a.email+"\uf8ff").once("value",(function(e){e.exists()||(console.log("\ud68c\uc6d0\uac00\uc785"),t(),x.ref("users").push({uid:a.uid,timestamp:a.metadata.creationTime?a.metadata.creationTime:"",displayName:a.displayName?a.displayName:a.email,email:a.email?a.email:"",photoURL:a.photoURL?a.photoURL:"",coverURL:""}))}))),e.next=11;break;case 9:return e.next=11,f.signInWithEmailAndPassword(s,b);case 11:y.push("/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),C(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{onSubmit:k,className:"container mgBottom20",children:[Object(v.jsx)("input",{name:"email",type:"email",placeholder:"Email",value:s,onChange:_,required:!0,className:"authInput"}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:b,onChange:_,required:!0,className:"authInput"}),Object(v.jsx)("input",{type:"submit",className:"authSubmit",value:p?"Create Account":"Log In"}),w&&Object(v.jsx)("span",{className:"authError",children:w})]})})};var N=function(e){var t=e.userObj,n=e.refreshUser,a=Object(l.f)(),s=Object(c.useState)(""),r=Object(i.a)(s,2),o=r[0],j=r[1];Object(c.useEffect)((function(){t&&a.goBack()}));var O=function(){var e=Object(d.a)(u.a.mark((function e(t){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(c=t.target.name)?s=new h.auth.GoogleAuthProvider:"github"===c&&(s=new h.auth.GithubAuthProvider),e.next=4,f.signInWithPopup(s).catch((function(e){console.log(e),"auth/account-exists-with-different-credential"===e.code&&j("\ub3d9\uc77c\ud55c \uc774\uba54\uc77c\uc758 \uacc4\uc815\uc774 \uc788\uc2b5\ub2c8\ub2e4 \ud574\ub2f9 \uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694")})).then((function(e){if(console.log(e),void 0!==e){var t=e.user;x.ref("users").orderByChild("email").startAt(t.email).endAt(t.email+"\uf8ff").once("value",(function(e){e.exists()||(console.log("\ud68c\uc6d0\uac00\uc785"),n(),x.ref("users").push({uid:t.uid,timestamp:t.metadata.creationTime?t.metadata.creationTime:"",name:t.displayName?t.displayName:t.email,displayName:t.displayName?t.displayName:t.email,email:t.email?t.email:"",introduce:"",photoURL:t.photoURL?t.photoURL:"",coverURL:"",followCnt:0,followingCnt:0}))})),a.push("/")}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"authContainer",children:[Object(v.jsx)(b.a,{icon:m.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(v.jsx)(g,{refreshUser:n}),o&&Object(v.jsx)("span",{children:o}),Object(v.jsxs)("div",{className:"authBtns",children:[Object(v.jsxs)("button",{onClick:O,name:"google",className:"authBtn",children:["Continue with Google ",Object(v.jsx)(b.a,{icon:m.b})]}),Object(v.jsxs)("button",{onClick:O,name:"github",className:"authBtn",children:["Continue with Github ",Object(v.jsx)(b.a,{icon:m.a})]})]})]})},w=n(29),C=n(8),y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAwFBMVEXM1t3K1dy5xc2xvca7xs+KmaVrfYtld4agrrhneYhoeoiksbufrbegrbe7xs66xs6Dk5+/ytKdqrWElKCDk6Byg5HG0NjEz9bH0dlqfIprfIuAkJ2ir7nJ09p1hpN0hZO9yNDH0tmbqbTBzNOzv8iqtsCotL6ntL7L1dy3w8yjsLqVpK+Onam8x9CRn6ttf43CzdWMm6dmeIeLmqauusSwvMVxgpCToa29ydFneIeRoKzK1Nttfo2yvseZp7KHl6OOgUPZAAAA80lEQVR4Ae3SA5oDQRgE0Aortm1zNub9T7Xm4O/+uMo7w8O/duNyezxuF3R5fX4+8vu80BII8lUoDA0RfhKFUizIT4JxqCT4RQIKSZokIUvRJAVZmiYZyLI0yUIWpEkQohwtcpDkaZGHpECLAkRFmpQgK9OkDFmFJhXIqjV+Ua9CoZHlJ9kGlJqtLF9lW01oaXe6vX6308aPMRiOxpPJeDQcQMd0Nuer+WwKlcXS4CfG3QKi1Zwm8xUEAYMWRkAZSbvT2qAtYw1bzQ0dbJqws6WjLWzs9nS038HqQMEBFscTBacjzDoUnWF2oegCsytFV7x6ADhgICRy9ELGAAAAAElFTkSuQmCC",_=n(33),k=n.n(_),I=function(e){var t=e.commentId,n=e.commentObj,a=e.isOwner,s=void 0===n?"":n.creatorId,r=Object(c.useState)(null),l=Object(i.a)(r,2),j=l[0],m=l[1],O=Object(c.useCallback)((function(){""!==s&&x.ref("users").orderByChild("uid").equalTo(s).once("value",(function(e){var t=e.val();m(t[Object.keys(t)[0]])}))}),[s]),h=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c")&&x.ref("/comments/".concat(t)).remove();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){O()}),[O]),Object(v.jsx)("div",{children:n&&Object(v.jsxs)("div",{className:"base listView_container flexRow",children:[Object(v.jsx)("div",{className:"base leftProfile",children:j&&Object(v.jsx)(o.b,{to:"/search/".concat(j.uid),children:Object(v.jsx)("img",{src:null!==j?""!==j.photoURL?j.photoURL:y:"",alt:"profile_image"})})}),Object(v.jsxs)("div",{className:"base rightContent",children:[j&&Object(v.jsxs)("div",{className:"mgBottom10 flexRow base",children:[Object(v.jsx)(o.b,{to:"/search/".concat(j.uid),className:"fontSize16 textBold",children:j.displayName}),Object(v.jsx)(k.a,{fromNow:!0,className:"fromNow",children:n.createdAt})]}),Object(v.jsx)("div",{className:"base contentText",children:Object(v.jsx)("span",{className:"fontSize15",children:n.text})}),a&&Object(v.jsx)("div",{className:"nweet__actions",children:Object(v.jsx)("span",{onClick:h,children:Object(v.jsx)(b.a,{icon:C.n})})})]})]})})},U=function(e){var t=e.creator,n=e.userObj,a=e.postId,s=Object(c.useState)(""),r=Object(i.a)(s,2),o=r[0],l=r[1],j=Object(c.useState)(null),u=Object(i.a)(j,2),d=u[0],b=u[1],m=function(e){e.preventDefault(),x.ref("/comments").push({text:o,createdAt:Date.now(),postId:a,creatorId:n.uid,creatorName:n.displayName,creatorEmail:n.email});var t=null===d?1:Object.keys(d).length+1;x.ref("posts/"+a).update({commentCnt:t}),l("")},O=Object(c.useCallback)((function(){x.ref("comments").orderByChild("postId").equalTo(a).on("value",(function(e){console.log(e.val()),b(e.val())}))}),[a]);return Object(c.useEffect)((function(){O()}),[O]),Object(v.jsxs)("div",{className:"base nweet_comment",children:[Object(v.jsx)("form",{onSubmit:m,children:Object(v.jsxs)("div",{className:"new_comment base",children:[t&&Object(v.jsx)("div",{className:"new_comment_profileImg",children:Object(v.jsx)("img",{src:""!==t.photoURL?t.photoURL:y,alt:"profile_image"})}),Object(v.jsx)("div",{className:"new_comment_inputText",children:Object(v.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;l(t)},value:o,placeholder:"\ub0b4 \ub2f5\uae00\uc744 \ud2b8\uc717\ud569\ub2c8\ub2e4."})}),Object(v.jsx)("div",{className:"new_comment_btn base",children:Object(v.jsx)("button",{onClick:m,"aria-disabled":""===o,children:"\ub2f5\uae00"})})]})}),Object(v.jsx)("div",{className:"base listView",children:d?Object.keys(d).map((function(e){return Object(v.jsx)(I,{commentId:e,commentObj:d[e],isOwner:d[e].creatorId===n.uid})})):Object(v.jsx)("span",{className:"noComment",children:"\ub313\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})})]})},B=n(22),R=n.n(B),S=Object(l.g)((function(e){var t=e.match,n=e.userObj,a=Object(c.useState)(null),s=Object(i.a)(a,2),r=s[0],l=s[1],j=Object(c.useState)(null),m=Object(i.a)(j,2),O=m[0],h=m[1],f=Object(c.useState)(!1),p=Object(i.a)(f,2),g=p[0],N=p[1],_=t.params.key1,k=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.ref("posts/"+_).on("value",(function(e){console.log(e.val()),l(e.val())}));case 1:case"end":return e.stop()}}),e)}))),[_]),I=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==r&&x.ref("users").orderByChild("uid").equalTo(r.creatorId).once("value",(function(e){var t=e.val();h(t[Object.keys(t)[0]])}));case 1:case"end":return e.stop()}}),e)}))),[r]);return Object(c.useEffect)((function(){n&&x.ref("hearts").orderByChild("value").equalTo(n.uid+_).once("value",(function(e){if(e.exists()){var t=e.val();Object.keys(t).forEach((function(e){N(t[e].isHeart)}))}}))}),[n,_]),Object(c.useEffect)((function(){k()}),[k]),Object(c.useEffect)((function(){I()}),[I]),Object(v.jsxs)("div",{className:"base nweet_detail",children:[Object(v.jsxs)("div",{className:"nweet_profile base",children:[Object(v.jsx)("div",{className:"profile_image",children:O&&Object(v.jsx)(o.b,{to:"/search/".concat(O.uid),children:Object(v.jsx)("img",{src:""!==O.photoURL?O.photoURL:y,alt:"profile_image"})})}),O&&Object(v.jsxs)("div",{className:"profile_detail base",children:[Object(v.jsx)(o.b,{to:"/search/".concat(O.uid),className:"profile_displayName",children:O.displayName}),Object(v.jsx)("span",{className:"email",children:O.email})]}),Object(v.jsx)("div",{children:Object(v.jsx)(b.a,{icon:C.d})})]}),Object(v.jsxs)("div",{className:"base nweet_content bbg",children:[r&&Object(v.jsx)("span",{className:"content_text",children:r.text}),r&&r.attachmentUrl&&Object(v.jsx)("img",{src:r.attachmentUrl,alt:"nweet_attachment"}),r&&Object(v.jsx)("span",{className:"content_timestamp",children:R()(r.timestamp).format("llll")})]}),Object(v.jsxs)("div",{className:"base nweet_cnt bbg",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"cnt_title",children:"49"}),Object(v.jsx)("span",{className:"cnt_value",children:"\ub9ac\ud2b8\uc717"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"cnt_title",children:"1"}),Object(v.jsx)("span",{className:"cnt_value",children:"\uc778\uc6a9\ud55c \ud2b8\uc717"})]}),r&&0!==r.heartCnt&&Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"cnt_title",children:r.heartCnt}),Object(v.jsx)("span",{className:"cnt_value",children:"\ub9c8\uc74c\uc5d0 \ub4e4\uc5b4\uc694"})]})]}),r&&Object(v.jsxs)("div",{className:"nweet_btn_wrap base bbg",children:[Object(v.jsxs)("div",{className:"base heart".concat(g?" active":""),onClick:function(e){e.preventDefault(),x.ref("hearts").orderByChild("value").equalTo(n.uid+_).once("value",(function(e){if(e.exists()){var t=e.val();Object.keys(t).forEach((function(e){x.ref("hearts/"+e).update({isHeart:!t[e].isHeart})}))}else x.ref("hearts").push({value:n.uid+_,isHeart:!0});var c=g?r.heartCnt-1:r.heartCnt+1;x.ref("posts/"+_).update({heartCnt:c}),N(!g)}))},children:[Object(v.jsx)("button",{className:"iconBtn",id:"nweet_heart",children:g?Object(v.jsx)(b.a,{icon:C.f}):Object(v.jsx)(b.a,{icon:w.b})}),Object(v.jsx)("label",{htmlFor:"nweet_heart",children:r.heartCnt})]}),Object(v.jsxs)("div",{className:"base",children:[Object(v.jsx)("button",{className:"iconBtn",id:"nweet_comment",children:Object(v.jsx)(b.a,{icon:w.a})}),Object(v.jsx)("label",{htmlFor:"nweet_comment",children:r.commentCnt})]}),Object(v.jsxs)("div",{className:"base",children:[Object(v.jsx)("button",{className:"iconBtn",id:"nweet_retweet",children:Object(v.jsx)(b.a,{icon:C.j})}),Object(v.jsx)("label",{htmlFor:"nweet_retweet",children:r.retweetCnt})]}),Object(v.jsx)("div",{className:"base",children:Object(v.jsx)("button",{className:"iconBtn",id:"nweet_upload",children:Object(v.jsx)(b.a,{icon:C.o})})})]}),Object(v.jsx)(U,{creator:O,userObj:n,postId:_})]})})),L=n(94),A=function(e){var t=e.userObj,n=e.isUpdate,a=e.updateCancel,s=e.nweetObj,r=e.toggleEditing,o=Object(c.useState)(void 0===s?"":s.text),l=Object(i.a)(o,2),j=l[0],m=l[1],O=Object(c.useState)(""),h=Object(i.a)(O,2),f=h[0],g=h[1],N=function(){var e=Object(d.a)(u.a.mark((function e(c){var a,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!==j&&t){e.next=3;break}return e.abrupt("return");case 3:if(a=j,i=f,m(""),g(""),o="",""===i){e.next=16;break}return l=p.ref().child("".concat(t.uid,"/").concat(Object(L.a)())),e.next=12,l.putString(i,"data_url");case 12:return d=e.sent,e.next=15,d.ref.getDownloadURL();case 15:o=e.sent;case 16:if(console.log(s),!s||""===o||""===s.attachmentUrl){e.next=20;break}return e.next=20,p.refFromURL(s.attachmentUrl).delete();case 20:n?(x.ref("/posts/"+s.key).update({text:a,attachmentUrl:s&&s.attachmentUrl&&""===o?s.attachmentUrl:o}),r()):x.ref("/posts").push({text:a,createdAt:Date.now(),creatorId:t.uid,creatorName:t.displayName,creatorEmail:t.email,attachmentUrl:o,heartCnt:0,commentCnt:0,retweetCnt:0});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("form",{onSubmit:N,className:"factoryForm base",children:[Object(v.jsx)("div",{className:"factoryInput_profile base",children:Object(v.jsx)("img",{src:t&&""!==t.photoURL?t.photoURL:y,alt:"profile_image"})}),Object(v.jsxs)("div",{className:"factoryInput__container base",children:[Object(v.jsx)("div",{className:"factoryInput_text",children:Object(v.jsx)("input",{className:"factoryInput__input",value:j,onChange:function(e){e.preventDefault();var t=e.target.value;m(t)},type:"text",placeholder:"What's happening",maxLength:120})}),f&&Object(v.jsxs)("div",{className:"factoryForm__attachment base",children:[Object(v.jsx)("img",{src:f,style:{backgroundImage:f},alt:"attachment"}),Object(v.jsx)("div",{className:"factoryForm__clear",onClick:function(){g("")},children:Object(v.jsx)(b.a,{icon:C.m})})]}),Object(v.jsxs)("div",{className:"factoryInput_button base ".concat(n?"update":""),children:[Object(v.jsx)("input",{type:"submit",value:n?"Update":"Tweet",className:"factoryInput__arrow","aria-disabled":""===j||!t}),n&&Object(v.jsx)("input",{type:"button",value:"Cancel",className:"cancelBtn factoryInput__arrow mgr120",onClick:a}),Object(v.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;g(t)},void 0!==t&&n.readAsDataURL(t)},style:{opacity:0}}),Object(v.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[Object(v.jsx)("span",{children:"Add photos"}),Object(v.jsx)(b.a,{icon:C.i})]})]})]})]})},M=function(e){e.nweet_key;var t=e.nweetObj,n=e.isOwner,a=e.userObj,s=e.viewRef,r=Object(c.useState)(!1),l=Object(i.a)(r,2),j=l[0],m=l[1],O=Object(c.useState)(null),h=Object(i.a)(O,2),f=h[0],g=h[1],N=Object(c.useState)(!1),_=Object(i.a)(N,2),I=_[0],U=_[1],B=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!window.confirm("\uc0ad\uc81c \u3131?")){e.next=7;break}if(x.ref("/posts/".concat(t.key)).remove(),""===t.attachmentUrl){e.next=7;break}return e.next=7,p.refFromURL(t.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){if(void 0!==e){e.preventDefault();var t=e.target.parentNode;0!==document.getElementsByClassName("update").length&&"update"!==t.classList[2]&&document.getElementsByClassName("cancelBtn")[0].click()}m((function(e){return!e}))};return Object(c.useEffect)((function(){t&&x.ref("users").orderByChild("uid").startAt(t.creatorId).endAt(t.creatorId+"\uf8ff").once("value",(function(e){var t=e.val();g(t[Object.keys(t)[0]])}))}),[t]),Object(c.useEffect)((function(){a&&t&&x.ref("hearts").orderByChild("value").equalTo(a.uid+t.key).once("value",(function(e){if(e.exists()){var t=e.val();Object.keys(t).forEach((function(e){U(t[e].isHeart)}))}}))}),[t,a]),Object(v.jsx)("div",{className:"nweet ".concat(j?"update":""),ref:s,children:j?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(A,{userObj:a,isUpdate:!0,updateCancel:R,nweetObj:t,toggleEditing:R})}):Object(v.jsx)(o.c,{to:"/nweet/".concat(t.key),children:Object(v.jsxs)("div",{className:"nweet_container base",children:[Object(v.jsx)("div",{className:"nweet_profile base",children:f&&Object(v.jsx)(o.b,{to:"/search/".concat(f.uid),children:Object(v.jsx)("img",{src:null!==f?""!==f.photoURL?f.photoURL:y:"",alt:"profile_image"})})}),Object(v.jsxs)("div",{className:"nweet_content base",children:[f&&Object(v.jsxs)("div",{className:"nweet_profile_name_container base",children:[Object(v.jsx)(o.b,{to:"/search/".concat(f.uid),className:"profile_displayName",children:f.displayName}),Object(v.jsx)(k.a,{fromNow:!0,className:"fromNow",children:t.createdAt}),n&&Object(v.jsxs)("div",{className:"nweet__actions",children:[Object(v.jsx)("span",{onClick:B,children:Object(v.jsx)(b.a,{icon:C.n})}),Object(v.jsx)("span",{onClick:R,children:Object(v.jsx)(b.a,{icon:C.h})})]})]}),Object(v.jsxs)("div",{className:"nweet_content_box base",children:[Object(v.jsx)("span",{children:t.text}),t.attachmentUrl&&Object(v.jsx)("img",{src:t.attachmentUrl,alt:"nweet_attachment"}),Object(v.jsxs)("div",{className:"nweet_btn_wrap base",children:[Object(v.jsxs)("div",{className:"base heart".concat(I?" active":""),onClick:function(e){e.preventDefault(),x.ref("hearts").orderByChild("value").equalTo(a.uid+t.key).once("value",(function(e){if(e.exists()){var n=e.val();Object.keys(n).forEach((function(e){x.ref("hearts/"+e).update({isHeart:!n[e].isHeart})}))}else x.ref("hearts").push({value:a.uid+t.key,isHeart:!0});var c=I?t.heartCnt-1:t.heartCnt+1;x.ref("posts/"+t.key).update({heartCnt:c}),U(!I)}))},children:[Object(v.jsx)("button",{className:"iconBtn",id:"nweet_heart",children:I?Object(v.jsx)(b.a,{icon:C.f}):Object(v.jsx)(b.a,{icon:w.b})}),Object(v.jsx)("label",{htmlFor:"nweet_heart",children:t.heartCnt})]}),Object(v.jsxs)("div",{className:"base",children:[Object(v.jsx)("button",{className:"iconBtn",id:"nweet_comment",children:Object(v.jsx)(b.a,{icon:w.a})}),Object(v.jsx)("label",{htmlFor:"nweet_comment",children:t.commentCnt})]}),Object(v.jsxs)("div",{className:"base",children:[Object(v.jsx)("button",{className:"iconBtn",id:"nweet_retweet",children:Object(v.jsx)(b.a,{icon:C.j})}),Object(v.jsx)("label",{htmlFor:"nweet_retweet",children:t.retweetCnt})]}),Object(v.jsx)("div",{className:"base",children:Object(v.jsx)("button",{className:"iconBtn",id:"nweet_upload",children:Object(v.jsx)(b.a,{icon:C.o})})})]})]})]})]})})})},E=function(e){var t={},n=[];for(var c in e)n.push(c);for(var a=n.length-1;a>=0;a--){var s=e[n[a]];s.key=n[a],t[n.length-1-a]=s}return t},F=function(e){var t=[],n=[];for(var c in e)n.push(c);for(var a=0;a<n.length;a++){var s=e[n[a]];s.key=n[a],s.isFollow&&t.push(s)}return t},T=n(23),q=function(e){e.match;var t=e.userObj,n=Object(c.useState)({}),a=Object(i.a)(n,2),s=a[0],r=a[1],o=Object(T.a)(),l=Object(i.a)(o,2),j=l[0],b=l[1],m=Object(c.useState)(1),O=Object(i.a)(m,2),h=O[0],f=O[1],p=Object(c.useState)(!1),g=Object(i.a)(p,2),N=g[0],w=g[1],C=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),x.ref("posts").orderByChild("createdAt").limitToLast(10*h).on("value",(function(e){r(E(e.val()))})),w(!1);case 4:case"end":return e.stop()}}),e)}))),[h]);return Object(c.useEffect)((function(){C()}),[C]),Object(c.useEffect)((function(){console.log(b),b&&!N&&f((function(e){return e+1}))}),[b,N]),Object(v.jsxs)("div",{children:[Object(v.jsx)(A,{userObj:t}),Object(v.jsx)("div",{className:"base ".concat(s?"postList":"noPostList"),children:s?Object.keys(s).map((function(e){return Object(v.jsx)(M,{nweet_key:e,nweetObj:s[e],userObj:t,viewRef:Object.keys(s).length-1===parseInt(e)?j:null},e)})):Object(v.jsx)("span",{children:"\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})})]})},D=n(28),P=n.n(D),z=(n(44),function(e){var t,n,a=e.setModalContent,s=e.userObj,r=e.setModalNum,o=e.profileImg,l=e.coverImg,j=e.setProfileImg,m=e.setCoverImg,O=e.openModal,h=e.prevCover,f=Object(c.useState)({unit:"px",width:500,height:200,aspect:16/9}),p=Object(i.a)(f,2),x=p[0],g=p[1],N=Object(c.useState)(null),w=Object(i.a)(N,2),y=w[0],_=w[1],k=Object(c.useRef)(null),I=Object(c.useRef)(null),U=Object(c.useState)(""),B=Object(i.a)(U,2),R=(B[0],B[1]),S=Object(c.useState)(""),L=Object(i.a)(S,2),A=L[0],M=L[1],E=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(k&&t.width&&t.height)){e.next=6;break}return e.next=3,F();case 3:n=e.sent,R(n),j(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){if(y&&I.current&&k.current){var e=k.current,t=I.current,n=e.naturalWidth/e.width,c=e.naturalHeight/e.height,a=t.getContext("2d"),s=window.devicePixelRatio;return t.width=500,t.height=200,t.style.width="500px",t.style.height="200px",a.setTransform(s,0,0,s,0,0),a.imageSmoothingQuality="high",a.drawImage(e,x.x*n,x.y*c,x.width*n,x.height*c,0,0,500,200),console.log("cap"),new Promise((function(e,n){t.toBlob((function(t){t?(t.name="newFile.jpeg",window.URL.revokeObjectURL(A),M(window.URL.createObjectURL(t)),e(A)):console.error("Canvas is empty")}),"image/jpeg",1)}))}};return Object(v.jsxs)("div",{className:"profile_modal base profile_edit_modal",children:[Object(v.jsxs)("div",{className:"profile_edit_nav base",children:[Object(v.jsx)("button",{className:"cancelBtn",onClick:function(){r(1),a(Object(v.jsx)(H,{setModalContent:a,userObj:s,setModalNum:r,profileImg:o,coverImg:h,openModal:O,setProfileImg:j,setCoverImg:m}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)("span",{children:"\ubbf8\ub514\uc5b4 \ud3b8\uc9d1"}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{className:"okBtn","aria-disabled":""===A,onClick:function(){""!==A&&(r(3),a(Object(v.jsx)(H,{setModalContent:a,userObj:s,setModalNum:r,profileImg:o,coverImg:A,openModal:O,setProfileImg:j,setCoverImg:m})))},children:"\uc801\uc6a9\ud558\uae30"})})]}),Object(v.jsxs)("div",{className:"img_preview base center ",children:[l&&Object(v.jsx)(P.a,{src:l,crop:x,ruleOfThirds:!0,onImageLoaded:function(e){return t=e,void(k.current=t);var t},onChange:function(e,t){return function(e){if(g(e),console.log(e),null!==k.current){var t=e.y-25+"px";k.current.style.bottom=t}}(e)},onCropChange:!0,onComplete:function(e,t){return function(e){_(e),E(e)}(e)},locked:!0,className:"cover_crop"}),l&&Object(v.jsx)("div",{children:Object(v.jsx)("canvas",{ref:I,style:{width:Math.round(null!==(t=null===y||void 0===y?void 0:y.width)&&void 0!==t?t:0),height:Math.round(null!==(n=null===y||void 0===y?void 0:y.height)&&void 0!==n?n:0)}})})]})]})}),H=function(e){var t=e.setModalContent,n=e.userObj,c=e.setModalNum,a=e.profileImg,s=e.coverImg,r=e.setProfileImg,i=e.setCoverImg,o=e.openModal,j=Object(l.f)(),m=function(){var e=Object(d.a)(u.a.mark((function e(t,c,s){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(c,s,(function(e){s.put(e).then(function(){var e=Object(d.a)(u.a.mark((function e(c){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ref.getDownloadURL();case 2:if(s=e.sent,!t){e.next=10;break}return console.log("profile"),e.next=7,n.updateProfile({photoURL:s});case 7:x.ref("users/"+n.userId).update({photoURL:s}).then((function(){j.go(0)})),e.next=12;break;case 10:console.log("cover"),x.ref("users/"+n.userId).update({coverURL:s}).then((function(){""===a&&j.go(0)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),O=function(e,t,n){var c=new XMLHttpRequest;c.open("GET",e),c.responseType="blob",c.addEventListener("load",(function(){console.log("load"),n(c.response,t)})),c.send()},h=function(){var e=Object(d.a)(u.a.mark((function e(t){var c,r,i,o,l,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===a){e.next=7;break}return c=p.ref(),""!==n.coverURL&&(r=n.photoURL.lastIndexOf("%2F")+3,c.child("".concat(n.uid,"/profile/").concat(n.photoURL.substr(r,36))).delete()),i=c.child("".concat(n.uid,"/profile/").concat(Object(L.a)())),e.next=7,m(!0,a,i);case 7:if(""===s){e.next=13;break}return o=p.ref(),""!==n.coverURL&&(l=n.coverURL.lastIndexOf("%2F")+3,o.child("".concat(n.uid,"/cover/").concat(n.coverURL.substr(l,36))).delete()),j=o.child("".concat(n.uid,"/cover/").concat(Object(L.a)())),e.next=13,m(!1,s,j);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"cover_modal base",children:[Object(v.jsxs)("div",{className:"profile_edit_nav base",children:[Object(v.jsx)("button",{className:"cancelBtn",onClick:function(){c(1),t(Object(v.jsx)(W,{setModalContent:t,userObj:n,setModalNum:c,profileImg:a,coverImg:s,openModal:o,setProfileImg:r,setCoverImg:i}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)("span",{children:"\ubbf8\ub514\uc5b4 \ud3b8\uc9d1"}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{className:"okBtn",onClick:function(e){return h(e)},children:"Save"})})]}),Object(v.jsxs)("div",{className:"base",children:[Object(v.jsxs)("div",{className:"img_preview base center ",children:[""!==s&&Object(v.jsx)("img",{className:"main_img",src:s,alt:"cover_img"}),Object(v.jsx)("div",{className:"profile_img_back"}),Object(v.jsx)("label",{htmlFor:"cover-file",children:Object(v.jsx)(b.a,{icon:C.b,color:"rgb(217, 217, 217)",size:"2x"})})]}),Object(v.jsxs)("div",{className:"base sub_img_container",children:[Object(v.jsx)("img",{className:"sub_img",src:""===a?n.photoURL:a,alt:"profile_image"}),Object(v.jsx)("span",{className:"profile_name",children:n.displayName}),Object(v.jsx)("span",{className:"user_id",children:n.userId})]}),Object(v.jsx)("input",{id:"cover-file",type:"file",accept:"image/*",onChange:function(e){var l=e.target.files[0],j=new FileReader;j.onloadend=function(e){var l=e.currentTarget.result,j=s;i(l),t(Object(v.jsx)(z,{setModalContent:t,userObj:n,setModalNum:c,profileImg:a,coverImg:l,prevCover:j,openModal:o,setProfileImg:r,setCoverImg:i}))},void 0!==l&&j.readAsDataURL(l)},style:{opacity:0}})]})]})},V=function(e){var t,n,a=e.setModalContent,s=e.userObj,r=e.setModalNum,o=e.profileImg,l=e.coverImg,j=e.setProfileImg,m=e.setCoverImg,O=e.openModal,h=e.prevProfile,f=Object(c.useState)({unit:"px",width:500,height:450,aspect:16/9}),p=Object(i.a)(f,2),x=p[0],g=p[1],N=Object(c.useState)(null),w=Object(i.a)(N,2),y=w[0],_=w[1],k=Object(c.useRef)(null),I=Object(c.useRef)(null),U=Object(c.useState)(""),B=Object(i.a)(U,2),R=(B[0],B[1]),S=Object(c.useState)(""),L=Object(i.a)(S,2),A=L[0],M=L[1],E=Object(c.useState)(0),F=Object(i.a)(E,2),T=F[0],q=F[1],D=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(k&&t.width&&t.height)){e.next=6;break}return e.next=3,z();case 3:n=e.sent,R(n),j(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){if(y&&I.current&&k.current){var e=k.current.clientHeight,t=k.current.clientWidth,n=k.current,c=I.current,a=n.naturalWidth/n.width,s=n.naturalHeight/n.height,r=c.getContext("2d"),i=window.devicePixelRatio;if(t<e?(c.width=500,c.height=450,c.style.width="500px",c.style.height="450px"):(c.width=450,c.height=500,c.style.width="450px",c.style.height="500px"),r.setTransform(i,0,0,i,0,0),r.imageSmoothingQuality="high",t<e)r.drawImage(n,x.x*a,x.y*s,x.width*a,x.height*s,0,0,500,450);else{var o=385-(x.x>145?x.x:145);console.log(o+" : "+x.x),r.drawImage(n,o,0,x.width*a,x.height*s,0,0,450,500)}return console.log("cap"),new Promise((function(e,t){c.toBlob((function(t){t?(t.name="newFile.jpeg",window.URL.revokeObjectURL(A),M(window.URL.createObjectURL(t)),e(A),console.log(A)):console.error("Canvas is empty")}),"image/jpeg",1)}))}};return Object(v.jsxs)("div",{className:"profile_modal base profile_edit_modal",children:[Object(v.jsxs)("div",{className:"profile_edit_nav base",children:[Object(v.jsx)("button",{className:"cancelBtn",onClick:function(){r(1),a(Object(v.jsx)(W,{setModalContent:a,userObj:s,setModalNum:r,profileImg:h,coverImg:l,openModal:O,setProfileImg:j,setCoverImg:m}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)("span",{children:"\ubbf8\ub514\uc5b4 \ud3b8\uc9d1"}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{className:"okBtn","aria-disabled":""===A,onClick:function(){""!==A&&(r(3),a(Object(v.jsx)(H,{setModalContent:a,userObj:s,setModalNum:r,profileImg:A,coverImg:l,openModal:O,setProfileImg:j,setCoverImg:m})))},children:"\uc801\uc6a9\ud558\uae30"})})]}),Object(v.jsxs)("div",{className:"img_preview base center ",children:[o&&Object(v.jsx)(P.a,{src:o,crop:x,ruleOfThirds:!0,onImageLoaded:function(e){return function(e){if(k.current=e,null!==k.current){var t=k.current.clientHeight;k.current.clientWidth<t?g({width:500,height:450,aspect:16/9}):(g({width:450,height:500,aspect:9/16}),k.current.style.left=0)}}(e)},onChange:function(e,t){return function(e,t){if(g(e),null!==k.current){var n=k.current.clientHeight,c=k.current.clientWidth;if(c<n){q(1),e.y>n-450&&(e.y=n-450);var a=e.y-25+"px";k.current.style.bottom=a}else if(c>n){q(2);var s=e.x-365;s>0&&(s=0),s<n-c-25&&(s=n-c-25),k.current.style.left=s+"px"}}}(e)},onCropChange:!0,onComplete:function(e,t){return function(e,t){_(e),D(e)}(e)},locked:!0,className:1===T?"rCrop_wBig":2===T?"rCrop_hBig":"rCrop_square"}),o&&Object(v.jsx)("div",{children:Object(v.jsx)("canvas",{ref:I,style:{width:Math.round(null!==(t=null===y||void 0===y?void 0:y.width)&&void 0!==t?t:0),height:Math.round(null!==(n=null===y||void 0===y?void 0:y.height)&&void 0!==n?n:0)}})})]})]})},W=function(e){var t=e.setModalContent,n=e.userObj,c=e.setModalNum,a=e.profileImg,s=e.coverImg,r=e.setProfileImg,i=e.setCoverImg,o=e.openModal;return Object(v.jsxs)("div",{className:"profile_modal base",children:[Object(v.jsx)("div",{className:"base center",children:Object(v.jsx)(b.a,{icon:m.c,color:"rgb(217, 217, 217)",size:"2x"})}),Object(v.jsx)("div",{className:"base",children:Object(v.jsx)("span",{className:"text1",children:"Prick a profile picture"})}),Object(v.jsx)("div",{className:"base",children:Object(v.jsx)("span",{className:"text2",children:"Have a favorite selfie? Upload it now."})}),Object(v.jsxs)("div",{className:"img_preview base center ",children:[Object(v.jsx)("img",{className:"main_img",src:""===a?n.photoURL:a,alt:"profile_image"}),Object(v.jsx)("div",{className:"profile_img_back"}),Object(v.jsx)("label",{htmlFor:"profile-file",children:Object(v.jsx)(b.a,{icon:C.b,color:"rgb(217, 217, 217)",size:"2x"})})]}),Object(v.jsx)("button",{onClick:function(){c(3),t(Object(v.jsx)(H,{setModalContent:t,userObj:n,setModalNum:c,profileImg:a,coverImg:s,openModal:o,setProfileImg:r,setCoverImg:i}))},children:"skip"}),Object(v.jsx)("input",{id:"profile-file",type:"file",accept:"image/*",onChange:function(e){var l=e.target.files[0],j=new FileReader;j.onloadend=function(e){var l=e.currentTarget.result,j=a;r(l),t(Object(v.jsx)(V,{setModalContent:t,userObj:n,setModalNum:c,profileImg:l,coverImg:s,prevProfile:j,openModal:o,setProfileImg:r,setCoverImg:i}))},void 0!==l&&j.readAsDataURL(l)},style:{opacity:0}})]})},K=(n(80),n(34)),Q=n.n(K),G=function(e){var t=e.userObj,n=null!==t?t.timestamp:"",a=null!==t?t.email:"",s=null!==t?t.displayName:"",r=null!==t?t.photoURL:"",o=null!==t?t.coverURL:"",l=null!==t?t.followCnt:"",j=null!==t?t.followingCnt:"",b=null!==t?t.introduce:"",m=Object(c.useState)(""),O=Object(i.a)(m,2),h=O[0],f=O[1],p=Object(c.useState)(""),x=Object(i.a)(p,2),g=(x[0],x[1]),N=Object(c.useState)(!1),w=Object(i.a)(N,2),C=w[0],_=w[1],k=Object(c.useState)(0),I=Object(i.a)(k,2),U=(I[0],I[1]),B=Object(c.useState)(null),S=Object(i.a)(B,2),L=S[0],A=S[1],M=function(e){f(e),A(Object(v.jsx)(W,{setModalContent:A,userObj:t,setModalNum:U,profileImg:e,coverImg:o,openModal:E,setProfileImg:f,setCoverImg:g}))},E=function(e){e.preventDefault(),console.log(C),C||M(h),_(!C),U(C?0:1)},F=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(),U(0),M("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"profileEdit_container base",children:[Object(v.jsx)("div",{className:"cover_image base",children:""!==o&&Object(v.jsx)("img",{src:o,alt:"cover_image"})}),Object(v.jsxs)("div",{className:"profile_container base",children:[Object(v.jsx)("form",{children:Object(v.jsx)("button",{className:"edit_profile",onClick:E,children:"Set up profile"})}),Object(v.jsx)("img",{src:""!==r?r:y,alt:"profile_image"}),Object(v.jsx)("span",{className:"profile_name",children:s}),Object(v.jsx)("span",{className:"user_id",children:a}),Object(v.jsx)("span",{className:"tbm10 introduce",children:b}),Object(v.jsxs)("span",{className:"join_date",children:["\uac00\uc785\uc77c ",R()(n).format("ll")]}),Object(v.jsxs)("div",{className:"follow_wrap",children:[Object(v.jsx)("span",{className:"f_cnt",children:l}),Object(v.jsx)("span",{className:"f_text",children:"\ud314\ub85c\uc6b0 \uc911"}),Object(v.jsx)("span",{className:"f_cnt",children:j}),Object(v.jsx)("span",{className:"f_text",children:"\ud314\ub85c\uc6cc"})]})]}),Object(v.jsx)(Q.a,{shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!1,onRequestClose:function(){return F()},isOpen:C,ariaHideApp:!1,appElement:document.getElementById("app"),className:"setProfileModal base",children:L})]})})},J=Object(l.g)((function(e){var t=e.userObj,n=e.refreshUser,a=Object(c.useState)([]),s=Object(i.a)(a,2),r=s[0],o=s[1],j=Object(T.a)(),b=Object(i.a)(j,2),m=b[0],O=b[1],h=Object(c.useState)(1),f=Object(i.a)(h,2),p=f[0],g=f[1],N=Object(c.useState)(!1),w=Object(i.a)(N,2),C=w[0],y=(w[1],Object(l.f)()),_=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&x.ref("posts").orderByChild("creatorId").equalTo(t.uid).limitToLast(10*p).on("value",(function(e){o(E(e.val()))}));case 1:case"end":return e.stop()}}),e)}))),[t,p]);return Object(c.useEffect)((function(){t||(console.log("\uc720\uc800\uc815\ubcf4\uc5c6\uc74c"),y.goBack())}),[t,y]),Object(c.useEffect)((function(){_()}),[_]),Object(c.useEffect)((function(){t&&n()}),[n,t]),Object(c.useEffect)((function(){O&&!C&&g((function(e){return e+1}))}),[O,C]),Object(v.jsxs)("div",{children:[Object(v.jsx)(G,{userObj:t}),Object(v.jsx)("div",{className:"base",children:r&&Object.keys(r).map((function(e){return Object(v.jsx)(M,{nweetObj:r[e],userObj:t,isOwner:r[e].creatorId===t.uid,viewRef:Object.keys(r).length-1===parseInt(e)?m:null},e)}))})]})})),Z=Object(l.g)((function(e){var t=e.match,n=e.userObj,a=e.refreshUser,s=Object(c.useState)([]),r=Object(i.a)(s,2),o=r[0],l=r[1],j=Object(c.useState)(null),b=Object(i.a)(j,2),m=b[0],O=b[1],h=Object(c.useState)(null),f=Object(i.a)(h,2),p=f[0],g=f[1],N=t.params.key1,w=Object(T.a)(),C=Object(i.a)(w,2),_=C[0],k=C[1],I=Object(c.useState)(1),U=Object(i.a)(I,2),B=U[0],S=U[1],L=Object(c.useState)(!1),A=Object(i.a)(L,2),F=A[0],q=A[1],D=Object(c.useState)(!1),P=Object(i.a)(D,2),z=P[0],H=P[1],V=Object(c.useState)(0),W=Object(i.a)(V,2),K=W[0],Q=W[1],G=Object(c.useState)(0),J=Object(i.a)(G,2),Z=J[0],X=J[1],Y=Object(c.useState)(0),$=Object(i.a)(Y,2),ee=$[0],te=$[1],ne=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(!0),x.ref("posts").orderByChild("creatorId").startAt(N).endAt(N+"\uf8ff").limitToLast(10*B).on("value",(function(e){l(E(e.val()))})),q(!1);case 4:case"end":return e.stop()}}),e)}))),[B,N]),ce=Object(c.useCallback)((function(){null!==n&&N&&x.ref("follows").orderByChild("value").equalTo(n.uid+N).once("value",(function(e){if(e.exists()){var t=e.val();Object.keys(t).forEach((function(e){H(t[e].isFollow)}))}}))}),[N,n]);return Object(c.useEffect)((function(){ce()}),[ce]),Object(c.useEffect)((function(){ne()}),[ne]),Object(c.useEffect)((function(){k&&!F&&S((function(e){return e+1}))}),[k,F]),Object(c.useEffect)((function(){null!==n&&te(n.followCnt)}),[n]),Object(c.useEffect)((function(){x.ref("users").orderByChild("uid").equalTo(N).once("value").then((function(e){var t=e.val(),n=Object.keys(t)[0];console.log(t[n]),g(n),O(t[n]),Q(t[n].followCnt),X(t[n].followingCnt)}))}),[N]),Object(v.jsx)("div",{className:"profileEdit_container base",children:m&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"cover_image base",children:""!==m.coverURL&&Object(v.jsx)("img",{src:m.coverURL,alt:"cover_image"})}),Object(v.jsxs)("div",{className:"profile_container base",children:[Object(v.jsx)("img",{src:""!==m.photoURL?m.photoURL:y,alt:"profile_image"}),Object(v.jsx)("span",{className:"profile_name",children:m.displayName}),Object(v.jsx)("span",{className:"user_id",children:m.email}),Object(v.jsxs)("span",{className:"join_date",children:["\uac00\uc785\uc77c ",R()(m.timestamp).format("ll")]}),Object(v.jsxs)("div",{className:"follow_wrap",children:[Object(v.jsx)("span",{className:"f_cnt",children:K}),Object(v.jsx)("span",{className:"f_text",children:"\ud314\ub85c\uc6b0 \uc911"}),Object(v.jsx)("span",{className:"f_cnt",children:Z}),Object(v.jsx)("span",{className:"f_text",children:"\ud314\ub85c\uc6cc"})]}),n&&n.uid!==N&&Object(v.jsx)("button",{className:"followBtn".concat(z?" active":""),onClick:function(e){e.preventDefault(),x.ref("follows").orderByChild("value").equalTo(n.uid+N).once("value",(function(e){if(e.exists()){var t=e.val();Object.keys(t).forEach((function(e){x.ref("follows/"+e).update({isFollow:!t[e].isFollow})}))}else x.ref("follows").push({value:n.uid+N,isFollow:!0,from:n.uid,to:N});var c=ee+(e.exists()&&z?-1:1),s=Z+(e.exists()&&z?-1:1);console.log(ee),console.log(c),x.ref("users/"+n.userId).update({followCnt:c}),x.ref("users/"+p).update({followingCnt:s}),X(s),te(c),H(!z),a()}))},children:z?"\ud314\ub85c\uc789":"\ud314\ub85c\uc6b0"})]}),Object(v.jsx)("div",{children:Object.keys(o).map((function(e){return Object(v.jsx)(M,{nweetObj:o[e],userObj:n,viewRef:Object.keys(o).length-1===parseInt(e)?_:null},e)}))})]})})}));var X=function(e){var t=e.match.params.key1,n=f.currentUser,c=n&&n.uid===t&&n.emailVerified;return console.log(n),Object(v.jsx)("div",{className:"verify base",children:c?Object(v.jsxs)("span",{children:[n.email,"\ub2d8 \uc774\uba54\uc77c \uc778\uc99d\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]}):Object(v.jsx)("span",{children:"\uc774\uba54\uc77c \uc778\uc99d\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4."})})},Y=function(e){var t=e.userObj,n=e.logout;Object(l.f)();return Object(v.jsx)("header",{children:Object(v.jsx)("div",{className:"header_main",children:Object(v.jsx)("div",{className:"header_container",children:Object(v.jsxs)("nav",{children:[Object(v.jsx)(o.b,{to:"/",style:{marginRight:10},children:Object(v.jsx)("div",{className:"header_content",children:Object(v.jsx)(b.a,{icon:m.c,color:"rgb(217, 217, 217)",size:"2x"})})}),!t&&Object(v.jsx)(o.b,{to:"/login",children:Object(v.jsxs)("div",{className:"header_content",children:[Object(v.jsx)(b.a,{icon:C.g,color:"rgb(217, 217, 217)",size:"2x"}),Object(v.jsx)("span",{style:{marginTop:10},children:"login"})]})}),Object(v.jsx)(o.b,{to:"/follow",children:Object(v.jsxs)("div",{className:"header_content",children:[Object(v.jsx)(b.a,{icon:C.e,color:"rgb(217, 217, 217)",size:"2x"}),Object(v.jsx)("span",{style:{marginTop:10},children:"Follow"})]})}),Object(v.jsx)(o.b,{to:"/setting",children:Object(v.jsxs)("div",{className:"header_content",children:[Object(v.jsx)(b.a,{icon:C.c,color:"rgb(217, 217, 217)",size:"2x"}),Object(v.jsx)("span",{style:{marginTop:10},children:"Setting"})]})}),t&&Object(v.jsx)(o.b,{to:"/profile",children:Object(v.jsxs)("div",{className:"header_content",children:[Object(v.jsx)(b.a,{icon:C.p,color:"rgb(217, 217, 217)",size:"2x"}),Object(v.jsx)("span",{style:{marginTop:10},children:"Profile"})]})}),t&&Object(v.jsx)("span",{className:"logOutBtn",onClick:function(){n(),f.signOut()},children:"Log Out"})]})})})})},$=function(){console.log("send");var e=f.currentUser,t={url:"http://localhost:3000/nwitter#/verify/"+e.uid,handleCodeInApp:!0};e.sendEmailVerification(t).then((function(){window.localStorage.setItem("emailForSignIn",e.email)})).catch((function(e){var t=e.code,n=e.message;console.log(t),console.log(n)}))},ee=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.ref("users").orderByChild("email").startAt(t.email).endAt(t.email+"\uf8ff").once("value",(function(e){if(e.exists()&&1===e.numChildren()){var c=e.val();Object.keys(c).forEach((function(e){n(c[e],t,e)}))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=Object(l.g)((function(e){e.match,e.location;var t=window.location.href.split("/"),n=t[t.length-1],a=Object(c.useState)(""),s=Object(i.a)(a,2),r=s[0],o=s[1],j=Object(l.f)();return Object(c.useEffect)((function(){"search"===t[4]?x.ref("users").orderByChild("uid").equalTo(n).once("value").then((function(e){var t=e.val();o(t[Object.keys(t)[0]].displayName)})):"nweet"===t[4]?o("\ud2b8\uc717"):"verify"===t[4]?o("Verify"):o(n.charAt(0).toUpperCase()+n.slice(1))}),[t,n]),Object(v.jsxs)("div",{className:"main_nav base",children:[t&&("nweet"===t[4]||"search"===t[4])&&Object(v.jsx)("button",{onClick:function(){j.goBack()},className:"iconBtn base center",children:Object(v.jsx)(b.a,{icon:C.a})}),Object(v.jsx)("span",{className:"base",children:""!==r?-1!==r.indexOf("verify")?"Verify":r:"Home"})]})})),ne=Object(l.g)(te),ce=(n(27),function(e){var t=e.setModalContent,n=e.onRequestClose,a=e.refreshUser,s=e.email,r=e.name,i=e.nickname,o=e.password,l=e.pImg,j=e.introduce,O=Object(c.useCallback)((function(e,t){x.ref("users").orderByChild("email").startAt(e.email).endAt(e.email+"\uf8ff").once("value",(function(n){n.exists()||(console.log("\ud68c\uc6d0\uac00\uc785"),x.ref("users").push({uid:e.uid,timestamp:e.metadata.creationTime?e.metadata.creationTime:"",name:r||"",displayName:i||"",email:s||"",introduce:j||"",photoURL:t||"",coverURL:"",followCnt:0,followingCnt:0}).then((function(){a(),$()})))}))}),[r,i,j,s,a]),h=Object(c.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==l){e.next=4;break}O(t),e.next=6;break;case 4:return e.next=6,g(l,n,(function(e){n.put(e).then(function(){var e=Object(d.a)(u.a.mark((function e(n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.ref.getDownloadURL();case 2:return c=e.sent,e.next=5,t.updateProfile({photoURL:c}).then((function(){O(t,c)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[O,l]),g=function(e,t,n){var c=new XMLHttpRequest;c.open("GET",e),c.responseType="blob",c.addEventListener("load",(function(){console.log("load"),n(c.response,t)})),c.send()},N=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.currentUser,console.log(l),""===l){e.next=7;break}return n=p.ref(),c=n.child("".concat(t.uid,"/profile/").concat(Object(L.a)())),e.next=7,h(t,c);case 7:case"end":return e.stop()}}),e)}))),[l,h]),w=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.createUserWithEmailAndPassword(s,o).then(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),[N,s,o]);return Object(c.useEffect)((function(){w()}),[w]),Object(v.jsxs)("div",{className:"register_modal rBase emailAuth",children:[Object(v.jsxs)("div",{className:"rBase rCenter",children:[Object(v.jsx)("button",{className:"leftBtn iconBtn",onClick:function(){t(Object(v.jsx)(se,{setModalContent:t,onRequestClose:n,refreshUser:a,name:r,nickname:i,email:s,password:o,pImg:l,_introduce:j}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)(b.a,{icon:m.c,color:"rgb(217, 217, 217)",size:"2x"})]}),Object(v.jsx)("div",{className:"rBase rCenter",children:Object(v.jsx)("span",{className:"text1",children:"\uc778\uc99d \uba54\uc77c\uc774 \ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4"})}),Object(v.jsx)("div",{className:"rBase rCenter",children:Object(v.jsxs)("span",{className:"text2",children:["\uba54\uc77c\ud568\uc5d0\uc11c(",s,") \uc778\uc99d \uba54\uc77c\uc744 \ud655\uc778 \ubc14\ub78d\ub2c8\ub2e4"]})}),Object(v.jsx)("div",{className:"rBase input_container",children:Object(v.jsx)("button",{className:"underInput resendBtn",onClick:$,children:"\uc778\uc99d \uba54\uc77c \uc7ac\ubc1c\uc1a1"})})]})}),ae=function(e){var t,n,a=e.setModalContent,s=(e.onRequestClose,e.email),r=e.name,o=e.nickname,l=e.password,j=e._pImg,m=e.refreshUser,O=Object(c.useState)(""),h=Object(i.a)(O,2),f=h[0],p=h[1],x=Object(c.useState)({unit:"px",width:500,height:450,aspect:16/9}),g=Object(i.a)(x,2),N=g[0],w=g[1],y=Object(c.useState)(null),_=Object(i.a)(y,2),k=_[0],I=_[1],U=Object(c.useRef)(null),B=Object(c.useRef)(null),R=Object(c.useState)(""),S=Object(i.a)(R,2),L=(S[0],S[1]),A=function(){return console.log(f),void 0!==f},M=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(U&&t.width&&t.height)){e.next=5;break}return e.next=3,E();case 3:n=e.sent,L(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){if(k&&B.current&&U.current){var e=U.current,t=B.current,n=e.naturalWidth/e.width,c=e.naturalHeight/e.height,a=t.getContext("2d"),s=window.devicePixelRatio;return t.width=500,t.height=450,t.style.width="500px",t.style.height="450px",a.setTransform(s,0,0,s,0,0),a.imageSmoothingQuality="high",a.drawImage(e,N.x*n,N.y*c,N.width*n,N.height*c,0,0,500,450),console.log("cap"),new Promise((function(e,n){t.toBlob((function(t){t?(t.name="newFile.jpeg",window.URL.revokeObjectURL(f),p(window.URL.createObjectURL(t)),e(f)):console.error("Canvas is empty")}),"image/jpeg",1)}))}};return Object(v.jsxs)("div",{className:"register_modal pImgEditModal rBase",children:[Object(v.jsxs)("div",{className:"profile_edit_nav rBase",children:[Object(v.jsx)("button",{className:"iconBtn",id:"cancel",onClick:function(){a(Object(v.jsx)(re,{setModalContent:a,name:r,nickname:o,email:s,password:l,pImg:j,refreshUser:m}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)("span",{children:"\ubbf8\ub514\uc5b4 \ud3b8\uc9d1"}),Object(v.jsx)("div",{className:"rBase next_container".concat(A()?" active":""," "),children:Object(v.jsx)("button",{className:"nextBtn",onClick:function(){A()?(console.log(f),a(Object(v.jsx)(se,{setModalContent:a,name:r,nickname:o,email:s,password:l,pImg:f,refreshUser:m}))):console.log("nono")},children:"\uc801\uc6a9\ud558\uae30"})})]}),Object(v.jsxs)("div",{className:"img_preview rBase rCenter ",children:[j&&Object(v.jsx)(P.a,{src:j,crop:N,ruleOfThirds:!0,onImageLoaded:function(e){return t=e,void(U.current=t);var t},onChange:function(e,t){return function(e){w(e),console.log(e);var t,n=U.current.clientHeight,c=U.current.clientWidth;null!==U.current&&(t=c>n?"-15px":e.y-15+"px",U.current.style.bottom=t)}(e)},onCropChange:!0,onComplete:function(e,t){return function(e){I(e),M(e)}(e)},locked:!0}),j&&Object(v.jsx)("div",{children:Object(v.jsx)("canvas",{ref:B,style:{width:Math.round(null!==(t=null===k||void 0===k?void 0:k.width)&&void 0!==t?t:0),height:Math.round(null!==(n=null===k||void 0===k?void 0:k.height)&&void 0!==n?n:0)}})})]})]})},se=function(e){var t=e.setModalContent,n=e.onRequestClose,a=e.refreshUser,s=e.email,r=e.name,o=e.nickname,l=e.password,j=e.pImg,u=e._introduce,d=Object(c.useState)(u),O=Object(i.a)(d,2),h=O[0],f=O[1],p=Object(c.useState)(void 0===u?0:u.length),x=Object(i.a)(p,2),g=x[0],N=x[1],w=Object(c.useState)(0),y=Object(i.a)(w,2),_=y[0],k=y[1];return Object(v.jsxs)("div",{className:"register_modal rBase",children:[Object(v.jsxs)("div",{className:"rBase rCenter",children:[Object(v.jsx)("button",{className:"leftBtn iconBtn",onClick:function(){t(Object(v.jsx)(re,{setModalContent:t,onRequestClose:n,refreshUser:a,email:s,name:r,nickname:o,password:l,_pImg:j,introduce:h}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)(b.a,{icon:m.c,color:"rgb(217, 217, 217)",size:"2x"})]}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsx)("span",{className:"text1",children:"\uc790\uc2e0\uc744 \uc18c\uac1c\ud574 \uc8fc\uc138\uc694"})}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsxs)("span",{className:"text2",children:["\ub098\ub9cc\uc758 \ud2b9\ubcc4\ud55c \uc810\uc774 \uc788\ub2e4\uba74 \ubb34\uc5c7\uc778\uac00\uc694?",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),"\ub108\ubb34 \uae4a\uc774 \uc0dd\uac01\ud558\uc9c0 \ub9d0\uace0 \uac00\ubccd\uac8c \uc774\uc57c\uae30\ud574 \ubcf4\uc138\uc694."]})}),Object(v.jsx)("div",{className:"rBase input_container",children:Object(v.jsxs)("label",{className:"rBase ".concat(1===_?"focus":""," ").concat(""!==h?"yesValue":""),children:[Object(v.jsx)("span",{className:"value introduce",children:"\uc790\uae30\uc18c\uac1c"}),Object(v.jsxs)("span",{className:"nCnt",children:[g,"/160"]}),Object(v.jsx)("div",{className:"input_wrap",children:Object(v.jsx)("textarea",{value:h,onChange:function(e){var t=e.target.value;f(t),N(t.length)},className:"inputintroduce",spellCheck:"false",onKeyDown:function(e){8!==e.keyCode&&g>=160&&e.preventDefault()},autoComplete:"off",id:"inputName",onFocus:function(){k(1)},onBlur:function(){k(0)}})})]})}),Object(v.jsx)("div",{className:"rBase next_container$ active",children:Object(v.jsx)("button",{className:"nextBtn",onClick:function(){t(Object(v.jsx)(ce,{setModalContent:t,onRequestClose:n,refreshUser:a,name:r,nickname:o,email:s,password:l,pImg:j,introduce:h}))},children:"\ub2e4\uc74c"})})]})},re=function(e){var t=e.setModalContent,n=e.onRequestClose,a=e.refreshUser,s=e.email,r=e.name,o=e.nickname,l=e.password,j=e._pImg,u=e.introduce,d=Object(c.useState)(j),O=Object(i.a)(d,2),h=O[0],f=O[1];return Object(v.jsxs)("div",{className:"register_modal pImgModal rBase",children:[Object(v.jsxs)("div",{className:"rBase rCenter",children:[Object(v.jsx)("button",{className:"leftBtn iconBtn",onClick:function(){t(Object(v.jsx)(ie,{setModalContent:t,onRequestClose:n,refreshUser:a,email:s,name:r,nickname:o,_password:l,pImg:j,introduce:u}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)(b.a,{icon:m.c,color:"rgb(217, 217, 217)",size:"2x"})]}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsx)("span",{className:"text1",children:"\ud504\ub85c\ud544 \uc0ac\uc9c4 \uc120\ud0dd\ud558\uae30"})}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsx)("span",{className:"text2",children:"\ub9c8\uc74c\uc5d0 \ub4dc\ub294 \uc0ac\uc9c4\uc774 \uc788\ub098\uc694? \uc9c0\uae08 \uc5c5\ub85c\ub4dc\ud558\uc138\uc694"})}),Object(v.jsxs)("div",{className:"img_preview base center ",children:[Object(v.jsx)("img",{className:"main_img",src:void 0===h?y:h,alt:"profile_image"}),Object(v.jsx)("div",{className:"profile_img_back"}),Object(v.jsx)("label",{htmlFor:"profile-file",children:Object(v.jsx)(b.a,{icon:C.b,color:"rgb(217, 217, 217)",size:"2x"})})]}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsx)("button",{className:"nextBtn",onClick:function(){t(Object(v.jsx)(se,{setModalContent:t,onRequestClose:n,refreshUser:a,name:r,nickname:o,email:s,password:l,pImg:j,_introduce:u}))},children:"\ub2e4\uc74c"})}),Object(v.jsx)("input",{id:"profile-file",type:"file",accept:"image/*",onChange:function(e){var c=e.target.files[0],i=new FileReader;i.onloadend=function(e){var c=e.currentTarget.result;f(c),t(Object(v.jsx)(ae,{setModalContent:t,onRequestClose:n,refreshUser:a,email:s,name:r,nickname:o,password:l,_pImg:c,introduce:u}))},void 0!==c&&i.readAsDataURL(c)},style:{opacity:0}})]})},ie=function(e){var t=e.setModalContent,n=e.onRequestClose,a=e.refreshUser,s=e.email,r=e.name,o=e.nickname,l=e._password,j=e.pImg,u=e.introduce,d=Object(c.useState)(void 0!==l?l:""),O=Object(i.a)(d,2),h=O[0],f=O[1],p=Object(c.useState)(!1),x=Object(i.a)(p,2),g=x[0],N=x[1],w=Object(c.useState)(0),y=Object(i.a)(w,2),_=y[0],k=y[1],I=Object(c.useState)(!1),U=Object(i.a)(I,2),B=U[0],R=U[1],S=function(e){"mousedown"===e.type?R(!0):R(!1)};return Object(v.jsxs)("div",{className:"register_modal rBase",children:[Object(v.jsxs)("div",{className:"rBase rCenter",children:[Object(v.jsx)("button",{className:"leftBtn iconBtn",onClick:function(){t(Object(v.jsx)(oe,{setModalContent:t,onRequestClose:n,refreshUser:a,_email:s,_name:r,_nickname:o,password:h,pImg:j,introduce:u}))},children:Object(v.jsx)(b.a,{icon:C.a,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)(b.a,{icon:m.c,color:"rgb(217, 217, 217)",size:"2x"})]}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsx)("span",{className:"text1",children:"\ube44\ubc00\ubc88\ud638\uac00 \ud544\uc694\ud569\ub2c8\ub2e4"})}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsx)("span",{className:"text2",children:"\ube44\ubc00\ubc88\ud638\ub294 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4"})}),Object(v.jsx)("div",{className:"rBase input_container",children:Object(v.jsxs)("label",{className:"rBase ".concat(1===_?"focus":""," ").concat(""!==h?"yesValue":"","\n                ").concat(!1!==g?"error":""),children:[Object(v.jsx)("span",{className:"value",children:"\ube44\ubc00\ubc88\ud638"}),Object(v.jsx)("div",{className:"input_wrap",children:Object(v.jsx)("input",{type:B?"text":"password",value:h,onChange:function(e){var t=e.target.value;f(t),t.length<6?N("\ube44\ubc00\ubc88\ud638\ub97c 6\uc790 \uc774\uc0c1 \uc785\ub825\ud558\uc138\uc694"):N(""===t&&""!==h&&"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694")},className:"inputPassword",autoComplete:"off",id:"inputName",onFocus:function(){k(1)},onBlur:function(){k(0)}})}),!1===g&&""!==h?Object(v.jsx)("span",{className:"underInput show_pass",onMouseDown:S,onMouseUp:S,children:B?"\ube44\ubc00\ubc88\ud638\ubcf4\uae30":"\uc228\uae30\uae30"}):Object(v.jsx)("span",{className:"underInput error",children:g})]})}),Object(v.jsx)("div",{className:"rBase next_container".concat(""!==h&&h.length>=6?" active":""," "),children:Object(v.jsx)("button",{className:"nextBtn",onClick:function(){t(Object(v.jsx)(re,{setModalContent:t,onRequestClose:n,refreshUser:a,name:r,nickname:o,email:s,password:h,_pImg:j,introduce:u}))},children:"\ub2e4\uc74c"})})]})},oe=function(e){var t=e.setModalContent,n=e.onRequestClose,a=e.refreshUser,s=e._email,r=e._nickname,o=e._name,l=e.password,j=e.pImg,u=e.introduce,d=Object(c.useState)(o),O=Object(i.a)(d,2),h=O[0],f=O[1],p=Object(c.useState)(0),g=Object(i.a)(p,2),N=g[0],w=g[1],y=Object(c.useState)(!1),_=Object(i.a)(y,2),k=_[0],I=_[1],U=Object(c.useState)(r),B=Object(i.a)(U,2),R=B[0],S=B[1],L=Object(c.useState)(0),A=Object(i.a)(L,2),M=A[0],E=A[1],F=Object(c.useState)(!1),T=Object(i.a)(F,2),q=T[0],D=T[1],P=Object(c.useState)(s),z=Object(i.a)(P,2),H=z[0],V=z[1],W=Object(c.useState)(!1),K=Object(i.a)(W,2),Q=K[0],G=K[1],J=Object(c.useState)(0),Z=Object(i.a)(J,2),X=Z[0],Y=Z[1],$=function(e){var t=e.target,n=t.value;"text"===t.type?1===X?(f(n),w(n.length),I(""===n&&""!==h&&"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694")):(S(n),E(n.length),D(""===n&&""!==R&&"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694")):(V(n),""===n||function(e){return/^(([^<>()\[\].,;:\s@"]+(\.[^<>()\[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i.test(e)}(n)?(G(!1),ne("email",n)):G("\uc62c\ubc14\ub978 \uc774\uba54\uc77c\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694."))},ee=function(e){1===X&&8!==e.keyCode&&N>=50&&e.preventDefault(),2===X&&8!==e.keyCode&&M>=50&&e.preventDefault()},te=function(){return void 0!==H&&!Q&&void 0!==h&&void 0!==R},ne=function(e,t){x.ref("users").orderByChild(e).equalTo(t).once("value",(function(e){e.exists()&&G("\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc774\uba54\uc77c \uc785\ub2c8\ub2e4.")}))};return Object(v.jsxs)("div",{className:"register_modal rBase",children:[Object(v.jsxs)("div",{className:"rBase rCenter",children:[Object(v.jsx)("button",{className:"iconBtn leftBtn",onClick:n,children:Object(v.jsx)(b.a,{icon:C.l,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)(b.a,{icon:m.c,color:"rgb(217, 217, 217)",size:"2x"})]}),Object(v.jsx)("div",{className:"rBase",children:Object(v.jsx)("span",{className:"text1",children:"\uacc4\uc815\uc744 \uc0dd\uc131\ud558\uc138\uc694"})}),Object(v.jsxs)("div",{className:"rBase input_container",children:[Object(v.jsxs)("label",{className:"rBase ".concat(1===X?"focus":""," ").concat(""!==h?"yesValue":"","\n                ").concat(!1!==k?"error":""),children:[Object(v.jsx)("span",{className:"value",children:"\uc774\ub984"}),Object(v.jsxs)("span",{className:"nCnt",children:[N,"/50"]}),Object(v.jsx)("div",{className:"input_wrap",children:Object(v.jsx)("input",{type:"text",value:h,onChange:$,className:"inputName",onKeyDown:ee,autoComplete:"off",id:"inputName",onFocus:function(){Y(1)},onBlur:function(){Y(0)}})}),Object(v.jsx)("span",{className:"error underInput",children:k})]}),Object(v.jsxs)("label",{className:"rBase ".concat(2===X?"focus":""," ").concat(""!==h?"yesValue":"","\n                ").concat(!1!==q?"error":""),children:[Object(v.jsx)("span",{className:"value",children:"\ub2c9\ub124\uc784"}),Object(v.jsxs)("span",{className:"nCnt",children:[M,"/50"]}),Object(v.jsx)("div",{className:"input_wrap",children:Object(v.jsx)("input",{type:"text",value:R,onChange:$,className:"inputNickName",onKeyDown:ee,autoComplete:"off",id:"inputNickName",onFocus:function(){Y(2)},onBlur:function(){Y(0)}})}),Object(v.jsx)("span",{className:"error underInput",children:q})]}),Object(v.jsxs)("label",{className:"rBase ".concat(3===X?"focus":""," ").concat(""!==H?"yesValue":""," ").concat(!1!==Q?"error":""),children:[Object(v.jsx)("span",{className:"value",children:"\uc774\uba54\uc77c"}),Object(v.jsx)("div",{className:"input_wrap",children:Object(v.jsx)("input",{type:"email",value:H,onChange:$,className:"inputEmail",autoComplete:"off",id:"inputEmail",onFocus:function(){Y(3)},onBlur:function(){Y(0)}})}),Object(v.jsx)("span",{className:"error underInput",children:Q})]})]}),Object(v.jsx)("div",{className:"rBase next_container".concat(te()?" active":""," "),children:Object(v.jsx)("button",{className:"nextBtn",onClick:function(){te()&&t(Object(v.jsx)(ie,{setModalContent:t,onRequestClose:n,refreshUser:a,name:h,nickname:R,email:H,_password:l,pImg:j,introduce:u}))},children:"\ub2e4\uc74c"})})]})},le=function(e){var t=e.refreshUser,n=Object(c.useState)(""),a=Object(i.a)(n,2),s=a[0],r=a[1],j=Object(c.useState)(!1),u=Object(i.a)(j,2),d=u[0],m=u[1],O=Object(c.useState)([]),h=Object(i.a)(O,2),p=h[0],g=h[1],N=Object(c.useState)(!1),w=Object(i.a)(N,2),_=w[0],k=w[1],I=Object(c.useState)(!1),U=Object(i.a)(I,2),B=U[0],R=U[1],S=Object(c.useState)(null),L=Object(i.a)(S,2),A=L[0],M=L[1],E=Object(l.f)(),F=function(){R(!1)},T=function(e){console.log("h"),d&&e.preventDefault()};return Object(c.useEffect)((function(){f.onAuthStateChanged((function(e){k(null!==e)}))})),Object(v.jsxs)("div",{className:"side base",children:[Object(v.jsx)("div",{className:"base ".concat(d?"focus search_container":"search_container"),children:Object(v.jsxs)("label",{htmlFor:"sInput",className:"search_label base",children:[Object(v.jsx)("div",{children:Object(v.jsx)(b.a,{icon:C.k,color:"rgb(217, 217, 217)",size:"1x"})}),Object(v.jsx)("div",{children:Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),E.push("/search/"+s)},children:Object(v.jsx)("input",{type:"text",value:s,onChange:function(e){console.log("onchange");var t=e.target.value;(r(t),""!==t&&s!==t)?x.ref("users").orderByChild("displayName").startAt(t).endAt(t+"\uf8ff").once("value").then((function(e){console.log(e.val()),g(e.val())})):g([])},className:"searchInput",placeholder:"Search Nwitter",autoComplete:"off",id:"sInput",onFocus:function(){m(!0)},onBlur:function(){m(!1)}})})})]})}),Object(v.jsx)("div",{className:"base ".concat(d?"focus searchResult":"searchResult"),children:Object(v.jsx)("nav",{children:d&&null!==p&&Object.keys(p).map((function(e){var t=p[e];return console.log(t),Object(v.jsx)(o.b,{to:"/search/".concat(t.uid),onMouseDown:T,children:Object(v.jsxs)("div",{className:"base resultWrap",children:[Object(v.jsx)("img",{src:""===t.photoURL?y:t.photoURL,alt:""}),Object(v.jsxs)("div",{className:"base",children:[Object(v.jsx)("span",{className:"displayName",children:t.displayName}),Object(v.jsx)("span",{className:"userID",children:t.email}),Object(v.jsx)("span",{className:"user_addi",children:t.introduce})]})]})})}))})}),!_&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"goRegister base",children:[Object(v.jsx)("div",{className:"t1",children:Object(v.jsx)("span",{children:"\ud2b8\uc704\ud130\uc5d0 \ucc98\uc74c\uc774\uc138\uc694?"})}),Object(v.jsx)("div",{className:"t2",children:Object(v.jsx)("span",{children:"\uc9c0\uae08 \uac00\uc785\ud574\uc11c \ub098\uc5d0\uac8c \ub9de\ucda4 \uc124\uc815\ub41c \ud0c0\uc784\ub77c\uc778\uc744 \ub9cc\ub4e4\uc5b4 \ubcf4\uc138\uc694!"})}),Object(v.jsx)("div",{className:"t3",children:Object(v.jsx)("button",{onClick:function(){B||M(Object(v.jsx)(oe,{setModalContent:M,onRequestClose:F,refreshUser:t})),R(!B)},children:"\uac00\uc785\ud558\uae30"})})]}),Object(v.jsx)("div",{className:"goRegister base",children:Object(v.jsxs)("div",{className:"t2",children:[Object(v.jsx)("p",{children:"github.io\uc5d0 \uad6c\uae00\ub85c\uadf8\uc778 \uc5f0\uacb0\uad00\ub828\ud574\uc11c \ud68c\uc6d0\uac00\uc785\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4.."}),Object(v.jsx)("p",{children:"test@test.com / test123\uc73c\ub85c \ub85c\uadf8\uc778\ud574\uc11c \ud14c\uc2a4\ud2b8\ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4"})]})})]}),Object(v.jsx)(Q.a,{shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!1,onRequestClose:function(){return F()},isOpen:B,ariaHideApp:!1,appElement:document.getElementById("app"),className:"base",children:A})]})},je=n(50),ue=function(e){e.match;var t=e.userObj,n=Object(c.useState)([]),a=Object(i.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)({}),l=Object(i.a)(o,2),j=l[0],b=l[1],m=Object(T.a)(),O=Object(i.a)(m,2),h=O[0],f=O[1],p=Object(c.useState)(1),g=Object(i.a)(p,2),N=g[0],w=g[1],C=Object(c.useState)(!1),y=Object(i.a)(C,2),_=y[0],k=y[1],I=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==t&&t&&x.ref("follows").orderByChild("from").equalTo(t.uid).on("value",(function(e){b(F(e.val()))}));case 1:case"end":return e.stop()}}),e)}))),[t]),U=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),x.ref("posts").orderByChild("createdAt").limitToLast(10*N).on("value",(function(e){var t=E(e.val()),n=[];Object.keys(t).forEach((function(e){var c=t[e];Array.isArray(j)&&j.find((function(e){return e.to===c.creatorId}))&&(n=[].concat(Object(je.a)(n),[c]))})),r(n)})),k(!1);case 4:case"end":return e.stop()}}),e)}))),[N,j]);return Object(c.useEffect)((function(){I()}),[I]),Object(c.useEffect)((function(){U()}),[U]),Object(c.useEffect)((function(){f&&!_&&w((function(e){return e+1}))}),[f,_]),Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"base ".concat(s?"postList":"noPostList"),children:0!==s.length?Object.keys(s).map((function(e){return Object(v.jsx)(M,{nweet_key:e,nweetObj:s[e],userObj:t,viewRef:Object.keys(s).length-1===parseInt(e)?h:null},e)})):Object(v.jsx)("span",{children:"\ud314\ub85c\uc6cc\uc911\uc778 \uc0ac\ub78c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})})})},de=function(e){e.match;var t=e.userObj,n=e.refreshUser,c=e.setUserObj,a=e.logout;return Object(v.jsx)(o.a,{children:Object(v.jsxs)("main",{children:[Object(v.jsx)(Y,{userObj:t,logout:a}),Object(v.jsx)(l.c,{children:Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"main",children:[Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(ne,{}),Object(v.jsx)(l.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(q,{userObj:t})}}),Object(v.jsx)(l.a,{exact:!0,path:"/follow",render:function(){return Object(v.jsx)(ue,{userObj:t})}}),Object(v.jsx)(l.a,{path:"/search/:key1",render:function(){return Object(v.jsx)(Z,{userObj:t,refreshUser:n})}}),Object(v.jsx)(l.a,{path:"/nweet/:key1",render:function(){return Object(v.jsx)(S,{userObj:t})}}),Object(v.jsx)(l.a,{path:"/profile",render:function(){return Object(v.jsx)(J,{userObj:t,refreshUser:n,setUserObj:c})}}),Object(v.jsx)(l.a,{path:"/login",render:function(){return Object(v.jsx)(N,{userObj:t,refreshUser:n})}}),Object(v.jsx)(l.a,{path:"/verify/:key1",component:X})]}),Object(v.jsx)(le,{refreshUser:n})]})})})]})})};var be=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(i.a)(s,2),o=r[0],l=r[1],j=function(e,t,n){l({uid:e.uid,userId:n,name:e.name?e.name:"",displayName:e.displayName?e.displayName:"",email:e.email?e.email:"",introduce:e.introduce?e.introduce:"",photoURL:null!==e.photoURL?e.photoURL:y,coverURL:""!==e.coverURL||void 0!==e.coverURL?e.coverURL:"",timestamp:e.timestamp,followCnt:e.followCnt,followingCnt:e.followingCnt,updateProfile:function(e){return t.updateProfile(e)}})};return Object(c.useEffect)((function(){f.onAuthStateChanged((function(e){console.log(e),e?ee(e,j):l(!1),a(!0)}))}),[]),Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)(de,{isLoggedIn:Boolean(o),userObj:o,logout:function(){l(!1)},refreshUser:function(){var e=f.currentUser;ee(e,j)}}):"initializing..."})};n(90);r.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(be,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.63bc27ee.chunk.js.map